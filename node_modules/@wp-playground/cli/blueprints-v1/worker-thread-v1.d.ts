/// <reference types="node" />
import type { FileLockManager } from '@php-wasm/node';
import { EmscriptenDownloadMonitor } from '@php-wasm/progress';
import type { RemoteAPI, SupportedPHPVersion } from '@php-wasm/universal';
import { PHPWorker } from '@php-wasm/universal';
import { type WordPressInstallMode } from '@wp-playground/wordpress';
import { type MessagePort } from 'worker_threads';
import type { Mount } from '@php-wasm/cli-util';
export type WorkerBootOptions = {
    phpVersion: SupportedPHPVersion;
    siteUrl: string;
    mountsBeforeWpInstall: Array<Mount>;
    mountsAfterWpInstall: Array<Mount>;
    firstProcessId: number;
    processIdSpaceLength: number;
    followSymlinks: boolean;
    trace: boolean;
    /**
     * When true, Playground will not send cookies to the client but will manage
     * them internally. This can be useful in environments that can't store cookies,
     * e.g. VS Code WebView.
     *
     * Default: false.
     */
    internalCookieStore?: boolean;
    withIntl?: boolean;
    withXdebug?: boolean;
    nativeInternalDirPath: string;
};
export type PrimaryWorkerBootOptions = WorkerBootOptions & {
    wordpressInstallMode: WordPressInstallMode;
    wpVersion?: string;
    wordPressZip?: ArrayBuffer;
    sqliteIntegrationPluginZip?: ArrayBuffer;
    dataSqlPath?: string;
};
interface WorkerBootRequestHandlerOptions {
    siteUrl: string;
    followSymlinks: boolean;
    phpVersion: SupportedPHPVersion;
    firstProcessId: number;
    processIdSpaceLength: number;
    trace: boolean;
    nativeInternalDirPath: string;
    mountsBeforeWpInstall: Array<Mount>;
    mountsAfterWpInstall: Array<Mount>;
    withIntl?: boolean;
    withXdebug?: boolean;
}
export declare class PlaygroundCliBlueprintV1Worker extends PHPWorker {
    booted: boolean;
    fileLockManager: RemoteAPI<FileLockManager> | FileLockManager | undefined;
    constructor(monitor: EmscriptenDownloadMonitor);
    /**
     * Call this method before boot() to use file locking.
     *
     * This method is separate from boot() to simplify the related Comlink.transferHandlers
     * setup â€“ if an argument is a MessagePort, we're transferring it, not copying it.
     *
     * @see comlink-sync.ts
     * @see phpwasm-emscripten-library-file-locking-for-node.js
     */
    useFileLockManager(port: MessagePort): Promise<void>;
    bootAndSetUpInitialWorker(options: PrimaryWorkerBootOptions): Promise<void>;
    hello(): Promise<string>;
    bootWorker(args: WorkerBootOptions): Promise<void>;
    bootRequestHandler(options: WorkerBootRequestHandlerOptions): Promise<void>;
    dispose(): Promise<void>;
}
export {};
