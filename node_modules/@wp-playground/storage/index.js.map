{"version":3,"file":"index.js","sources":["../../../../packages/playground/storage/src/lib/github.ts","../../../../packages/playground/storage/src/lib/changeset.ts","../../../../packages/playground/storage/src/lib/browser-fs.ts","../../../../isomorphic-git/src/utils/fromValue.js","../../../../isomorphic-git/src/utils/getIterator.js","../../../../isomorphic-git/src/utils/StreamReader.js","../../../../isomorphic-git/src/utils/padHex.js","../../../../isomorphic-git/src/models/GitPktLine.js","../../../../isomorphic-git/src/errors/BaseError.js","../../../../isomorphic-git/src/errors/InternalError.js","../../../../isomorphic-git/src/errors/UnsafeFilepathError.js","../../../../isomorphic-git/src/utils/compareStrings.js","../../../../isomorphic-git/src/utils/comparePath.js","../../../../isomorphic-git/src/utils/compareTreeEntryPath.js","../../../../isomorphic-git/src/models/GitTree.js","../../../../isomorphic-git/src/utils/formatAuthor.js","../../../../isomorphic-git/src/utils/normalizeNewlines.js","../../../../isomorphic-git/src/utils/parseAuthor.js","../../../../isomorphic-git/src/models/GitAnnotatedTag.js","../../../../isomorphic-git/src/utils/indent.js","../../../../isomorphic-git/src/utils/outdent.js","../../../../isomorphic-git/src/models/GitCommit.js","../../../../isomorphic-git/src/models/GitObject.js","../../../../isomorphic-git/src/utils/BufferCursor.js","../../../../isomorphic-git/src/utils/applyDelta.js","../../../../isomorphic-git/src/utils/git-list-pack.js","../../../../isomorphic-git/src/utils/inflate.js","../../../../node_modules/inherits/inherits_browser.js","../../../../node_modules/base64-js/index.js","../../../../node_modules/ieee754/index.js","../../../../node_modules/buffer/index.js","../../../../node_modules/safe-buffer/index.js","../../../../node_modules/isarray/index.js","../../../../node_modules/es-errors/type.js","../../../../node_modules/es-object-atoms/index.js","../../../../node_modules/es-errors/index.js","../../../../node_modules/es-errors/eval.js","../../../../node_modules/es-errors/range.js","../../../../node_modules/es-errors/ref.js","../../../../node_modules/es-errors/syntax.js","../../../../node_modules/es-errors/uri.js","../../../../node_modules/math-intrinsics/abs.js","../../../../node_modules/math-intrinsics/floor.js","../../../../node_modules/math-intrinsics/max.js","../../../../node_modules/math-intrinsics/min.js","../../../../node_modules/math-intrinsics/pow.js","../../../../node_modules/math-intrinsics/round.js","../../../../node_modules/math-intrinsics/isNaN.js","../../../../node_modules/math-intrinsics/sign.js","../../../../node_modules/gopd/gOPD.js","../../../../node_modules/gopd/index.js","../../../../node_modules/es-define-property/index.js","../../../../node_modules/has-symbols/shams.js","../../../../node_modules/has-symbols/index.js","../../../../node_modules/get-proto/Reflect.getPrototypeOf.js","../../../../node_modules/get-proto/Object.getPrototypeOf.js","../../../../node_modules/function-bind/implementation.js","../../../../node_modules/function-bind/index.js","../../../../node_modules/call-bind-apply-helpers/functionCall.js","../../../../node_modules/call-bind-apply-helpers/functionApply.js","../../../../node_modules/call-bind-apply-helpers/reflectApply.js","../../../../node_modules/call-bind-apply-helpers/actualApply.js","../../../../node_modules/call-bind-apply-helpers/index.js","../../../../node_modules/dunder-proto/get.js","../../../../node_modules/get-proto/index.js","../../../../node_modules/hasown/index.js","../../../../node_modules/get-intrinsic/index.js","../../../../node_modules/call-bound/index.js","../../../../node_modules/is-callable/index.js","../../../../node_modules/for-each/index.js","../../../../node_modules/possible-typed-array-names/index.js","../../../../node_modules/available-typed-arrays/index.js","../../../../node_modules/define-data-property/index.js","../../../../node_modules/has-property-descriptors/index.js","../../../../node_modules/set-function-length/index.js","../../../../node_modules/call-bind-apply-helpers/applyBind.js","../../../../node_modules/call-bind/index.js","../../../../node_modules/has-tostringtag/shams.js","../../../../node_modules/which-typed-array/index.js","../../../../node_modules/is-typed-array/index.js","../../../../node_modules/typed-array-buffer/index.js","../../../../node_modules/to-buffer/index.js","../../../../node_modules/sha.js/hash.js","../../../../node_modules/sha.js/sha1.js","../../../../isomorphic-git/src/utils/toHex.js","../../../../isomorphic-git/src/utils/shasum.js","../../../../isomorphic-git/src/models/GitPackIndex.js","../../../../isomorphic-git/src/errors/InvalidOidError.js","../../../../isomorphic-git/src/errors/ObjectTypeError.js","../../../../isomorphic-git/src/utils/normalizeMode.js","../../../../isomorphic-git/src/utils/normalizeStats.js","../../../../isomorphic-git/src/models/GitIndex.js","../../../../isomorphic-git/src/utils/forAwait.js","../../../../isomorphic-git/src/utils/collect.js","../../../../isomorphic-git/src/utils/FIFO.js","../../../../isomorphic-git/src/models/GitSideBand.js","../../../../isomorphic-git/src/wire/parseUploadPackResponse.js","../../../../packages/playground/storage/src/lib/git-sparse-checkout.ts","../../../../packages/playground/storage/src/lib/git-create-dotgit-directory.ts","../../../../packages/playground/storage/src/lib/paths.ts","../../../../packages/playground/storage/src/lib/filesystems.ts"],"sourcesContent":["import { Semaphore } from '@php-wasm/util';\nimport { Octokit } from 'octokit';\nimport type { Changeset } from './changeset';\n\nexport type GithubClient = ReturnType<typeof createClient>;\n\nexport function createClient(githubToken: string): Octokit {\n\tconst octokit = new Octokit({\n\t\tauth: githubToken,\n\t});\n\treturn octokit;\n}\n\nexport type Files = Record<string, Uint8Array>;\nexport function filesListToObject(files: any[], root = '') {\n\tif (root.length && !root.endsWith('/')) {\n\t\troot += '/';\n\t}\n\tconst result: Files = {};\n\tfor (const file of files) {\n\t\tif (file.path.startsWith(root)) {\n\t\t\tresult[file.path.substring(root.length)] = file.content;\n\t\t}\n\t}\n\treturn result;\n}\n\nexport interface GetFilesProgress {\n\tfoundFiles: number;\n\tdownloadedFiles: number;\n}\nexport interface GetFilesOptions {\n\tonProgress?: ({ foundFiles, downloadedFiles }: GetFilesProgress) => void;\n\tprogress?: GetFilesProgress;\n}\nexport async function getFilesFromDirectory(\n\toctokit: GithubClient,\n\towner: string,\n\trepo: string,\n\tref: string,\n\tpath: string,\n\toptions: GetFilesOptions = {}\n) {\n\tif (!options.progress) {\n\t\toptions.progress = {\n\t\t\tfoundFiles: 0,\n\t\t\tdownloadedFiles: 0,\n\t\t};\n\t}\n\tconst { onProgress } = options;\n\tconst filePromises: Promise<any>[] = [];\n\tconst directoryPromises: Promise<any>[] = [];\n\n\t// Fetch the content of the directory\n\tconst { data: content } = await octokit.rest.repos.getContent({\n\t\towner,\n\t\trepo,\n\t\tpath,\n\t\tref,\n\t});\n\tif (!Array.isArray(content)) {\n\t\tthrow new Error(\n\t\t\t`Expected the list of files to be an array, but got ${typeof content}`\n\t\t);\n\t}\n\n\tfor (const item of content) {\n\t\tif (item.type === 'file') {\n\t\t\t++options.progress.foundFiles;\n\t\t\tonProgress?.(options.progress);\n\t\t\tfilePromises.push(\n\t\t\t\tgetFileContent(octokit, owner, repo, ref, item).then((file) => {\n\t\t\t\t\t++options.progress!.downloadedFiles;\n\t\t\t\t\tonProgress?.(options.progress!);\n\t\t\t\t\treturn file;\n\t\t\t\t})\n\t\t\t);\n\t\t} else if (item.type === 'dir') {\n\t\t\tdirectoryPromises.push(\n\t\t\t\tgetFilesFromDirectory(\n\t\t\t\t\toctokit,\n\t\t\t\t\towner,\n\t\t\t\t\trepo,\n\t\t\t\t\tref,\n\t\t\t\t\titem.path,\n\t\t\t\t\toptions\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t}\n\n\tconst files = await Promise.all(filePromises);\n\tconst filesInDirs = (await Promise.all(directoryPromises)).flatMap(\n\t\t(dir) => dir\n\t);\n\treturn [...files, ...filesInDirs];\n}\n\nconst semaphore = new Semaphore({ concurrency: 15 });\nasync function getFileContent(\n\toctokit: GithubClient,\n\towner: string,\n\trepo: string,\n\tref: string,\n\titem: { path: string; name: string }\n) {\n\tconst release = await semaphore.acquire();\n\ttry {\n\t\tconst { data: fileContent } = await octokit.rest.repos.getContent({\n\t\t\towner,\n\t\t\trepo,\n\t\t\tref,\n\t\t\tpath: item.path,\n\t\t});\n\t\tif (!('content' in fileContent)) {\n\t\t\tthrow new Error(`No content found for ${item.path}`);\n\t\t}\n\t\treturn {\n\t\t\tname: item.name,\n\t\t\tpath: item.path,\n\t\t\tcontent: base64ToUint8Array(fileContent.content),\n\t\t};\n\t} finally {\n\t\trelease();\n\t}\n}\n\nfunction base64ToUint8Array(base64: string) {\n\tconst binaryString = window.atob(base64); // This will convert base64 to binary string\n\tconst len = binaryString.length;\n\tconst bytes = new Uint8Array(len);\n\tfor (let i = 0; i < len; i++) {\n\t\tbytes[i] = binaryString.charCodeAt(i);\n\t}\n\treturn bytes;\n}\n\n/**\n * Usage:\n * > await getArtifact('wordpress', 'wordpress-develop', 5511, 'build.yml')\n *\n * To get the first artifact produced by the \"build.yml\" workflow running\n * as a part of the PR 5511\n *\n * @returns\n */\nexport async function getArtifact(\n\toctokit: GithubClient,\n\towner: string,\n\trepo: string,\n\tpull_number: number,\n\tworkflow_id: string\n) {\n\tconst { data: pullRequest } = await octokit.rest.pulls.get({\n\t\towner,\n\t\trepo,\n\t\tpull_number,\n\t});\n\tconst workflowRuns = await octokit.rest.actions.listWorkflowRuns({\n\t\towner,\n\t\trepo,\n\t\tbranch: pullRequest.head.ref,\n\t\tworkflow_id,\n\t});\n\tconst runId = workflowRuns.data.workflow_runs[0]?.id;\n\tconst artifacts = await octokit.rest.actions.listWorkflowRunArtifacts({\n\t\towner,\n\t\trepo,\n\t\trun_id: runId,\n\t});\n\n\tconst artifact = await octokit.rest.actions.downloadArtifact({\n\t\towner,\n\t\trepo,\n\t\tartifact_id: artifacts.data.artifacts[0].id,\n\t\tarchive_format: 'zip',\n\t});\n\treturn artifact.data;\n}\n\nexport async function mayPush(octokit: Octokit, owner: string, repo: string) {\n\tconst { data: repository, headers } = await octokit.request(\n\t\t'GET /repos/{owner}/{repo}',\n\t\t{\n\t\t\towner,\n\t\t\trepo,\n\t\t}\n\t);\n\tif (!headers['x-oauth-scopes'] || !repository.permissions?.push) {\n\t\treturn false;\n\t}\n\n\t// @TODO Find a way to bubble up the following error earlier than on the\n\t//       first push attempt:\n\t//       \"organization has enabled OAuth App access restrictions\"\n\treturn true;\n}\n\nexport async function createOrUpdateBranch(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tbranch: string,\n\tnewHead: string\n) {\n\tconst branchExists = await octokit\n\t\t.request('GET /repos/{owner}/{repo}/branches/{branch}', {\n\t\t\towner,\n\t\t\trepo,\n\t\t\tbranch,\n\t\t})\n\t\t.then(\n\t\t\t() => true,\n\t\t\t() => false\n\t\t);\n\n\tif (branchExists) {\n\t\tawait octokit.request('PATCH /repos/{owner}/{repo}/git/refs/{ref}', {\n\t\t\towner,\n\t\t\trepo,\n\t\t\tsha: newHead,\n\t\t\tref: `heads/${branch}`,\n\t\t});\n\t} else {\n\t\tawait octokit.request('POST /repos/{owner}/{repo}/git/refs', {\n\t\t\towner,\n\t\t\trepo,\n\t\t\tsha: newHead,\n\t\t\tref: `refs/heads/${branch}`,\n\t\t});\n\t}\n}\n\n/**\n * @param octokit\n * @param owner\n * @param repo\n * @returns The owner of the forked repository\n */\nexport async function fork(octokit: Octokit, owner: string, repo: string) {\n\tconst user = await octokit.request('GET /user');\n\tconst forks = await octokit.request('GET /repos/{owner}/{repo}/forks', {\n\t\towner,\n\t\trepo,\n\t});\n\tconst hasFork = forks.data.find(\n\t\t(fork: any) => fork.owner && fork.owner.login === user.data.login\n\t);\n\n\tif (!hasFork) {\n\t\tawait octokit.request('POST /repos/{owner}/{repo}/forks', {\n\t\t\towner,\n\t\t\trepo,\n\t\t});\n\t}\n\n\treturn user.data.login;\n}\n\nexport async function createCommit(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tmessage: string,\n\tparentSha: string,\n\ttreeSha: string\n): Promise<string> {\n\tconst {\n\t\tdata: { sha },\n\t} = await octokit.request('POST /repos/{owner}/{repo}/git/commits', {\n\t\towner,\n\t\trepo,\n\t\tmessage,\n\t\ttree: treeSha,\n\t\tparents: [parentSha],\n\t});\n\n\treturn sha;\n}\n\nexport async function createTree(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tparentSha: string,\n\tchangeset: Changeset\n) {\n\tconst tree = await createTreeNodes(\n\t\toctokit,\n\t\towner,\n\t\trepo,\n\t\tparentSha,\n\t\tchangeset\n\t);\n\tif (tree.length === 0) {\n\t\treturn null;\n\t}\n\n\tconst {\n\t\tdata: { sha: newTreeSha },\n\t} = await octokit.request('POST /repos/{owner}/{repo}/git/trees', {\n\t\towner,\n\t\trepo,\n\t\tbase_tree: parentSha,\n\t\ttree,\n\t});\n\treturn newTreeSha;\n}\n\nexport type GitHubTreeNode = {\n\tpath: string;\n\tmode: '100644';\n} & (\n\t| {\n\t\t\tsha: string | null;\n\t  }\n\t| {\n\t\t\tcontent: string;\n\t  }\n);\nexport async function createTreeNodes(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tparentSha: string,\n\tchangeset: Changeset\n): Promise<GitHubTreeNode[]> {\n\tconst blobsPromises = [];\n\tfor (const [path, content] of changeset.create) {\n\t\tblobsPromises.push(createTreeNode(octokit, owner, repo, path, content));\n\t}\n\tfor (const [path, content] of changeset.update) {\n\t\tblobsPromises.push(createTreeNode(octokit, owner, repo, path, content));\n\t}\n\tfor (const path of changeset.delete) {\n\t\tblobsPromises.push(deleteFile(octokit, owner, repo, parentSha, path));\n\t}\n\treturn Promise.all(blobsPromises).then(\n\t\t(blobs) => blobs.filter((blob) => !!blob) as GitHubTreeNode[]\n\t);\n}\n\nconst blobSemaphore = new Semaphore({ concurrency: 10 });\nexport async function createTreeNode(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tpath: string,\n\tcontent: string | Uint8Array\n): Promise<GitHubTreeNode> {\n\tconst release = await blobSemaphore.acquire();\n\ttry {\n\t\tif (ArrayBuffer.isView(content)) {\n\t\t\ttry {\n\t\t\t\t// Attempt to decode the byteArray as a UTF-8 string\n\t\t\t\tconst stringContent = new TextDecoder('utf-8', {\n\t\t\t\t\tfatal: true,\n\t\t\t\t}).decode(content);\n\t\t\t\treturn {\n\t\t\t\t\tpath,\n\t\t\t\t\tcontent: stringContent,\n\t\t\t\t\tmode: '100644',\n\t\t\t\t};\n\t\t\t} catch {\n\t\t\t\t// If an error occurs, the byteArray is not valid UTF-8 and we must\n\t\t\t\t// create a blob first\n\t\t\t\tconst {\n\t\t\t\t\tdata: { sha },\n\t\t\t\t} = await octokit.rest.git.createBlob({\n\t\t\t\t\towner,\n\t\t\t\t\trepo,\n\t\t\t\t\tencoding: 'base64',\n\t\t\t\t\tcontent: uint8ArrayToBase64(content),\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tpath,\n\t\t\t\t\tsha,\n\t\t\t\t\tmode: '100644',\n\t\t\t\t};\n\t\t\t}\n\t\t} else {\n\t\t\t// Content is a string\n\t\t\treturn {\n\t\t\t\tpath,\n\t\t\t\tcontent,\n\t\t\t\tmode: '100644',\n\t\t\t};\n\t\t}\n\t} finally {\n\t\trelease();\n\t}\n}\n\nexport async function deleteFile(\n\toctokit: Octokit,\n\towner: string,\n\trepo: string,\n\tparentSha: string,\n\tpath: string\n): Promise<GitHubTreeNode | undefined> {\n\tconst release = await blobSemaphore.acquire();\n\ttry {\n\t\t// Deleting a non-existent file from a tree leads to an\n\t\t// \"GitRPC::BadObjectState\" error, so we only attempt to delete the file if\n\t\t// it exists.\n\t\tawait octokit.request('HEAD /repos/{owner}/{repo}/contents/:path', {\n\t\t\towner,\n\t\t\trepo,\n\t\t\tref: parentSha,\n\t\t\tpath,\n\t\t});\n\n\t\treturn {\n\t\t\tpath,\n\t\t\tmode: '100644',\n\t\t\tsha: null,\n\t\t};\n\t} catch {\n\t\t// Pass\n\t\treturn undefined;\n\t} finally {\n\t\trelease();\n\t}\n}\n\nfunction uint8ArrayToBase64(bytes: Uint8Array) {\n\tconst binary = [];\n\tconst len = bytes.byteLength;\n\tfor (let i = 0; i < len; i++) {\n\t\tbinary.push(String.fromCharCode(bytes[i]));\n\t}\n\treturn window.btoa(binary.join(''));\n}\n","import type { UniversalPHP } from '@php-wasm/universal';\nimport { joinPaths, normalizePath } from '@php-wasm/util';\n\nexport type IterateFilesOptions = {\n\t/**\n\t * Should yield paths relative to the root directory?\n\t * If false, all paths will be absolute.\n\t */\n\trelativePaths?: boolean;\n\n\t/**\n\t * The root directory that Playground paths start from.\n\t */\n\tplaygroundRoot?: string;\n\n\t/**\n\t * A prefix to add to all paths.\n\t * Only used if `relativePaths` is true.\n\t */\n\tpathPrefix?: string;\n\n\t/**\n\t * A list of paths to exclude from the results.\n\t */\n\texceptPaths?: string[];\n};\n\n/**\n * Iterates over all files in a Playground directory and its subdirectories.\n *\n * @param playground - The Playground/PHP instance.\n * @param root - The root directory to start iterating from.\n * @param options - Optional configuration.\n * @returns All files found in the tree.\n */\nexport async function* iterateFiles(\n\tplayground: UniversalPHP,\n\troot: string,\n\t{ exceptPaths = [] }: IterateFilesOptions = {}\n): AsyncGenerator<FileEntry> {\n\troot = normalizePath(root);\n\t// If the root is be a file, not a directory, then\n\t// just yield it and return immediately.\n\tif (!(await playground.isDir(root))) {\n\t\tif (await playground.fileExists(root)) {\n\t\t\tyield {\n\t\t\t\tpath: root,\n\t\t\t\tread: async () => await playground.readFileAsBuffer(root),\n\t\t\t};\n\t\t}\n\t\treturn;\n\t}\n\n\tconst stack: string[] = [root];\n\twhile (stack.length) {\n\t\tconst currentParent = stack.pop();\n\t\tif (!currentParent) {\n\t\t\treturn;\n\t\t}\n\t\tconst files = await playground.listFiles(currentParent);\n\t\tfor (const file of files) {\n\t\t\tconst absPath = joinPaths(currentParent, file);\n\t\t\tif (exceptPaths.includes(absPath.substring(root.length + 1))) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (await playground.isDir(absPath)) {\n\t\t\t\tstack.push(absPath);\n\t\t\t} else {\n\t\t\t\tyield {\n\t\t\t\t\tpath: absPath,\n\t\t\t\t\tread: async () =>\n\t\t\t\t\t\tawait playground.readFileAsBuffer(absPath),\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport type FileEntry = {\n\tpath: string;\n\tread: () => Promise<Uint8Array>;\n};\n\n/**\n * Represents a set of changes to be applied to a data store.\n */\nexport type Changeset = {\n\t/**\n\t * Created files.\n\t */\n\tcreate: Map<string, Uint8Array>;\n\n\t/**\n\t * Updated files.\n\t */\n\tupdate: Map<string, Uint8Array>;\n\n\t/**\n\t * Deleted files.\n\t */\n\tdelete: Set<string>;\n};\n\n/**\n * Compares two sets of files and returns a changeset object that describes\n * the differences between them.\n *\n * @param filesBefore - A map of file paths to Uint8Array objects representing the contents\n *                      of the files before the changes.\n * @param filesAfter - An async generator that yields FileEntry objects representing the files\n *                     after the changes.\n * @returns A changeset object that describes the differences between the two sets of files.\n */\nexport async function changeset(\n\tfilesBefore: Map<string, Uint8Array>,\n\tfilesAfter: AsyncGenerator<FileEntry> | Iterable<FileEntry>\n) {\n\tconst changes: Changeset = {\n\t\tcreate: new Map(),\n\t\tupdate: new Map(),\n\t\tdelete: new Set(),\n\t};\n\n\tconst seenFilesAfter = new Set<string>();\n\tfor await (const fileAfter of filesAfter) {\n\t\tseenFilesAfter.add(fileAfter.path);\n\n\t\tconst before = filesBefore.get(fileAfter.path);\n\t\tconst after = await fileAfter.read();\n\t\tif (before) {\n\t\t\tif (!uint8arraysEqual(before, after)) {\n\t\t\t\tchanges.update.set(fileAfter.path, after);\n\t\t\t}\n\t\t} else {\n\t\t\tchanges.create.set(fileAfter.path, after);\n\t\t}\n\t}\n\n\tfor (const pathBefore of filesBefore.keys()) {\n\t\tif (!seenFilesAfter.has(pathBefore)) {\n\t\t\tchanges.delete.add(pathBefore);\n\t\t}\n\t}\n\n\treturn changes;\n}\n\nfunction uint8arraysEqual(a: Uint8Array, b: Uint8Array): boolean {\n\treturn a.length === b.length && a.every((val, index) => val === b[index]);\n}\n","import type { MountDevice } from '@php-wasm/web';\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nimport type * as pleaseLoadTypes from 'wicg-file-system-access';\n\nexport async function directoryHandleFromMountDevice(\n\tdevice: MountDevice\n): Promise<FileSystemDirectoryHandle> {\n\tif (device.type === 'local-fs') {\n\t\treturn device.handle;\n\t}\n\n\treturn opfsPathToDirectoryHandle(device.path);\n}\n\nexport async function opfsPathToDirectoryHandle(\n\topfsPath: string\n): Promise<FileSystemDirectoryHandle> {\n\tconst parts = opfsPath.split('/').filter((p) => p.length > 0);\n\tlet handle = await navigator.storage.getDirectory();\n\tfor (const part of parts) {\n\t\thandle = await handle.getDirectoryHandle(part, { create: true });\n\t}\n\treturn handle;\n}\n\nexport async function directoryHandleToOpfsPath(\n\tdirectoryHandle: FileSystemDirectoryHandle\n): Promise<string> {\n\tconst root = await navigator.storage.getDirectory();\n\tconst pathParts = await root.resolve(directoryHandle);\n\tif (pathParts === null) {\n\t\tthrow new DOMException(\n\t\t\t'Unable to resolve path of OPFS directory handle.',\n\t\t\t'NotFoundError'\n\t\t);\n\t}\n\treturn '/' + pathParts.join('/');\n}\n\nexport async function clearContentsFromMountDevice(mountDevice: MountDevice) {\n\tconst parentHandle = await directoryHandleFromMountDevice(mountDevice);\n\tfor await (const name of parentHandle.keys()) {\n\t\tawait parentHandle.removeEntry(name, {\n\t\t\trecursive: true,\n\t\t});\n\t}\n}\n","// Convert a value to an Async Iterator\n// This will be easier with async generator functions.\nexport function fromValue(value) {\n  let queue = [value]\n  return {\n    next() {\n      return Promise.resolve({ done: queue.length === 0, value: queue.pop() })\n    },\n    return() {\n      queue = []\n      return {}\n    },\n    [Symbol.asyncIterator]() {\n      return this\n    },\n  }\n}\n","import { fromValue } from '../utils/fromValue.js'\n\nexport function getIterator(iterable) {\n  if (iterable[Symbol.asyncIterator]) {\n    return iterable[Symbol.asyncIterator]()\n  }\n  if (iterable[Symbol.iterator]) {\n    return iterable[Symbol.iterator]()\n  }\n  if (iterable.next) {\n    return iterable\n  }\n  return fromValue(iterable)\n}\n","import { getIterator } from './getIterator.js'\n\n// inspired by 'gartal' but lighter-weight and more battle-tested.\nexport class StreamReader {\n  constructor(stream) {\n    // TODO: fix usage in bundlers before Buffer dependency is removed #1855\n    if (typeof Buffer === 'undefined') {\n      throw new Error('Missing Buffer dependency')\n    }\n    this.stream = getIterator(stream)\n    this.buffer = null\n    this.cursor = 0\n    this.undoCursor = 0\n    this.started = false\n    this._ended = false\n    this._discardedBytes = 0\n  }\n\n  eof() {\n    return this._ended && this.cursor === this.buffer.length\n  }\n\n  tell() {\n    return this._discardedBytes + this.cursor\n  }\n\n  async byte() {\n    if (this.eof()) return\n    if (!this.started) await this._init()\n    if (this.cursor === this.buffer.length) {\n      await this._loadnext()\n      if (this._ended) return\n    }\n    this._moveCursor(1)\n    return this.buffer[this.undoCursor]\n  }\n\n  async chunk() {\n    if (this.eof()) return\n    if (!this.started) await this._init()\n    if (this.cursor === this.buffer.length) {\n      await this._loadnext()\n      if (this._ended) return\n    }\n    this._moveCursor(this.buffer.length)\n    return this.buffer.slice(this.undoCursor, this.cursor)\n  }\n\n  async read(n) {\n    if (this.eof()) return\n    if (!this.started) await this._init()\n    if (this.cursor + n > this.buffer.length) {\n      this._trim()\n      await this._accumulate(n)\n    }\n    this._moveCursor(n)\n    return this.buffer.slice(this.undoCursor, this.cursor)\n  }\n\n  async skip(n) {\n    if (this.eof()) return\n    if (!this.started) await this._init()\n    if (this.cursor + n > this.buffer.length) {\n      this._trim()\n      await this._accumulate(n)\n    }\n    this._moveCursor(n)\n  }\n\n  async undo() {\n    this.cursor = this.undoCursor\n  }\n\n  async _next() {\n    this.started = true\n    let { done, value } = await this.stream.next()\n    if (done) {\n      this._ended = true\n      if (!value) return Buffer.alloc(0)\n    }\n    if (value) {\n      value = Buffer.from(value)\n    }\n    return value\n  }\n\n  _trim() {\n    // Throw away parts of the buffer we don't need anymore\n    // assert(this.cursor <= this.buffer.length)\n    this.buffer = this.buffer.slice(this.undoCursor)\n    this.cursor -= this.undoCursor\n    this._discardedBytes += this.undoCursor\n    this.undoCursor = 0\n  }\n\n  _moveCursor(n) {\n    this.undoCursor = this.cursor\n    this.cursor += n\n    if (this.cursor > this.buffer.length) {\n      this.cursor = this.buffer.length\n    }\n  }\n\n  async _accumulate(n) {\n    if (this._ended) return\n    // Expand the buffer until we have N bytes of data\n    // or we've reached the end of the stream\n    const buffers = [this.buffer]\n    while (this.cursor + n > lengthBuffers(buffers)) {\n      const nextbuffer = await this._next()\n      if (this._ended) break\n      buffers.push(nextbuffer)\n    }\n    this.buffer = Buffer.concat(buffers)\n  }\n\n  async _loadnext() {\n    this._discardedBytes += this.buffer.length\n    this.undoCursor = 0\n    this.cursor = 0\n    this.buffer = await this._next()\n  }\n\n  async _init() {\n    this.buffer = await this._next()\n  }\n}\n\n// This helper function helps us postpone concatenating buffers, which\n// would create intermediate buffer objects,\nfunction lengthBuffers(buffers) {\n  return buffers.reduce((acc, buffer) => acc + buffer.length, 0)\n}\n","export function padHex(b, n) {\n  const s = n.toString(16)\n  return '0'.repeat(b - s.length) + s\n}\n","/**\npkt-line Format\n---------------\n\nMuch (but not all) of the payload is described around pkt-lines.\n\nA pkt-line is a variable length binary string.  The first four bytes\nof the line, the pkt-len, indicates the total length of the line,\nin hexadecimal.  The pkt-len includes the 4 bytes used to contain\nthe length's hexadecimal representation.\n\nA pkt-line MAY contain binary data, so implementers MUST ensure\npkt-line parsing/formatting routines are 8-bit clean.\n\nA non-binary line SHOULD BE terminated by an LF, which if present\nMUST be included in the total length. Receivers MUST treat pkt-lines\nwith non-binary data the same whether or not they contain the trailing\nLF (stripping the LF if present, and not complaining when it is\nmissing).\n\nThe maximum length of a pkt-line's data component is 65516 bytes.\nImplementations MUST NOT send pkt-line whose length exceeds 65520\n(65516 bytes of payload + 4 bytes of length data).\n\nImplementations SHOULD NOT send an empty pkt-line (\"0004\").\n\nA pkt-line with a length field of 0 (\"0000\"), called a flush-pkt,\nis a special case and MUST be handled differently than an empty\npkt-line (\"0004\").\n\n----\n  pkt-line     =  data-pkt / flush-pkt\n\n  data-pkt     =  pkt-len pkt-payload\n  pkt-len      =  4*(HEXDIG)\n  pkt-payload  =  (pkt-len - 4)*(OCTET)\n\n  flush-pkt    = \"0000\"\n----\n\nExamples (as C-style strings):\n\n----\n  pkt-line          actual value\n  ---------------------------------\n  \"0006a\\n\"         \"a\\n\"\n  \"0005a\"           \"a\"\n  \"000bfoobar\\n\"    \"foobar\\n\"\n  \"0004\"            \"\"\n----\n*/\nimport { StreamReader } from '../utils/StreamReader.js'\nimport { padHex } from '../utils/padHex.js'\n\n// I'm really using this more as a namespace.\n// There's not a lot of \"state\" in a pkt-line\n\nexport class GitPktLine {\n  static flush() {\n    return Buffer.from('0000', 'utf8')\n  }\n\n  static delim() {\n    return Buffer.from('0001', 'utf8')\n  }\n\n  static encode(line) {\n    if (typeof line === 'string') {\n      line = Buffer.from(line)\n    }\n    const length = line.length + 4\n    const hexlength = padHex(4, length)\n    return Buffer.concat([Buffer.from(hexlength, 'utf8'), line])\n  }\n\n  static streamReader(stream) {\n    const reader = new StreamReader(stream)\n    return async function read() {\n      try {\n        let length = await reader.read(4)\n        if (length == null) return true\n        length = parseInt(length.toString('utf8'), 16)\n        if (length === 0) return null\n        if (length === 1) return null // delim packets\n        const buffer = await reader.read(length - 4)\n        if (buffer == null) return true\n        return buffer\n      } catch (err) {\n        stream.error = err\n        return true\n      }\n    }\n  }\n}\n","export class BaseError extends Error {\n  constructor(message) {\n    super(message)\n    // Setting this here allows TS to infer that all git errors have a `caller` property and\n    // that its type is string.\n    this.caller = ''\n  }\n\n  toJSON() {\n    // Error objects aren't normally serializable. So we do something about that.\n    return {\n      code: this.code,\n      data: this.data,\n      caller: this.caller,\n      message: this.message,\n      stack: this.stack,\n    }\n  }\n\n  fromJSON(json) {\n    const e = new BaseError(json.message)\n    e.code = json.code\n    e.data = json.data\n    e.caller = json.caller\n    e.stack = json.stack\n    return e\n  }\n\n  get isIsomorphicGitError() {\n    return true\n  }\n}\n","import { BaseError } from './BaseError.js'\n\nexport class InternalError extends BaseError {\n  /**\n   * @param {string} message\n   */\n  constructor(message) {\n    super(\n      `An internal error caused this command to fail. Please file a bug report at https://github.com/isomorphic-git/isomorphic-git/issues with this error message: ${message}`\n    )\n    this.code = this.name = InternalError.code\n    this.data = { message }\n  }\n}\n/** @type {'InternalError'} */\nInternalError.code = 'InternalError'\n","import { BaseError } from './BaseError.js'\n\nexport class UnsafeFilepathError extends BaseError {\n  /**\n   * @param {string} filepath\n   */\n  constructor(filepath) {\n    super(`The filepath \"${filepath}\" contains unsafe character sequences`)\n    this.code = this.name = UnsafeFilepathError.code\n    this.data = { filepath }\n  }\n}\n/** @type {'UnsafeFilepathError'} */\nUnsafeFilepathError.code = 'UnsafeFilepathError'\n","export function compareStrings(a, b) {\n  // https://stackoverflow.com/a/40355107/2168416\n  return -(a < b) || +(a > b)\n}\n","import { compareStrings } from './compareStrings'\n\nexport function comparePath(a, b) {\n  // https://stackoverflow.com/a/40355107/2168416\n  return compareStrings(a.path, b.path)\n}\n","import { compareStrings } from './compareStrings'\n\nexport function compareTreeEntryPath(a, b) {\n  // Git sorts tree entries as if there is a trailing slash on directory names.\n  return compareStrings(appendSlashIfDir(a), appendSlashIfDir(b))\n}\n\nfunction appendSlashIfDir(entry) {\n  return entry.mode === '040000' ? entry.path + '/' : entry.path\n}\n","import { InternalError } from '../errors/InternalError.js'\nimport { UnsafeFilepathError } from '../errors/UnsafeFilepathError.js'\nimport { comparePath } from '../utils/comparePath.js'\nimport { compareTreeEntryPath } from '../utils/compareTreeEntryPath.js'\n\n/**\n *\n * @typedef {Object} TreeEntry\n * @property {string} mode - the 6 digit hexadecimal mode\n * @property {string} path - the name of the file or directory\n * @property {string} oid - the SHA-1 object id of the blob or tree\n * @property {'commit'|'blob'|'tree'} type - the type of object\n */\n\nfunction mode2type(mode) {\n  // prettier-ignore\n  switch (mode) {\n    case '040000': return 'tree'\n    case '100644': return 'blob'\n    case '100755': return 'blob'\n    case '120000': return 'blob'\n    case '160000': return 'commit'\n  }\n  throw new InternalError(`Unexpected GitTree entry mode: ${mode}`)\n}\n\nfunction parseBuffer(buffer) {\n  const _entries = []\n  let cursor = 0\n  while (cursor < buffer.length) {\n    const space = buffer.indexOf(32, cursor)\n    if (space === -1) {\n      throw new InternalError(\n        `GitTree: Error parsing buffer at byte location ${cursor}: Could not find the next space character.`\n      )\n    }\n    const nullchar = buffer.indexOf(0, cursor)\n    if (nullchar === -1) {\n      throw new InternalError(\n        `GitTree: Error parsing buffer at byte location ${cursor}: Could not find the next null character.`\n      )\n    }\n    let mode = buffer.slice(cursor, space).toString('utf8')\n    if (mode === '40000') mode = '040000' // makes it line up neater in printed output\n    const type = mode2type(mode)\n    const path = buffer.slice(space + 1, nullchar).toString('utf8')\n\n    // Prevent malicious git repos from writing to \"..\\foo\" on clone etc\n    if (path.includes('\\\\') || path.includes('/')) {\n      throw new UnsafeFilepathError(path)\n    }\n\n    const oid = buffer.slice(nullchar + 1, nullchar + 21).toString('hex')\n    cursor = nullchar + 21\n    _entries.push({ mode, path, oid, type })\n  }\n  return _entries\n}\n\nfunction limitModeToAllowed(mode) {\n  if (typeof mode === 'number') {\n    mode = mode.toString(8)\n  }\n  // tree\n  if (mode.match(/^0?4.*/)) return '040000' // Directory\n  if (mode.match(/^1006.*/)) return '100644' // Regular non-executable file\n  if (mode.match(/^1007.*/)) return '100755' // Regular executable file\n  if (mode.match(/^120.*/)) return '120000' // Symbolic link\n  if (mode.match(/^160.*/)) return '160000' // Commit (git submodule reference)\n  throw new InternalError(`Could not understand file mode: ${mode}`)\n}\n\nfunction nudgeIntoShape(entry) {\n  if (!entry.oid && entry.sha) {\n    entry.oid = entry.sha // Github\n  }\n  entry.mode = limitModeToAllowed(entry.mode) // index\n  if (!entry.type) {\n    entry.type = mode2type(entry.mode) // index\n  }\n  return entry\n}\n\nexport class GitTree {\n  constructor(entries) {\n    if (Buffer.isBuffer(entries)) {\n      this._entries = parseBuffer(entries)\n    } else if (Array.isArray(entries)) {\n      this._entries = entries.map(nudgeIntoShape)\n    } else {\n      throw new InternalError('invalid type passed to GitTree constructor')\n    }\n    // Tree entries are not sorted alphabetically in the usual sense (see `compareTreeEntryPath`)\n    // but it is important later on that these be sorted in the same order as they would be returned from readdir.\n    this._entries.sort(comparePath)\n  }\n\n  static from(tree) {\n    return new GitTree(tree)\n  }\n\n  render() {\n    return this._entries\n      .map(entry => `${entry.mode} ${entry.type} ${entry.oid}    ${entry.path}`)\n      .join('\\n')\n  }\n\n  toObject() {\n    // Adjust the sort order to match git's\n    const entries = [...this._entries]\n    entries.sort(compareTreeEntryPath)\n    return Buffer.concat(\n      entries.map(entry => {\n        const mode = Buffer.from(entry.mode.replace(/^0/, ''))\n        const space = Buffer.from(' ')\n        const path = Buffer.from(entry.path, 'utf8')\n        const nullchar = Buffer.from([0])\n        const oid = Buffer.from(entry.oid, 'hex')\n        return Buffer.concat([mode, space, path, nullchar, oid])\n      })\n    )\n  }\n\n  /**\n   * @returns {TreeEntry[]}\n   */\n  entries() {\n    return this._entries\n  }\n\n  *[Symbol.iterator]() {\n    for (const entry of this._entries) {\n      yield entry\n    }\n  }\n}\n","export function formatAuthor({ name, email, timestamp, timezoneOffset }) {\n  timezoneOffset = formatTimezoneOffset(timezoneOffset)\n  return `${name} <${email}> ${timestamp} ${timezoneOffset}`\n}\n\n// The amount of effort that went into crafting these cases to handle\n// -0 (just so we don't lose that information when parsing and reconstructing)\n// but can also default to +0 was extraordinary.\n\nfunction formatTimezoneOffset(minutes) {\n  const sign = simpleSign(negateExceptForZero(minutes))\n  minutes = Math.abs(minutes)\n  const hours = Math.floor(minutes / 60)\n  minutes -= hours * 60\n  let strHours = String(hours)\n  let strMinutes = String(minutes)\n  if (strHours.length < 2) strHours = '0' + strHours\n  if (strMinutes.length < 2) strMinutes = '0' + strMinutes\n  return (sign === -1 ? '-' : '+') + strHours + strMinutes\n}\n\nfunction simpleSign(n) {\n  return Math.sign(n) || (Object.is(n, -0) ? -1 : 1)\n}\n\nfunction negateExceptForZero(n) {\n  return n === 0 ? n : -n\n}\n","export function normalizeNewlines(str) {\n  // remove all <CR>\n  str = str.replace(/\\r/g, '')\n  // no extra newlines up front\n  str = str.replace(/^\\n+/, '')\n  // and a single newline at the end\n  str = str.replace(/\\n+$/, '') + '\\n'\n  return str\n}\n","export function parseAuthor(author) {\n  const [, name, email, timestamp, offset] = author.match(\n    /^(.*) <(.*)> (.*) (.*)$/\n  )\n  return {\n    name: name,\n    email: email,\n    timestamp: Number(timestamp),\n    timezoneOffset: parseTimezoneOffset(offset),\n  }\n}\n\n// The amount of effort that went into crafting these cases to handle\n// -0 (just so we don't lose that information when parsing and reconstructing)\n// but can also default to +0 was extraordinary.\n\nfunction parseTimezoneOffset(offset) {\n  let [, sign, hours, minutes] = offset.match(/(\\+|-)(\\d\\d)(\\d\\d)/)\n  minutes = (sign === '+' ? 1 : -1) * (Number(hours) * 60 + Number(minutes))\n  return negateExceptForZero(minutes)\n}\n\nfunction negateExceptForZero(n) {\n  return n === 0 ? n : -n\n}\n","import { InternalError } from '../errors/InternalError.js'\nimport { formatAuthor } from '../utils/formatAuthor.js'\nimport { normalizeNewlines } from '../utils/normalizeNewlines.js'\nimport { parseAuthor } from '../utils/parseAuthor.js'\n\nexport class GitAnnotatedTag {\n  constructor(tag) {\n    if (typeof tag === 'string') {\n      this._tag = tag\n    } else if (Buffer.isBuffer(tag)) {\n      this._tag = tag.toString('utf8')\n    } else if (typeof tag === 'object') {\n      this._tag = GitAnnotatedTag.render(tag)\n    } else {\n      throw new InternalError(\n        'invalid type passed to GitAnnotatedTag constructor'\n      )\n    }\n  }\n\n  static from(tag) {\n    return new GitAnnotatedTag(tag)\n  }\n\n  static render(obj) {\n    return `object ${obj.object}\ntype ${obj.type}\ntag ${obj.tag}\ntagger ${formatAuthor(obj.tagger)}\n\n${obj.message}\n${obj.gpgsig ? obj.gpgsig : ''}`\n  }\n\n  justHeaders() {\n    return this._tag.slice(0, this._tag.indexOf('\\n\\n'))\n  }\n\n  message() {\n    const tag = this.withoutSignature()\n    return tag.slice(tag.indexOf('\\n\\n') + 2)\n  }\n\n  parse() {\n    return Object.assign(this.headers(), {\n      message: this.message(),\n      gpgsig: this.gpgsig(),\n    })\n  }\n\n  render() {\n    return this._tag\n  }\n\n  headers() {\n    const headers = this.justHeaders().split('\\n')\n    const hs = []\n    for (const h of headers) {\n      if (h[0] === ' ') {\n        // combine with previous header (without space indent)\n        hs[hs.length - 1] += '\\n' + h.slice(1)\n      } else {\n        hs.push(h)\n      }\n    }\n    const obj = {}\n    for (const h of hs) {\n      const key = h.slice(0, h.indexOf(' '))\n      const value = h.slice(h.indexOf(' ') + 1)\n      if (Array.isArray(obj[key])) {\n        obj[key].push(value)\n      } else {\n        obj[key] = value\n      }\n    }\n    if (obj.tagger) {\n      obj.tagger = parseAuthor(obj.tagger)\n    }\n    if (obj.committer) {\n      obj.committer = parseAuthor(obj.committer)\n    }\n    return obj\n  }\n\n  withoutSignature() {\n    const tag = normalizeNewlines(this._tag)\n    if (tag.indexOf('\\n-----BEGIN PGP SIGNATURE-----') === -1) return tag\n    return tag.slice(0, tag.lastIndexOf('\\n-----BEGIN PGP SIGNATURE-----'))\n  }\n\n  gpgsig() {\n    if (this._tag.indexOf('\\n-----BEGIN PGP SIGNATURE-----') === -1) return\n    const signature = this._tag.slice(\n      this._tag.indexOf('-----BEGIN PGP SIGNATURE-----'),\n      this._tag.indexOf('-----END PGP SIGNATURE-----') +\n        '-----END PGP SIGNATURE-----'.length\n    )\n    return normalizeNewlines(signature)\n  }\n\n  payload() {\n    return this.withoutSignature() + '\\n'\n  }\n\n  toObject() {\n    return Buffer.from(this._tag, 'utf8')\n  }\n\n  static async sign(tag, sign, secretKey) {\n    const payload = tag.payload()\n    let { signature } = await sign({ payload, secretKey })\n    // renormalize the line endings to the one true line-ending\n    signature = normalizeNewlines(signature)\n    const signedTag = payload + signature\n    // return a new tag object\n    return GitAnnotatedTag.from(signedTag)\n  }\n}\n","export function indent(str) {\n  return (\n    str\n      .trim()\n      .split('\\n')\n      .map(x => ' ' + x)\n      .join('\\n') + '\\n'\n  )\n}\n","export function outdent(str) {\n  return str\n    .split('\\n')\n    .map(x => x.replace(/^ /, ''))\n    .join('\\n')\n}\n","import { InternalError } from '../errors/InternalError.js'\nimport { formatAuthor } from '../utils/formatAuthor.js'\nimport { indent } from '../utils/indent.js'\nimport { normalizeNewlines } from '../utils/normalizeNewlines.js'\nimport { outdent } from '../utils/outdent.js'\nimport { parseAuthor } from '../utils/parseAuthor.js'\n\nexport class GitCommit {\n  constructor(commit) {\n    if (typeof commit === 'string') {\n      this._commit = commit\n    } else if (Buffer.isBuffer(commit)) {\n      this._commit = commit.toString('utf8')\n    } else if (typeof commit === 'object') {\n      this._commit = GitCommit.render(commit)\n    } else {\n      throw new InternalError('invalid type passed to GitCommit constructor')\n    }\n  }\n\n  static fromPayloadSignature({ payload, signature }) {\n    const headers = GitCommit.justHeaders(payload)\n    const message = GitCommit.justMessage(payload)\n    const commit = normalizeNewlines(\n      headers + '\\ngpgsig' + indent(signature) + '\\n' + message\n    )\n    return new GitCommit(commit)\n  }\n\n  static from(commit) {\n    return new GitCommit(commit)\n  }\n\n  toObject() {\n    return Buffer.from(this._commit, 'utf8')\n  }\n\n  // Todo: allow setting the headers and message\n  headers() {\n    return this.parseHeaders()\n  }\n\n  // Todo: allow setting the headers and message\n  message() {\n    return GitCommit.justMessage(this._commit)\n  }\n\n  parse() {\n    return Object.assign({ message: this.message() }, this.headers())\n  }\n\n  static justMessage(commit) {\n    return normalizeNewlines(commit.slice(commit.indexOf('\\n\\n') + 2))\n  }\n\n  static justHeaders(commit) {\n    return commit.slice(0, commit.indexOf('\\n\\n'))\n  }\n\n  parseHeaders() {\n    const headers = GitCommit.justHeaders(this._commit).split('\\n')\n    const hs = []\n    for (const h of headers) {\n      if (h[0] === ' ') {\n        // combine with previous header (without space indent)\n        hs[hs.length - 1] += '\\n' + h.slice(1)\n      } else {\n        hs.push(h)\n      }\n    }\n    const obj = {\n      parent: [],\n    }\n    for (const h of hs) {\n      const key = h.slice(0, h.indexOf(' '))\n      const value = h.slice(h.indexOf(' ') + 1)\n      if (Array.isArray(obj[key])) {\n        obj[key].push(value)\n      } else {\n        obj[key] = value\n      }\n    }\n    if (obj.author) {\n      obj.author = parseAuthor(obj.author)\n    }\n    if (obj.committer) {\n      obj.committer = parseAuthor(obj.committer)\n    }\n    return obj\n  }\n\n  static renderHeaders(obj) {\n    let headers = ''\n    if (obj.tree) {\n      headers += `tree ${obj.tree}\\n`\n    } else {\n      headers += `tree 4b825dc642cb6eb9a060e54bf8d69288fbee4904\\n` // the null tree\n    }\n    if (obj.parent) {\n      if (obj.parent.length === undefined) {\n        throw new InternalError(`commit 'parent' property should be an array`)\n      }\n      for (const p of obj.parent) {\n        headers += `parent ${p}\\n`\n      }\n    }\n    const author = obj.author\n    headers += `author ${formatAuthor(author)}\\n`\n    const committer = obj.committer || obj.author\n    headers += `committer ${formatAuthor(committer)}\\n`\n    if (obj.gpgsig) {\n      headers += 'gpgsig' + indent(obj.gpgsig)\n    }\n    return headers\n  }\n\n  static render(obj) {\n    return GitCommit.renderHeaders(obj) + '\\n' + normalizeNewlines(obj.message)\n  }\n\n  render() {\n    return this._commit\n  }\n\n  withoutSignature() {\n    const commit = normalizeNewlines(this._commit)\n    if (commit.indexOf('\\ngpgsig') === -1) return commit\n    const headers = commit.slice(0, commit.indexOf('\\ngpgsig'))\n    const message = commit.slice(\n      commit.indexOf('-----END PGP SIGNATURE-----\\n') +\n        '-----END PGP SIGNATURE-----\\n'.length\n    )\n    return normalizeNewlines(headers + '\\n' + message)\n  }\n\n  isolateSignature() {\n    const signature = this._commit.slice(\n      this._commit.indexOf('-----BEGIN PGP SIGNATURE-----'),\n      this._commit.indexOf('-----END PGP SIGNATURE-----') +\n        '-----END PGP SIGNATURE-----'.length\n    )\n    return outdent(signature)\n  }\n\n  static async sign(commit, sign, secretKey) {\n    const payload = commit.withoutSignature()\n    const message = GitCommit.justMessage(commit._commit)\n    let { signature } = await sign({ payload, secretKey })\n    // renormalize the line endings to the one true line-ending\n    signature = normalizeNewlines(signature)\n    const headers = GitCommit.justHeaders(commit._commit)\n    const signedCommit =\n      headers + '\\n' + 'gpgsig' + indent(signature) + '\\n' + message\n    // return a new commit object\n    return GitCommit.from(signedCommit)\n  }\n}\n","import { InternalError } from '../errors/InternalError.js'\n\nexport class GitObject {\n  static wrap({ type, object }) {\n    return Buffer.concat([\n      Buffer.from(`${type} ${object.byteLength.toString()}\\x00`),\n      Buffer.from(object),\n    ])\n  }\n\n  static unwrap(buffer) {\n    const s = buffer.indexOf(32) // first space\n    const i = buffer.indexOf(0) // first null value\n    const type = buffer.slice(0, s).toString('utf8') // get type of object\n    const length = buffer.slice(s + 1, i).toString('utf8') // get type of object\n    const actualLength = buffer.length - (i + 1)\n    // verify length\n    if (parseInt(length) !== actualLength) {\n      throw new InternalError(\n        `Length mismatch: expected ${length} bytes but got ${actualLength} instead.`\n      )\n    }\n    return {\n      type,\n      object: Buffer.from(buffer.slice(i + 1)),\n    }\n  }\n}\n","// Modeled after https://github.com/tjfontaine/node-buffercursor\n// but with the goal of being much lighter weight.\nexport class BufferCursor {\n  constructor(buffer) {\n    this.buffer = buffer\n    this._start = 0\n  }\n\n  eof() {\n    return this._start >= this.buffer.length\n  }\n\n  tell() {\n    return this._start\n  }\n\n  seek(n) {\n    this._start = n\n  }\n\n  slice(n) {\n    const r = this.buffer.slice(this._start, this._start + n)\n    this._start += n\n    return r\n  }\n\n  toString(enc, length) {\n    const r = this.buffer.toString(enc, this._start, this._start + length)\n    this._start += length\n    return r\n  }\n\n  write(value, length, enc) {\n    const r = this.buffer.write(value, this._start, length, enc)\n    this._start += length\n    return r\n  }\n\n  copy(source, start, end) {\n    const r = source.copy(this.buffer, this._start, start, end)\n    this._start += r\n    return r\n  }\n\n  readUInt8() {\n    const r = this.buffer.readUInt8(this._start)\n    this._start += 1\n    return r\n  }\n\n  writeUInt8(value) {\n    const r = this.buffer.writeUInt8(value, this._start)\n    this._start += 1\n    return r\n  }\n\n  readUInt16BE() {\n    const r = this.buffer.readUInt16BE(this._start)\n    this._start += 2\n    return r\n  }\n\n  writeUInt16BE(value) {\n    const r = this.buffer.writeUInt16BE(value, this._start)\n    this._start += 2\n    return r\n  }\n\n  readUInt32BE() {\n    const r = this.buffer.readUInt32BE(this._start)\n    this._start += 4\n    return r\n  }\n\n  writeUInt32BE(value) {\n    const r = this.buffer.writeUInt32BE(value, this._start)\n    this._start += 4\n    return r\n  }\n}\n","import { InternalError } from '../errors/InternalError.js'\nimport { BufferCursor } from '../utils/BufferCursor.js'\n\n/**\n * @param {Buffer} delta\n * @param {Buffer} source\n * @returns {Buffer}\n */\nexport function applyDelta(delta, source) {\n  const reader = new BufferCursor(delta)\n  const sourceSize = readVarIntLE(reader)\n\n  if (sourceSize !== source.byteLength) {\n    throw new InternalError(\n      `applyDelta expected source buffer to be ${sourceSize} bytes but the provided buffer was ${source.length} bytes`\n    )\n  }\n  const targetSize = readVarIntLE(reader)\n  let target\n\n  const firstOp = readOp(reader, source)\n  // Speed optimization - return raw buffer if it's just single simple copy\n  if (firstOp.byteLength === targetSize) {\n    target = firstOp\n  } else {\n    // Otherwise, allocate a fresh buffer and slices\n    target = Buffer.alloc(targetSize)\n    const writer = new BufferCursor(target)\n    writer.copy(firstOp)\n\n    while (!reader.eof()) {\n      writer.copy(readOp(reader, source))\n    }\n\n    const tell = writer.tell()\n    if (targetSize !== tell) {\n      throw new InternalError(\n        `applyDelta expected target buffer to be ${targetSize} bytes but the resulting buffer was ${tell} bytes`\n      )\n    }\n  }\n  return target\n}\n\nfunction readVarIntLE(reader) {\n  let result = 0\n  let shift = 0\n  let byte = null\n  do {\n    byte = reader.readUInt8()\n    result |= (byte & 0b01111111) << shift\n    shift += 7\n  } while (byte & 0b10000000)\n  return result\n}\n\nfunction readCompactLE(reader, flags, size) {\n  let result = 0\n  let shift = 0\n  while (size--) {\n    if (flags & 0b00000001) {\n      result |= reader.readUInt8() << shift\n    }\n    flags >>= 1\n    shift += 8\n  }\n  return result\n}\n\nfunction readOp(reader, source) {\n  /** @type {number} */\n  const byte = reader.readUInt8()\n  const COPY = 0b10000000\n  const OFFS = 0b00001111\n  const SIZE = 0b01110000\n  if (byte & COPY) {\n    // copy consists of 4 byte offset, 3 byte size (in LE order)\n    const offset = readCompactLE(reader, byte & OFFS, 4)\n    let size = readCompactLE(reader, (byte & SIZE) >> 4, 3)\n    // Yup. They really did this optimization.\n    if (size === 0) size = 0x10000\n    return source.slice(offset, offset + size)\n  } else {\n    // insert\n    return reader.slice(byte)\n  }\n}\n","// My version of git-list-pack - roughly 15x faster than the original\n// It's used slightly differently - instead of returning a through stream it wraps a stream.\n// (I tried to make it API identical, but that ended up being 2x slower than this version.)\nimport pako from 'pako'\n\nimport { InternalError } from '../errors/InternalError.js'\nimport { StreamReader } from '../utils/StreamReader.js'\n\nexport async function listpack(stream, onData) {\n  const reader = new StreamReader(stream)\n  let PACK = await reader.read(4)\n  PACK = PACK.toString('utf8')\n  if (PACK !== 'PACK') {\n    throw new InternalError(`Invalid PACK header '${PACK}'`)\n  }\n\n  let version = await reader.read(4)\n  version = version.readUInt32BE(0)\n  if (version !== 2) {\n    throw new InternalError(`Invalid packfile version: ${version}`)\n  }\n\n  let numObjects = await reader.read(4)\n  numObjects = numObjects.readUInt32BE(0)\n  // If (for some godforsaken reason) this is an empty packfile, abort now.\n  if (numObjects < 1) return\n\n  while (!reader.eof() && numObjects--) {\n    const offset = reader.tell()\n    const { type, length, ofs, reference } = await parseHeader(reader)\n    const inflator = new pako.Inflate()\n    while (!inflator.result) {\n      const chunk = await reader.chunk()\n      if (!chunk) break\n      inflator.push(chunk, false)\n      if (inflator.err) {\n        throw new InternalError(`Pako error: ${inflator.msg}`)\n      }\n      if (inflator.result) {\n        if (inflator.result.length !== length) {\n          throw new InternalError(\n            `Inflated object size is different from that stated in packfile.`\n          )\n        }\n\n        // Backtrack parser to where deflated data ends\n        await reader.undo()\n        await reader.read(chunk.length - inflator.strm.avail_in)\n        const end = reader.tell()\n        await onData({\n          data: inflator.result,\n          type,\n          num: numObjects,\n          offset,\n          end,\n          reference,\n          ofs,\n        })\n      }\n    }\n  }\n}\n\nasync function parseHeader(reader) {\n  // Object type is encoded in bits 654\n  let byte = await reader.byte()\n  const type = (byte >> 4) & 0b111\n  // The length encoding get complicated.\n  // Last four bits of length is encoded in bits 3210\n  let length = byte & 0b1111\n  // Whether the next byte is part of the variable-length encoded number\n  // is encoded in bit 7\n  if (byte & 0b10000000) {\n    let shift = 4\n    do {\n      byte = await reader.byte()\n      length |= (byte & 0b01111111) << shift\n      shift += 7\n    } while (byte & 0b10000000)\n  }\n  // Handle deltified objects\n  let ofs\n  let reference\n  if (type === 6) {\n    let shift = 0\n    ofs = 0\n    const bytes = []\n    do {\n      byte = await reader.byte()\n      ofs |= (byte & 0b01111111) << shift\n      shift += 7\n      bytes.push(byte)\n    } while (byte & 0b10000000)\n    reference = Buffer.from(bytes)\n  }\n  if (type === 7) {\n    const buf = await reader.read(20)\n    reference = buf\n  }\n  return { type, length, ofs, reference }\n}\n","/* eslint-env node, browser */\n/* global DecompressionStream */\nimport pako from 'pako'\n\nlet supportsDecompressionStream = false\n\nexport async function inflate(buffer) {\n  if (supportsDecompressionStream === null) {\n    supportsDecompressionStream = testDecompressionStream()\n  }\n  return supportsDecompressionStream\n    ? browserInflate(buffer)\n    : pako.inflate(buffer)\n}\n\nasync function browserInflate(buffer) {\n  const ds = new DecompressionStream('deflate')\n  const d = new Blob([buffer]).stream().pipeThrough(ds)\n  return new Uint8Array(await new Response(d).arrayBuffer())\n}\n\nfunction testDecompressionStream() {\n  try {\n    const ds = new DecompressionStream('deflate')\n    if (ds) return true\n  } catch (_) {\n    // no bother\n  }\n  return false\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    var copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        Buffer.from(buf).copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (var i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n","/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\n/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","'use strict';\n\n/** @type {import('./type')} */\nmodule.exports = TypeError;\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Object;\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = Error;\n","'use strict';\n\n/** @type {import('./eval')} */\nmodule.exports = EvalError;\n","'use strict';\n\n/** @type {import('./range')} */\nmodule.exports = RangeError;\n","'use strict';\n\n/** @type {import('./ref')} */\nmodule.exports = ReferenceError;\n","'use strict';\n\n/** @type {import('./syntax')} */\nmodule.exports = SyntaxError;\n","'use strict';\n\n/** @type {import('./uri')} */\nmodule.exports = URIError;\n","'use strict';\n\n/** @type {import('./abs')} */\nmodule.exports = Math.abs;\n","'use strict';\n\n/** @type {import('./floor')} */\nmodule.exports = Math.floor;\n","'use strict';\n\n/** @type {import('./max')} */\nmodule.exports = Math.max;\n","'use strict';\n\n/** @type {import('./min')} */\nmodule.exports = Math.min;\n","'use strict';\n\n/** @type {import('./pow')} */\nmodule.exports = Math.pow;\n","'use strict';\n\n/** @type {import('./round')} */\nmodule.exports = Math.round;\n","'use strict';\n\n/** @type {import('./isNaN')} */\nmodule.exports = Number.isNaN || function isNaN(a) {\n\treturn a !== a;\n};\n","'use strict';\n\nvar $isNaN = require('./isNaN');\n\n/** @type {import('./sign')} */\nmodule.exports = function sign(number) {\n\tif ($isNaN(number) || number === 0) {\n\t\treturn number;\n\t}\n\treturn number < 0 ? -1 : +1;\n};\n","'use strict';\n\n/** @type {import('./gOPD')} */\nmodule.exports = Object.getOwnPropertyDescriptor;\n","'use strict';\n\n/** @type {import('.')} */\nvar $gOPD = require('./gOPD');\n\nif ($gOPD) {\n\ttry {\n\t\t$gOPD([], 'length');\n\t} catch (e) {\n\t\t// IE 8 has a broken gOPD\n\t\t$gOPD = null;\n\t}\n}\n\nmodule.exports = $gOPD;\n","'use strict';\n\n/** @type {import('.')} */\nvar $defineProperty = Object.defineProperty || false;\nif ($defineProperty) {\n\ttry {\n\t\t$defineProperty({}, 'a', { value: 1 });\n\t} catch (e) {\n\t\t// IE 8 has a broken defineProperty\n\t\t$defineProperty = false;\n\t}\n}\n\nmodule.exports = $defineProperty;\n","'use strict';\n\n/** @type {import('./shams')} */\n/* eslint complexity: [2, 18], max-statements: [2, 33] */\nmodule.exports = function hasSymbols() {\n\tif (typeof Symbol !== 'function' || typeof Object.getOwnPropertySymbols !== 'function') { return false; }\n\tif (typeof Symbol.iterator === 'symbol') { return true; }\n\n\t/** @type {{ [k in symbol]?: unknown }} */\n\tvar obj = {};\n\tvar sym = Symbol('test');\n\tvar symObj = Object(sym);\n\tif (typeof sym === 'string') { return false; }\n\n\tif (Object.prototype.toString.call(sym) !== '[object Symbol]') { return false; }\n\tif (Object.prototype.toString.call(symObj) !== '[object Symbol]') { return false; }\n\n\t// temp disabled per https://github.com/ljharb/object.assign/issues/17\n\t// if (sym instanceof Symbol) { return false; }\n\t// temp disabled per https://github.com/WebReflection/get-own-property-symbols/issues/4\n\t// if (!(symObj instanceof Symbol)) { return false; }\n\n\t// if (typeof Symbol.prototype.toString !== 'function') { return false; }\n\t// if (String(sym) !== Symbol.prototype.toString.call(sym)) { return false; }\n\n\tvar symVal = 42;\n\tobj[sym] = symVal;\n\tfor (var _ in obj) { return false; } // eslint-disable-line no-restricted-syntax, no-unreachable-loop\n\tif (typeof Object.keys === 'function' && Object.keys(obj).length !== 0) { return false; }\n\n\tif (typeof Object.getOwnPropertyNames === 'function' && Object.getOwnPropertyNames(obj).length !== 0) { return false; }\n\n\tvar syms = Object.getOwnPropertySymbols(obj);\n\tif (syms.length !== 1 || syms[0] !== sym) { return false; }\n\n\tif (!Object.prototype.propertyIsEnumerable.call(obj, sym)) { return false; }\n\n\tif (typeof Object.getOwnPropertyDescriptor === 'function') {\n\t\t// eslint-disable-next-line no-extra-parens\n\t\tvar descriptor = /** @type {PropertyDescriptor} */ (Object.getOwnPropertyDescriptor(obj, sym));\n\t\tif (descriptor.value !== symVal || descriptor.enumerable !== true) { return false; }\n\t}\n\n\treturn true;\n};\n","'use strict';\n\nvar origSymbol = typeof Symbol !== 'undefined' && Symbol;\nvar hasSymbolSham = require('./shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasNativeSymbols() {\n\tif (typeof origSymbol !== 'function') { return false; }\n\tif (typeof Symbol !== 'function') { return false; }\n\tif (typeof origSymbol('foo') !== 'symbol') { return false; }\n\tif (typeof Symbol('bar') !== 'symbol') { return false; }\n\n\treturn hasSymbolSham();\n};\n","'use strict';\n\n/** @type {import('./Reflect.getPrototypeOf')} */\nmodule.exports = (typeof Reflect !== 'undefined' && Reflect.getPrototypeOf) || null;\n","'use strict';\n\nvar $Object = require('es-object-atoms');\n\n/** @type {import('./Object.getPrototypeOf')} */\nmodule.exports = $Object.getPrototypeOf || null;\n","'use strict';\n\n/* eslint no-invalid-this: 1 */\n\nvar ERROR_MESSAGE = 'Function.prototype.bind called on incompatible ';\nvar toStr = Object.prototype.toString;\nvar max = Math.max;\nvar funcType = '[object Function]';\n\nvar concatty = function concatty(a, b) {\n    var arr = [];\n\n    for (var i = 0; i < a.length; i += 1) {\n        arr[i] = a[i];\n    }\n    for (var j = 0; j < b.length; j += 1) {\n        arr[j + a.length] = b[j];\n    }\n\n    return arr;\n};\n\nvar slicy = function slicy(arrLike, offset) {\n    var arr = [];\n    for (var i = offset || 0, j = 0; i < arrLike.length; i += 1, j += 1) {\n        arr[j] = arrLike[i];\n    }\n    return arr;\n};\n\nvar joiny = function (arr, joiner) {\n    var str = '';\n    for (var i = 0; i < arr.length; i += 1) {\n        str += arr[i];\n        if (i + 1 < arr.length) {\n            str += joiner;\n        }\n    }\n    return str;\n};\n\nmodule.exports = function bind(that) {\n    var target = this;\n    if (typeof target !== 'function' || toStr.apply(target) !== funcType) {\n        throw new TypeError(ERROR_MESSAGE + target);\n    }\n    var args = slicy(arguments, 1);\n\n    var bound;\n    var binder = function () {\n        if (this instanceof bound) {\n            var result = target.apply(\n                this,\n                concatty(args, arguments)\n            );\n            if (Object(result) === result) {\n                return result;\n            }\n            return this;\n        }\n        return target.apply(\n            that,\n            concatty(args, arguments)\n        );\n\n    };\n\n    var boundLength = max(0, target.length - args.length);\n    var boundArgs = [];\n    for (var i = 0; i < boundLength; i++) {\n        boundArgs[i] = '$' + i;\n    }\n\n    bound = Function('binder', 'return function (' + joiny(boundArgs, ',') + '){ return binder.apply(this,arguments); }')(binder);\n\n    if (target.prototype) {\n        var Empty = function Empty() {};\n        Empty.prototype = target.prototype;\n        bound.prototype = new Empty();\n        Empty.prototype = null;\n    }\n\n    return bound;\n};\n","'use strict';\n\nvar implementation = require('./implementation');\n\nmodule.exports = Function.prototype.bind || implementation;\n","'use strict';\n\n/** @type {import('./functionCall')} */\nmodule.exports = Function.prototype.call;\n","'use strict';\n\n/** @type {import('./functionApply')} */\nmodule.exports = Function.prototype.apply;\n","'use strict';\n\n/** @type {import('./reflectApply')} */\nmodule.exports = typeof Reflect !== 'undefined' && Reflect && Reflect.apply;\n","'use strict';\n\nvar bind = require('function-bind');\n\nvar $apply = require('./functionApply');\nvar $call = require('./functionCall');\nvar $reflectApply = require('./reflectApply');\n\n/** @type {import('./actualApply')} */\nmodule.exports = $reflectApply || bind.call($call, $apply);\n","'use strict';\n\nvar bind = require('function-bind');\nvar $TypeError = require('es-errors/type');\n\nvar $call = require('./functionCall');\nvar $actualApply = require('./actualApply');\n\n/** @type {(args: [Function, thisArg?: unknown, ...args: unknown[]]) => Function} TODO FIXME, find a way to use import('.') */\nmodule.exports = function callBindBasic(args) {\n\tif (args.length < 1 || typeof args[0] !== 'function') {\n\t\tthrow new $TypeError('a function is required');\n\t}\n\treturn $actualApply(bind, $call, args);\n};\n","'use strict';\n\nvar callBind = require('call-bind-apply-helpers');\nvar gOPD = require('gopd');\n\nvar hasProtoAccessor;\ntry {\n\t// eslint-disable-next-line no-extra-parens, no-proto\n\thasProtoAccessor = /** @type {{ __proto__?: typeof Array.prototype }} */ ([]).__proto__ === Array.prototype;\n} catch (e) {\n\tif (!e || typeof e !== 'object' || !('code' in e) || e.code !== 'ERR_PROTO_ACCESS') {\n\t\tthrow e;\n\t}\n}\n\n// eslint-disable-next-line no-extra-parens\nvar desc = !!hasProtoAccessor && gOPD && gOPD(Object.prototype, /** @type {keyof typeof Object.prototype} */ ('__proto__'));\n\nvar $Object = Object;\nvar $getPrototypeOf = $Object.getPrototypeOf;\n\n/** @type {import('./get')} */\nmodule.exports = desc && typeof desc.get === 'function'\n\t? callBind([desc.get])\n\t: typeof $getPrototypeOf === 'function'\n\t\t? /** @type {import('./get')} */ function getDunder(value) {\n\t\t\t// eslint-disable-next-line eqeqeq\n\t\t\treturn $getPrototypeOf(value == null ? value : $Object(value));\n\t\t}\n\t\t: false;\n","'use strict';\n\nvar reflectGetProto = require('./Reflect.getPrototypeOf');\nvar originalGetProto = require('./Object.getPrototypeOf');\n\nvar getDunderProto = require('dunder-proto/get');\n\n/** @type {import('.')} */\nmodule.exports = reflectGetProto\n\t? function getProto(O) {\n\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\treturn reflectGetProto(O);\n\t}\n\t: originalGetProto\n\t\t? function getProto(O) {\n\t\t\tif (!O || (typeof O !== 'object' && typeof O !== 'function')) {\n\t\t\t\tthrow new TypeError('getProto: not an object');\n\t\t\t}\n\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\treturn originalGetProto(O);\n\t\t}\n\t\t: getDunderProto\n\t\t\t? function getProto(O) {\n\t\t\t\t// @ts-expect-error TS can't narrow inside a closure, for some reason\n\t\t\t\treturn getDunderProto(O);\n\t\t\t}\n\t\t\t: null;\n","'use strict';\n\nvar call = Function.prototype.call;\nvar $hasOwn = Object.prototype.hasOwnProperty;\nvar bind = require('function-bind');\n\n/** @type {import('.')} */\nmodule.exports = bind.call(call, $hasOwn);\n","'use strict';\n\nvar undefined;\n\nvar $Object = require('es-object-atoms');\n\nvar $Error = require('es-errors');\nvar $EvalError = require('es-errors/eval');\nvar $RangeError = require('es-errors/range');\nvar $ReferenceError = require('es-errors/ref');\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\nvar $URIError = require('es-errors/uri');\n\nvar abs = require('math-intrinsics/abs');\nvar floor = require('math-intrinsics/floor');\nvar max = require('math-intrinsics/max');\nvar min = require('math-intrinsics/min');\nvar pow = require('math-intrinsics/pow');\nvar round = require('math-intrinsics/round');\nvar sign = require('math-intrinsics/sign');\n\nvar $Function = Function;\n\n// eslint-disable-next-line consistent-return\nvar getEvalledConstructor = function (expressionSyntax) {\n\ttry {\n\t\treturn $Function('\"use strict\"; return (' + expressionSyntax + ').constructor;')();\n\t} catch (e) {}\n};\n\nvar $gOPD = require('gopd');\nvar $defineProperty = require('es-define-property');\n\nvar throwTypeError = function () {\n\tthrow new $TypeError();\n};\nvar ThrowTypeError = $gOPD\n\t? (function () {\n\t\ttry {\n\t\t\t// eslint-disable-next-line no-unused-expressions, no-caller, no-restricted-properties\n\t\t\targuments.callee; // IE 8 does not throw here\n\t\t\treturn throwTypeError;\n\t\t} catch (calleeThrows) {\n\t\t\ttry {\n\t\t\t\t// IE 8 throws on Object.getOwnPropertyDescriptor(arguments, '')\n\t\t\t\treturn $gOPD(arguments, 'callee').get;\n\t\t\t} catch (gOPDthrows) {\n\t\t\t\treturn throwTypeError;\n\t\t\t}\n\t\t}\n\t}())\n\t: throwTypeError;\n\nvar hasSymbols = require('has-symbols')();\n\nvar getProto = require('get-proto');\nvar $ObjectGPO = require('get-proto/Object.getPrototypeOf');\nvar $ReflectGPO = require('get-proto/Reflect.getPrototypeOf');\n\nvar $apply = require('call-bind-apply-helpers/functionApply');\nvar $call = require('call-bind-apply-helpers/functionCall');\n\nvar needsEval = {};\n\nvar TypedArray = typeof Uint8Array === 'undefined' || !getProto ? undefined : getProto(Uint8Array);\n\nvar INTRINSICS = {\n\t__proto__: null,\n\t'%AggregateError%': typeof AggregateError === 'undefined' ? undefined : AggregateError,\n\t'%Array%': Array,\n\t'%ArrayBuffer%': typeof ArrayBuffer === 'undefined' ? undefined : ArrayBuffer,\n\t'%ArrayIteratorPrototype%': hasSymbols && getProto ? getProto([][Symbol.iterator]()) : undefined,\n\t'%AsyncFromSyncIteratorPrototype%': undefined,\n\t'%AsyncFunction%': needsEval,\n\t'%AsyncGenerator%': needsEval,\n\t'%AsyncGeneratorFunction%': needsEval,\n\t'%AsyncIteratorPrototype%': needsEval,\n\t'%Atomics%': typeof Atomics === 'undefined' ? undefined : Atomics,\n\t'%BigInt%': typeof BigInt === 'undefined' ? undefined : BigInt,\n\t'%BigInt64Array%': typeof BigInt64Array === 'undefined' ? undefined : BigInt64Array,\n\t'%BigUint64Array%': typeof BigUint64Array === 'undefined' ? undefined : BigUint64Array,\n\t'%Boolean%': Boolean,\n\t'%DataView%': typeof DataView === 'undefined' ? undefined : DataView,\n\t'%Date%': Date,\n\t'%decodeURI%': decodeURI,\n\t'%decodeURIComponent%': decodeURIComponent,\n\t'%encodeURI%': encodeURI,\n\t'%encodeURIComponent%': encodeURIComponent,\n\t'%Error%': $Error,\n\t'%eval%': eval, // eslint-disable-line no-eval\n\t'%EvalError%': $EvalError,\n\t'%Float16Array%': typeof Float16Array === 'undefined' ? undefined : Float16Array,\n\t'%Float32Array%': typeof Float32Array === 'undefined' ? undefined : Float32Array,\n\t'%Float64Array%': typeof Float64Array === 'undefined' ? undefined : Float64Array,\n\t'%FinalizationRegistry%': typeof FinalizationRegistry === 'undefined' ? undefined : FinalizationRegistry,\n\t'%Function%': $Function,\n\t'%GeneratorFunction%': needsEval,\n\t'%Int8Array%': typeof Int8Array === 'undefined' ? undefined : Int8Array,\n\t'%Int16Array%': typeof Int16Array === 'undefined' ? undefined : Int16Array,\n\t'%Int32Array%': typeof Int32Array === 'undefined' ? undefined : Int32Array,\n\t'%isFinite%': isFinite,\n\t'%isNaN%': isNaN,\n\t'%IteratorPrototype%': hasSymbols && getProto ? getProto(getProto([][Symbol.iterator]())) : undefined,\n\t'%JSON%': typeof JSON === 'object' ? JSON : undefined,\n\t'%Map%': typeof Map === 'undefined' ? undefined : Map,\n\t'%MapIteratorPrototype%': typeof Map === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Map()[Symbol.iterator]()),\n\t'%Math%': Math,\n\t'%Number%': Number,\n\t'%Object%': $Object,\n\t'%Object.getOwnPropertyDescriptor%': $gOPD,\n\t'%parseFloat%': parseFloat,\n\t'%parseInt%': parseInt,\n\t'%Promise%': typeof Promise === 'undefined' ? undefined : Promise,\n\t'%Proxy%': typeof Proxy === 'undefined' ? undefined : Proxy,\n\t'%RangeError%': $RangeError,\n\t'%ReferenceError%': $ReferenceError,\n\t'%Reflect%': typeof Reflect === 'undefined' ? undefined : Reflect,\n\t'%RegExp%': RegExp,\n\t'%Set%': typeof Set === 'undefined' ? undefined : Set,\n\t'%SetIteratorPrototype%': typeof Set === 'undefined' || !hasSymbols || !getProto ? undefined : getProto(new Set()[Symbol.iterator]()),\n\t'%SharedArrayBuffer%': typeof SharedArrayBuffer === 'undefined' ? undefined : SharedArrayBuffer,\n\t'%String%': String,\n\t'%StringIteratorPrototype%': hasSymbols && getProto ? getProto(''[Symbol.iterator]()) : undefined,\n\t'%Symbol%': hasSymbols ? Symbol : undefined,\n\t'%SyntaxError%': $SyntaxError,\n\t'%ThrowTypeError%': ThrowTypeError,\n\t'%TypedArray%': TypedArray,\n\t'%TypeError%': $TypeError,\n\t'%Uint8Array%': typeof Uint8Array === 'undefined' ? undefined : Uint8Array,\n\t'%Uint8ClampedArray%': typeof Uint8ClampedArray === 'undefined' ? undefined : Uint8ClampedArray,\n\t'%Uint16Array%': typeof Uint16Array === 'undefined' ? undefined : Uint16Array,\n\t'%Uint32Array%': typeof Uint32Array === 'undefined' ? undefined : Uint32Array,\n\t'%URIError%': $URIError,\n\t'%WeakMap%': typeof WeakMap === 'undefined' ? undefined : WeakMap,\n\t'%WeakRef%': typeof WeakRef === 'undefined' ? undefined : WeakRef,\n\t'%WeakSet%': typeof WeakSet === 'undefined' ? undefined : WeakSet,\n\n\t'%Function.prototype.call%': $call,\n\t'%Function.prototype.apply%': $apply,\n\t'%Object.defineProperty%': $defineProperty,\n\t'%Object.getPrototypeOf%': $ObjectGPO,\n\t'%Math.abs%': abs,\n\t'%Math.floor%': floor,\n\t'%Math.max%': max,\n\t'%Math.min%': min,\n\t'%Math.pow%': pow,\n\t'%Math.round%': round,\n\t'%Math.sign%': sign,\n\t'%Reflect.getPrototypeOf%': $ReflectGPO\n};\n\nif (getProto) {\n\ttry {\n\t\tnull.error; // eslint-disable-line no-unused-expressions\n\t} catch (e) {\n\t\t// https://github.com/tc39/proposal-shadowrealm/pull/384#issuecomment-1364264229\n\t\tvar errorProto = getProto(getProto(e));\n\t\tINTRINSICS['%Error.prototype%'] = errorProto;\n\t}\n}\n\nvar doEval = function doEval(name) {\n\tvar value;\n\tif (name === '%AsyncFunction%') {\n\t\tvalue = getEvalledConstructor('async function () {}');\n\t} else if (name === '%GeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('function* () {}');\n\t} else if (name === '%AsyncGeneratorFunction%') {\n\t\tvalue = getEvalledConstructor('async function* () {}');\n\t} else if (name === '%AsyncGenerator%') {\n\t\tvar fn = doEval('%AsyncGeneratorFunction%');\n\t\tif (fn) {\n\t\t\tvalue = fn.prototype;\n\t\t}\n\t} else if (name === '%AsyncIteratorPrototype%') {\n\t\tvar gen = doEval('%AsyncGenerator%');\n\t\tif (gen && getProto) {\n\t\t\tvalue = getProto(gen.prototype);\n\t\t}\n\t}\n\n\tINTRINSICS[name] = value;\n\n\treturn value;\n};\n\nvar LEGACY_ALIASES = {\n\t__proto__: null,\n\t'%ArrayBufferPrototype%': ['ArrayBuffer', 'prototype'],\n\t'%ArrayPrototype%': ['Array', 'prototype'],\n\t'%ArrayProto_entries%': ['Array', 'prototype', 'entries'],\n\t'%ArrayProto_forEach%': ['Array', 'prototype', 'forEach'],\n\t'%ArrayProto_keys%': ['Array', 'prototype', 'keys'],\n\t'%ArrayProto_values%': ['Array', 'prototype', 'values'],\n\t'%AsyncFunctionPrototype%': ['AsyncFunction', 'prototype'],\n\t'%AsyncGenerator%': ['AsyncGeneratorFunction', 'prototype'],\n\t'%AsyncGeneratorPrototype%': ['AsyncGeneratorFunction', 'prototype', 'prototype'],\n\t'%BooleanPrototype%': ['Boolean', 'prototype'],\n\t'%DataViewPrototype%': ['DataView', 'prototype'],\n\t'%DatePrototype%': ['Date', 'prototype'],\n\t'%ErrorPrototype%': ['Error', 'prototype'],\n\t'%EvalErrorPrototype%': ['EvalError', 'prototype'],\n\t'%Float32ArrayPrototype%': ['Float32Array', 'prototype'],\n\t'%Float64ArrayPrototype%': ['Float64Array', 'prototype'],\n\t'%FunctionPrototype%': ['Function', 'prototype'],\n\t'%Generator%': ['GeneratorFunction', 'prototype'],\n\t'%GeneratorPrototype%': ['GeneratorFunction', 'prototype', 'prototype'],\n\t'%Int8ArrayPrototype%': ['Int8Array', 'prototype'],\n\t'%Int16ArrayPrototype%': ['Int16Array', 'prototype'],\n\t'%Int32ArrayPrototype%': ['Int32Array', 'prototype'],\n\t'%JSONParse%': ['JSON', 'parse'],\n\t'%JSONStringify%': ['JSON', 'stringify'],\n\t'%MapPrototype%': ['Map', 'prototype'],\n\t'%NumberPrototype%': ['Number', 'prototype'],\n\t'%ObjectPrototype%': ['Object', 'prototype'],\n\t'%ObjProto_toString%': ['Object', 'prototype', 'toString'],\n\t'%ObjProto_valueOf%': ['Object', 'prototype', 'valueOf'],\n\t'%PromisePrototype%': ['Promise', 'prototype'],\n\t'%PromiseProto_then%': ['Promise', 'prototype', 'then'],\n\t'%Promise_all%': ['Promise', 'all'],\n\t'%Promise_reject%': ['Promise', 'reject'],\n\t'%Promise_resolve%': ['Promise', 'resolve'],\n\t'%RangeErrorPrototype%': ['RangeError', 'prototype'],\n\t'%ReferenceErrorPrototype%': ['ReferenceError', 'prototype'],\n\t'%RegExpPrototype%': ['RegExp', 'prototype'],\n\t'%SetPrototype%': ['Set', 'prototype'],\n\t'%SharedArrayBufferPrototype%': ['SharedArrayBuffer', 'prototype'],\n\t'%StringPrototype%': ['String', 'prototype'],\n\t'%SymbolPrototype%': ['Symbol', 'prototype'],\n\t'%SyntaxErrorPrototype%': ['SyntaxError', 'prototype'],\n\t'%TypedArrayPrototype%': ['TypedArray', 'prototype'],\n\t'%TypeErrorPrototype%': ['TypeError', 'prototype'],\n\t'%Uint8ArrayPrototype%': ['Uint8Array', 'prototype'],\n\t'%Uint8ClampedArrayPrototype%': ['Uint8ClampedArray', 'prototype'],\n\t'%Uint16ArrayPrototype%': ['Uint16Array', 'prototype'],\n\t'%Uint32ArrayPrototype%': ['Uint32Array', 'prototype'],\n\t'%URIErrorPrototype%': ['URIError', 'prototype'],\n\t'%WeakMapPrototype%': ['WeakMap', 'prototype'],\n\t'%WeakSetPrototype%': ['WeakSet', 'prototype']\n};\n\nvar bind = require('function-bind');\nvar hasOwn = require('hasown');\nvar $concat = bind.call($call, Array.prototype.concat);\nvar $spliceApply = bind.call($apply, Array.prototype.splice);\nvar $replace = bind.call($call, String.prototype.replace);\nvar $strSlice = bind.call($call, String.prototype.slice);\nvar $exec = bind.call($call, RegExp.prototype.exec);\n\n/* adapted from https://github.com/lodash/lodash/blob/4.17.15/dist/lodash.js#L6735-L6744 */\nvar rePropName = /[^%.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|%$))/g;\nvar reEscapeChar = /\\\\(\\\\)?/g; /** Used to match backslashes in property paths. */\nvar stringToPath = function stringToPath(string) {\n\tvar first = $strSlice(string, 0, 1);\n\tvar last = $strSlice(string, -1);\n\tif (first === '%' && last !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected closing `%`');\n\t} else if (last === '%' && first !== '%') {\n\t\tthrow new $SyntaxError('invalid intrinsic syntax, expected opening `%`');\n\t}\n\tvar result = [];\n\t$replace(string, rePropName, function (match, number, quote, subString) {\n\t\tresult[result.length] = quote ? $replace(subString, reEscapeChar, '$1') : number || match;\n\t});\n\treturn result;\n};\n/* end adaptation */\n\nvar getBaseIntrinsic = function getBaseIntrinsic(name, allowMissing) {\n\tvar intrinsicName = name;\n\tvar alias;\n\tif (hasOwn(LEGACY_ALIASES, intrinsicName)) {\n\t\talias = LEGACY_ALIASES[intrinsicName];\n\t\tintrinsicName = '%' + alias[0] + '%';\n\t}\n\n\tif (hasOwn(INTRINSICS, intrinsicName)) {\n\t\tvar value = INTRINSICS[intrinsicName];\n\t\tif (value === needsEval) {\n\t\t\tvalue = doEval(intrinsicName);\n\t\t}\n\t\tif (typeof value === 'undefined' && !allowMissing) {\n\t\t\tthrow new $TypeError('intrinsic ' + name + ' exists, but is not available. Please file an issue!');\n\t\t}\n\n\t\treturn {\n\t\t\talias: alias,\n\t\t\tname: intrinsicName,\n\t\t\tvalue: value\n\t\t};\n\t}\n\n\tthrow new $SyntaxError('intrinsic ' + name + ' does not exist!');\n};\n\nmodule.exports = function GetIntrinsic(name, allowMissing) {\n\tif (typeof name !== 'string' || name.length === 0) {\n\t\tthrow new $TypeError('intrinsic name must be a non-empty string');\n\t}\n\tif (arguments.length > 1 && typeof allowMissing !== 'boolean') {\n\t\tthrow new $TypeError('\"allowMissing\" argument must be a boolean');\n\t}\n\n\tif ($exec(/^%?[^%]*%?$/, name) === null) {\n\t\tthrow new $SyntaxError('`%` may not be present anywhere but at the beginning and end of the intrinsic name');\n\t}\n\tvar parts = stringToPath(name);\n\tvar intrinsicBaseName = parts.length > 0 ? parts[0] : '';\n\n\tvar intrinsic = getBaseIntrinsic('%' + intrinsicBaseName + '%', allowMissing);\n\tvar intrinsicRealName = intrinsic.name;\n\tvar value = intrinsic.value;\n\tvar skipFurtherCaching = false;\n\n\tvar alias = intrinsic.alias;\n\tif (alias) {\n\t\tintrinsicBaseName = alias[0];\n\t\t$spliceApply(parts, $concat([0, 1], alias));\n\t}\n\n\tfor (var i = 1, isOwn = true; i < parts.length; i += 1) {\n\t\tvar part = parts[i];\n\t\tvar first = $strSlice(part, 0, 1);\n\t\tvar last = $strSlice(part, -1);\n\t\tif (\n\t\t\t(\n\t\t\t\t(first === '\"' || first === \"'\" || first === '`')\n\t\t\t\t|| (last === '\"' || last === \"'\" || last === '`')\n\t\t\t)\n\t\t\t&& first !== last\n\t\t) {\n\t\t\tthrow new $SyntaxError('property names with quotes must have matching quotes');\n\t\t}\n\t\tif (part === 'constructor' || !isOwn) {\n\t\t\tskipFurtherCaching = true;\n\t\t}\n\n\t\tintrinsicBaseName += '.' + part;\n\t\tintrinsicRealName = '%' + intrinsicBaseName + '%';\n\n\t\tif (hasOwn(INTRINSICS, intrinsicRealName)) {\n\t\t\tvalue = INTRINSICS[intrinsicRealName];\n\t\t} else if (value != null) {\n\t\t\tif (!(part in value)) {\n\t\t\t\tif (!allowMissing) {\n\t\t\t\t\tthrow new $TypeError('base intrinsic for ' + name + ' exists, but the property is not available.');\n\t\t\t\t}\n\t\t\t\treturn void undefined;\n\t\t\t}\n\t\t\tif ($gOPD && (i + 1) >= parts.length) {\n\t\t\t\tvar desc = $gOPD(value, part);\n\t\t\t\tisOwn = !!desc;\n\n\t\t\t\t// By convention, when a data property is converted to an accessor\n\t\t\t\t// property to emulate a data property that does not suffer from\n\t\t\t\t// the override mistake, that accessor's getter is marked with\n\t\t\t\t// an `originalValue` property. Here, when we detect this, we\n\t\t\t\t// uphold the illusion by pretending to see that original data\n\t\t\t\t// property, i.e., returning the value rather than the getter\n\t\t\t\t// itself.\n\t\t\t\tif (isOwn && 'get' in desc && !('originalValue' in desc.get)) {\n\t\t\t\t\tvalue = desc.get;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = value[part];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tisOwn = hasOwn(value, part);\n\t\t\t\tvalue = value[part];\n\t\t\t}\n\n\t\t\tif (isOwn && !skipFurtherCaching) {\n\t\t\t\tINTRINSICS[intrinsicRealName] = value;\n\t\t\t}\n\t\t}\n\t}\n\treturn value;\n};\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\n\nvar callBindBasic = require('call-bind-apply-helpers');\n\n/** @type {(thisArg: string, searchString: string, position?: number) => number} */\nvar $indexOf = callBindBasic([GetIntrinsic('%String.prototype.indexOf%')]);\n\n/** @type {import('.')} */\nmodule.exports = function callBoundIntrinsic(name, allowMissing) {\n\t/* eslint no-extra-parens: 0 */\n\n\tvar intrinsic = /** @type {(this: unknown, ...args: unknown[]) => unknown} */ (GetIntrinsic(name, !!allowMissing));\n\tif (typeof intrinsic === 'function' && $indexOf(name, '.prototype.') > -1) {\n\t\treturn callBindBasic(/** @type {const} */ ([intrinsic]));\n\t}\n\treturn intrinsic;\n};\n","'use strict';\n\nvar fnToStr = Function.prototype.toString;\nvar reflectApply = typeof Reflect === 'object' && Reflect !== null && Reflect.apply;\nvar badArrayLike;\nvar isCallableMarker;\nif (typeof reflectApply === 'function' && typeof Object.defineProperty === 'function') {\n\ttry {\n\t\tbadArrayLike = Object.defineProperty({}, 'length', {\n\t\t\tget: function () {\n\t\t\t\tthrow isCallableMarker;\n\t\t\t}\n\t\t});\n\t\tisCallableMarker = {};\n\t\t// eslint-disable-next-line no-throw-literal\n\t\treflectApply(function () { throw 42; }, null, badArrayLike);\n\t} catch (_) {\n\t\tif (_ !== isCallableMarker) {\n\t\t\treflectApply = null;\n\t\t}\n\t}\n} else {\n\treflectApply = null;\n}\n\nvar constructorRegex = /^\\s*class\\b/;\nvar isES6ClassFn = function isES6ClassFunction(value) {\n\ttry {\n\t\tvar fnStr = fnToStr.call(value);\n\t\treturn constructorRegex.test(fnStr);\n\t} catch (e) {\n\t\treturn false; // not a function\n\t}\n};\n\nvar tryFunctionObject = function tryFunctionToStr(value) {\n\ttry {\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tfnToStr.call(value);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\nvar toStr = Object.prototype.toString;\nvar objectClass = '[object Object]';\nvar fnClass = '[object Function]';\nvar genClass = '[object GeneratorFunction]';\nvar ddaClass = '[object HTMLAllCollection]'; // IE 11\nvar ddaClass2 = '[object HTML document.all class]';\nvar ddaClass3 = '[object HTMLCollection]'; // IE 9-10\nvar hasToStringTag = typeof Symbol === 'function' && !!Symbol.toStringTag; // better: use `has-tostringtag`\n\nvar isIE68 = !(0 in [,]); // eslint-disable-line no-sparse-arrays, comma-spacing\n\nvar isDDA = function isDocumentDotAll() { return false; };\nif (typeof document === 'object') {\n\t// Firefox 3 canonicalizes DDA to undefined when it's not accessed directly\n\tvar all = document.all;\n\tif (toStr.call(all) === toStr.call(document.all)) {\n\t\tisDDA = function isDocumentDotAll(value) {\n\t\t\t/* globals document: false */\n\t\t\t// in IE 6-8, typeof document.all is \"object\" and it's truthy\n\t\t\tif ((isIE68 || !value) && (typeof value === 'undefined' || typeof value === 'object')) {\n\t\t\t\ttry {\n\t\t\t\t\tvar str = toStr.call(value);\n\t\t\t\t\treturn (\n\t\t\t\t\t\tstr === ddaClass\n\t\t\t\t\t\t|| str === ddaClass2\n\t\t\t\t\t\t|| str === ddaClass3 // opera 12.16\n\t\t\t\t\t\t|| str === objectClass // IE 6-8\n\t\t\t\t\t) && value('') == null; // eslint-disable-line eqeqeq\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n}\n\nmodule.exports = reflectApply\n\t? function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\ttry {\n\t\t\treflectApply(value, null, badArrayLike);\n\t\t} catch (e) {\n\t\t\tif (e !== isCallableMarker) { return false; }\n\t\t}\n\t\treturn !isES6ClassFn(value) && tryFunctionObject(value);\n\t}\n\t: function isCallable(value) {\n\t\tif (isDDA(value)) { return true; }\n\t\tif (!value) { return false; }\n\t\tif (typeof value !== 'function' && typeof value !== 'object') { return false; }\n\t\tif (hasToStringTag) { return tryFunctionObject(value); }\n\t\tif (isES6ClassFn(value)) { return false; }\n\t\tvar strClass = toStr.call(value);\n\t\tif (strClass !== fnClass && strClass !== genClass && !(/^\\[object HTML/).test(strClass)) { return false; }\n\t\treturn tryFunctionObject(value);\n\t};\n","'use strict';\n\nvar isCallable = require('is-callable');\n\nvar toStr = Object.prototype.toString;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/** @type {<This, A extends readonly unknown[]>(arr: A, iterator: (this: This | void, value: A[number], index: number, arr: A) => void, receiver: This | undefined) => void} */\nvar forEachArray = function forEachArray(array, iterator, receiver) {\n    for (var i = 0, len = array.length; i < len; i++) {\n        if (hasOwnProperty.call(array, i)) {\n            if (receiver == null) {\n                iterator(array[i], i, array);\n            } else {\n                iterator.call(receiver, array[i], i, array);\n            }\n        }\n    }\n};\n\n/** @type {<This, S extends string>(string: S, iterator: (this: This | void, value: S[number], index: number, string: S) => void, receiver: This | undefined) => void} */\nvar forEachString = function forEachString(string, iterator, receiver) {\n    for (var i = 0, len = string.length; i < len; i++) {\n        // no such thing as a sparse string.\n        if (receiver == null) {\n            iterator(string.charAt(i), i, string);\n        } else {\n            iterator.call(receiver, string.charAt(i), i, string);\n        }\n    }\n};\n\n/** @type {<This, O>(obj: O, iterator: (this: This | void, value: O[keyof O], index: keyof O, obj: O) => void, receiver: This | undefined) => void} */\nvar forEachObject = function forEachObject(object, iterator, receiver) {\n    for (var k in object) {\n        if (hasOwnProperty.call(object, k)) {\n            if (receiver == null) {\n                iterator(object[k], k, object);\n            } else {\n                iterator.call(receiver, object[k], k, object);\n            }\n        }\n    }\n};\n\n/** @type {(x: unknown) => x is readonly unknown[]} */\nfunction isArray(x) {\n    return toStr.call(x) === '[object Array]';\n}\n\n/** @type {import('.')._internal} */\nmodule.exports = function forEach(list, iterator, thisArg) {\n    if (!isCallable(iterator)) {\n        throw new TypeError('iterator must be a function');\n    }\n\n    var receiver;\n    if (arguments.length >= 3) {\n        receiver = thisArg;\n    }\n\n    if (isArray(list)) {\n        forEachArray(list, iterator, receiver);\n    } else if (typeof list === 'string') {\n        forEachString(list, iterator, receiver);\n    } else {\n        forEachObject(list, iterator, receiver);\n    }\n};\n","'use strict';\n\n/** @type {import('.')} */\nmodule.exports = [\n\t'Float16Array',\n\t'Float32Array',\n\t'Float64Array',\n\t'Int8Array',\n\t'Int16Array',\n\t'Int32Array',\n\t'Uint8Array',\n\t'Uint8ClampedArray',\n\t'Uint16Array',\n\t'Uint32Array',\n\t'BigInt64Array',\n\t'BigUint64Array'\n];\n","'use strict';\n\nvar possibleNames = require('possible-typed-array-names');\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\n\n/** @type {import('.')} */\nmodule.exports = function availableTypedArrays() {\n\tvar /** @type {ReturnType<typeof availableTypedArrays>} */ out = [];\n\tfor (var i = 0; i < possibleNames.length; i++) {\n\t\tif (typeof g[possibleNames[i]] === 'function') {\n\t\t\t// @ts-expect-error\n\t\t\tout[out.length] = possibleNames[i];\n\t\t}\n\t}\n\treturn out;\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar $SyntaxError = require('es-errors/syntax');\nvar $TypeError = require('es-errors/type');\n\nvar gopd = require('gopd');\n\n/** @type {import('.')} */\nmodule.exports = function defineDataProperty(\n\tobj,\n\tproperty,\n\tvalue\n) {\n\tif (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n\t\tthrow new $TypeError('`obj` must be an object or a function`');\n\t}\n\tif (typeof property !== 'string' && typeof property !== 'symbol') {\n\t\tthrow new $TypeError('`property` must be a string or a symbol`');\n\t}\n\tif (arguments.length > 3 && typeof arguments[3] !== 'boolean' && arguments[3] !== null) {\n\t\tthrow new $TypeError('`nonEnumerable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 4 && typeof arguments[4] !== 'boolean' && arguments[4] !== null) {\n\t\tthrow new $TypeError('`nonWritable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 5 && typeof arguments[5] !== 'boolean' && arguments[5] !== null) {\n\t\tthrow new $TypeError('`nonConfigurable`, if provided, must be a boolean or null');\n\t}\n\tif (arguments.length > 6 && typeof arguments[6] !== 'boolean') {\n\t\tthrow new $TypeError('`loose`, if provided, must be a boolean');\n\t}\n\n\tvar nonEnumerable = arguments.length > 3 ? arguments[3] : null;\n\tvar nonWritable = arguments.length > 4 ? arguments[4] : null;\n\tvar nonConfigurable = arguments.length > 5 ? arguments[5] : null;\n\tvar loose = arguments.length > 6 ? arguments[6] : false;\n\n\t/* @type {false | TypedPropertyDescriptor<unknown>} */\n\tvar desc = !!gopd && gopd(obj, property);\n\n\tif ($defineProperty) {\n\t\t$defineProperty(obj, property, {\n\t\t\tconfigurable: nonConfigurable === null && desc ? desc.configurable : !nonConfigurable,\n\t\t\tenumerable: nonEnumerable === null && desc ? desc.enumerable : !nonEnumerable,\n\t\t\tvalue: value,\n\t\t\twritable: nonWritable === null && desc ? desc.writable : !nonWritable\n\t\t});\n\t} else if (loose || (!nonEnumerable && !nonWritable && !nonConfigurable)) {\n\t\t// must fall back to [[Set]], and was not explicitly asked to make non-enumerable, non-writable, or non-configurable\n\t\tobj[property] = value; // eslint-disable-line no-param-reassign\n\t} else {\n\t\tthrow new $SyntaxError('This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.');\n\t}\n};\n","'use strict';\n\nvar $defineProperty = require('es-define-property');\n\nvar hasPropertyDescriptors = function hasPropertyDescriptors() {\n\treturn !!$defineProperty;\n};\n\nhasPropertyDescriptors.hasArrayLengthDefineBug = function hasArrayLengthDefineBug() {\n\t// node v0.6 has a bug where array lengths can be Set but not Defined\n\tif (!$defineProperty) {\n\t\treturn null;\n\t}\n\ttry {\n\t\treturn $defineProperty([], 'length', { value: 1 }).length !== 1;\n\t} catch (e) {\n\t\t// In Firefox 4-22, defining length on an array throws an exception.\n\t\treturn true;\n\t}\n};\n\nmodule.exports = hasPropertyDescriptors;\n","'use strict';\n\nvar GetIntrinsic = require('get-intrinsic');\nvar define = require('define-data-property');\nvar hasDescriptors = require('has-property-descriptors')();\nvar gOPD = require('gopd');\n\nvar $TypeError = require('es-errors/type');\nvar $floor = GetIntrinsic('%Math.floor%');\n\n/** @type {import('.')} */\nmodule.exports = function setFunctionLength(fn, length) {\n\tif (typeof fn !== 'function') {\n\t\tthrow new $TypeError('`fn` is not a function');\n\t}\n\tif (typeof length !== 'number' || length < 0 || length > 0xFFFFFFFF || $floor(length) !== length) {\n\t\tthrow new $TypeError('`length` must be a positive 32-bit integer');\n\t}\n\n\tvar loose = arguments.length > 2 && !!arguments[2];\n\n\tvar functionLengthIsConfigurable = true;\n\tvar functionLengthIsWritable = true;\n\tif ('length' in fn && gOPD) {\n\t\tvar desc = gOPD(fn, 'length');\n\t\tif (desc && !desc.configurable) {\n\t\t\tfunctionLengthIsConfigurable = false;\n\t\t}\n\t\tif (desc && !desc.writable) {\n\t\t\tfunctionLengthIsWritable = false;\n\t\t}\n\t}\n\n\tif (functionLengthIsConfigurable || functionLengthIsWritable || !loose) {\n\t\tif (hasDescriptors) {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length, true, true);\n\t\t} else {\n\t\t\tdefine(/** @type {Parameters<define>[0]} */ (fn), 'length', length);\n\t\t}\n\t}\n\treturn fn;\n};\n","'use strict';\n\nvar bind = require('function-bind');\nvar $apply = require('./functionApply');\nvar actualApply = require('./actualApply');\n\n/** @type {import('./applyBind')} */\nmodule.exports = function applyBind() {\n\treturn actualApply(bind, $apply, arguments);\n};\n","'use strict';\n\nvar setFunctionLength = require('set-function-length');\n\nvar $defineProperty = require('es-define-property');\n\nvar callBindBasic = require('call-bind-apply-helpers');\nvar applyBind = require('call-bind-apply-helpers/applyBind');\n\nmodule.exports = function callBind(originalFunction) {\n\tvar func = callBindBasic(arguments);\n\tvar adjustedLength = originalFunction.length - (arguments.length - 1);\n\treturn setFunctionLength(\n\t\tfunc,\n\t\t1 + (adjustedLength > 0 ? adjustedLength : 0),\n\t\ttrue\n\t);\n};\n\nif ($defineProperty) {\n\t$defineProperty(module.exports, 'apply', { value: applyBind });\n} else {\n\tmodule.exports.apply = applyBind;\n}\n","'use strict';\n\nvar hasSymbols = require('has-symbols/shams');\n\n/** @type {import('.')} */\nmodule.exports = function hasToStringTagShams() {\n\treturn hasSymbols() && !!Symbol.toStringTag;\n};\n","'use strict';\n\nvar forEach = require('for-each');\nvar availableTypedArrays = require('available-typed-arrays');\nvar callBind = require('call-bind');\nvar callBound = require('call-bound');\nvar gOPD = require('gopd');\nvar getProto = require('get-proto');\n\nvar $toString = callBound('Object.prototype.toString');\nvar hasToStringTag = require('has-tostringtag/shams')();\n\nvar g = typeof globalThis === 'undefined' ? global : globalThis;\nvar typedArrays = availableTypedArrays();\n\nvar $slice = callBound('String.prototype.slice');\n\n/** @type {<T = unknown>(array: readonly T[], value: unknown) => number} */\nvar $indexOf = callBound('Array.prototype.indexOf', true) || function indexOf(array, value) {\n\tfor (var i = 0; i < array.length; i += 1) {\n\t\tif (array[i] === value) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n};\n\n/** @typedef {import('./types').Getter} Getter */\n/** @type {import('./types').Cache} */\nvar cache = { __proto__: null };\nif (hasToStringTag && gOPD && getProto) {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tif (Symbol.toStringTag in arr && getProto) {\n\t\t\tvar proto = getProto(arr);\n\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\tvar descriptor = gOPD(proto, Symbol.toStringTag);\n\t\t\tif (!descriptor && proto) {\n\t\t\t\tvar superProto = getProto(proto);\n\t\t\t\t// @ts-expect-error TS won't narrow inside a closure\n\t\t\t\tdescriptor = gOPD(superProto, Symbol.toStringTag);\n\t\t\t}\n\t\t\t// @ts-expect-error TODO: fix\n\t\t\tcache['$' + typedArray] = callBind(descriptor.get);\n\t\t}\n\t});\n} else {\n\tforEach(typedArrays, function (typedArray) {\n\t\tvar arr = new g[typedArray]();\n\t\tvar fn = arr.slice || arr.set;\n\t\tif (fn) {\n\t\t\tcache[\n\t\t\t\t/** @type {`$${import('.').TypedArrayName}`} */ ('$' + typedArray)\n\t\t\t] = /** @type {import('./types').BoundSlice | import('./types').BoundSet} */ (\n\t\t\t\t// @ts-expect-error TODO FIXME\n\t\t\t\tcallBind(fn)\n\t\t\t);\n\t\t}\n\t});\n}\n\n/** @type {(value: object) => false | import('.').TypedArrayName} */\nvar tryTypedArrays = function tryAllTypedArrays(value) {\n\t/** @type {ReturnType<typeof tryAllTypedArrays>} */ var found = false;\n\tforEach(\n\t\t/** @type {Record<`\\$${import('.').TypedArrayName}`, Getter>} */ (cache),\n\t\t/** @type {(getter: Getter, name: `\\$${import('.').TypedArrayName}`) => void} */\n\t\tfunction (getter, typedArray) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t\t// @ts-expect-error a throw is fine here\n\t\t\t\t\tif ('$' + getter(value) === typedArray) {\n\t\t\t\t\t\tfound = /** @type {import('.').TypedArrayName} */ ($slice(typedArray, 1));\n\t\t\t\t\t}\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {(value: object) => false | import('.').TypedArrayName} */\nvar trySlices = function tryAllSlices(value) {\n\t/** @type {ReturnType<typeof tryAllSlices>} */ var found = false;\n\tforEach(\n\t\t/** @type {Record<`\\$${import('.').TypedArrayName}`, Getter>} */(cache),\n\t\t/** @type {(getter: Getter, name: `\\$${import('.').TypedArrayName}`) => void} */ function (getter, name) {\n\t\t\tif (!found) {\n\t\t\t\ttry {\n\t\t\t\t\t// @ts-expect-error a throw is fine here\n\t\t\t\t\tgetter(value);\n\t\t\t\t\tfound = /** @type {import('.').TypedArrayName} */ ($slice(name, 1));\n\t\t\t\t} catch (e) { /**/ }\n\t\t\t}\n\t\t}\n\t);\n\treturn found;\n};\n\n/** @type {import('.')} */\nmodule.exports = function whichTypedArray(value) {\n\tif (!value || typeof value !== 'object') { return false; }\n\tif (!hasToStringTag) {\n\t\t/** @type {string} */\n\t\tvar tag = $slice($toString(value), 8, -1);\n\t\tif ($indexOf(typedArrays, tag) > -1) {\n\t\t\treturn tag;\n\t\t}\n\t\tif (tag !== 'Object') {\n\t\t\treturn false;\n\t\t}\n\t\t// node < 0.6 hits here on real Typed Arrays\n\t\treturn trySlices(value);\n\t}\n\tif (!gOPD) { return null; } // unknown engine\n\treturn tryTypedArrays(value);\n};\n","'use strict';\n\nvar whichTypedArray = require('which-typed-array');\n\n/** @type {import('.')} */\nmodule.exports = function isTypedArray(value) {\n\treturn !!whichTypedArray(value);\n};\n","'use strict';\n\nvar $TypeError = require('es-errors/type');\n\nvar callBound = require('call-bound');\n\n/** @type {undefined | ((thisArg: import('.').TypedArray) => Buffer<ArrayBufferLike>)} */\nvar $typedArrayBuffer = callBound('TypedArray.prototype.buffer', true);\n\nvar isTypedArray = require('is-typed-array');\n\n/** @type {import('.')} */\n// node <= 0.10, < 0.11.4 has a nonconfigurable own property instead of a prototype getter\nmodule.exports = $typedArrayBuffer || function typedArrayBuffer(x) {\n\tif (!isTypedArray(x)) {\n\t\tthrow new $TypeError('Not a Typed Array');\n\t}\n\treturn x.buffer;\n};\n","'use strict';\n\nvar Buffer = require('safe-buffer').Buffer;\nvar isArray = require('isarray');\nvar typedArrayBuffer = require('typed-array-buffer');\n\nvar isView = ArrayBuffer.isView || function isView(obj) {\n\ttry {\n\t\ttypedArrayBuffer(obj);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nvar useUint8Array = typeof Uint8Array !== 'undefined';\nvar useArrayBuffer = typeof ArrayBuffer !== 'undefined'\n\t&& typeof Uint8Array !== 'undefined';\nvar useFromArrayBuffer = useArrayBuffer && (Buffer.prototype instanceof Uint8Array || Buffer.TYPED_ARRAY_SUPPORT);\n\nmodule.exports = function toBuffer(data, encoding) {\n\tif (Buffer.isBuffer(data)) {\n\t\tif (data.constructor && !('isBuffer' in data)) {\n\t\t\t// probably a SlowBuffer\n\t\t\treturn Buffer.from(data);\n\t\t}\n\t\treturn data;\n\t}\n\n\tif (typeof data === 'string') {\n\t\treturn Buffer.from(data, encoding);\n\t}\n\n\t/*\n\t * Wrap any TypedArray instances and DataViews\n\t * Makes sense only on engines with full TypedArray support -- let Buffer detect that\n\t */\n\tif (useArrayBuffer && isView(data)) {\n\t\t// Bug in Node.js <6.3.1, which treats this as out-of-bounds\n\t\tif (data.byteLength === 0) {\n\t\t\treturn Buffer.alloc(0);\n\t\t}\n\n\t\t// When Buffer is based on Uint8Array, we can just construct it from ArrayBuffer\n\t\tif (useFromArrayBuffer) {\n\t\t\tvar res = Buffer.from(data.buffer, data.byteOffset, data.byteLength);\n\t\t\t/*\n\t\t\t * Recheck result size, as offset/length doesn't work on Node.js <5.10\n\t\t\t * We just go to Uint8Array case if this fails\n\t\t\t */\n\t\t\tif (res.byteLength === data.byteLength) {\n\t\t\t\treturn res;\n\t\t\t}\n\t\t}\n\n\t\t// Convert to Uint8Array bytes and then to Buffer\n\t\tvar uint8 = data instanceof Uint8Array ? data : new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n\t\tvar result = Buffer.from(uint8);\n\n\t\t/*\n\t\t * Let's recheck that conversion succeeded\n\t\t * We have .length but not .byteLength when useFromArrayBuffer is false\n\t\t */\n\t\tif (result.length === data.byteLength) {\n\t\t\treturn result;\n\t\t}\n\t}\n\n\t/*\n\t * Uint8Array in engines where Buffer.from might not work with ArrayBuffer, just copy over\n\t * Doesn't make sense with other TypedArray instances\n\t */\n\tif (useUint8Array && data instanceof Uint8Array) {\n\t\treturn Buffer.from(data);\n\t}\n\n\tvar isArr = isArray(data);\n\tif (isArr) {\n\t\tfor (var i = 0; i < data.length; i += 1) {\n\t\t\tvar x = data[i];\n\t\t\tif (\n\t\t\t\ttypeof x !== 'number'\n\t\t\t\t|| x < 0\n\t\t\t\t|| x > 255\n\t\t\t\t|| ~~x !== x // NaN and integer check\n\t\t\t) {\n\t\t\t\tthrow new RangeError('Array items must be numbers in the range 0-255.');\n\t\t\t}\n\t\t}\n\t}\n\n\t/*\n\t * Old Buffer polyfill on an engine that doesn't have TypedArray support\n\t * Also, this is from a different Buffer polyfill implementation then we have, as instanceof check failed\n\t * Convert to our current Buffer implementation\n\t */\n\tif (\n\t\tisArr || (\n\t\t\tBuffer.isBuffer(data)\n\t\t\t&& data.constructor\n\t\t\t&& typeof data.constructor.isBuffer === 'function'\n\t\t\t&& data.constructor.isBuffer(data)\n\t\t)\n\t) {\n\t\treturn Buffer.from(data);\n\t}\n\n\tthrow new TypeError('The \"data\" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.');\n};\n","'use strict';\n\nvar Buffer = require('safe-buffer').Buffer;\nvar toBuffer = require('to-buffer');\n\n// prototype class for hash functions\nfunction Hash(blockSize, finalSize) {\n\tthis._block = Buffer.alloc(blockSize);\n\tthis._finalSize = finalSize;\n\tthis._blockSize = blockSize;\n\tthis._len = 0;\n}\n\nHash.prototype.update = function (data, enc) {\n\t/* eslint no-param-reassign: 0 */\n\tdata = toBuffer(data, enc || 'utf8');\n\n\tvar block = this._block;\n\tvar blockSize = this._blockSize;\n\tvar length = data.length;\n\tvar accum = this._len;\n\n\tfor (var offset = 0; offset < length;) {\n\t\tvar assigned = accum % blockSize;\n\t\tvar remainder = Math.min(length - offset, blockSize - assigned);\n\n\t\tfor (var i = 0; i < remainder; i++) {\n\t\t\tblock[assigned + i] = data[offset + i];\n\t\t}\n\n\t\taccum += remainder;\n\t\toffset += remainder;\n\n\t\tif ((accum % blockSize) === 0) {\n\t\t\tthis._update(block);\n\t\t}\n\t}\n\n\tthis._len += length;\n\treturn this;\n};\n\nHash.prototype.digest = function (enc) {\n\tvar rem = this._len % this._blockSize;\n\n\tthis._block[rem] = 0x80;\n\n\t/*\n\t * zero (rem + 1) trailing bits, where (rem + 1) is the smallest\n\t * non-negative solution to the equation (length + 1 + (rem + 1)) === finalSize mod blockSize\n\t */\n\tthis._block.fill(0, rem + 1);\n\n\tif (rem >= this._finalSize) {\n\t\tthis._update(this._block);\n\t\tthis._block.fill(0);\n\t}\n\n\tvar bits = this._len * 8;\n\n\t// uint32\n\tif (bits <= 0xffffffff) {\n\t\tthis._block.writeUInt32BE(bits, this._blockSize - 4);\n\n\t\t// uint64\n\t} else {\n\t\tvar lowBits = (bits & 0xffffffff) >>> 0;\n\t\tvar highBits = (bits - lowBits) / 0x100000000;\n\n\t\tthis._block.writeUInt32BE(highBits, this._blockSize - 8);\n\t\tthis._block.writeUInt32BE(lowBits, this._blockSize - 4);\n\t}\n\n\tthis._update(this._block);\n\tvar hash = this._hash();\n\n\treturn enc ? hash.toString(enc) : hash;\n};\n\nHash.prototype._update = function () {\n\tthrow new Error('_update must be implemented by subclass');\n};\n\nmodule.exports = Hash;\n","'use strict';\n\n/*\n * A JavaScript implementation of the Secure Hash Algorithm, SHA-1, as defined\n * in FIPS PUB 180-1\n * Version 2.1a Copyright Paul Johnston 2000 - 2002.\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for details.\n */\n\nvar inherits = require('inherits');\nvar Hash = require('./hash');\nvar Buffer = require('safe-buffer').Buffer;\n\nvar K = [\n\t0x5a827999, 0x6ed9eba1, 0x8f1bbcdc | 0, 0xca62c1d6 | 0\n];\n\nvar W = new Array(80);\n\nfunction Sha1() {\n\tthis.init();\n\tthis._w = W;\n\n\tHash.call(this, 64, 56);\n}\n\ninherits(Sha1, Hash);\n\nSha1.prototype.init = function () {\n\tthis._a = 0x67452301;\n\tthis._b = 0xefcdab89;\n\tthis._c = 0x98badcfe;\n\tthis._d = 0x10325476;\n\tthis._e = 0xc3d2e1f0;\n\n\treturn this;\n};\n\nfunction rotl1(num) {\n\treturn (num << 1) | (num >>> 31);\n}\n\nfunction rotl5(num) {\n\treturn (num << 5) | (num >>> 27);\n}\n\nfunction rotl30(num) {\n\treturn (num << 30) | (num >>> 2);\n}\n\nfunction ft(s, b, c, d) {\n\tif (s === 0) {\n\t\treturn (b & c) | (~b & d);\n\t}\n\tif (s === 2) {\n\t\treturn (b & c) | (b & d) | (c & d);\n\t}\n\treturn b ^ c ^ d;\n}\n\nSha1.prototype._update = function (M) {\n\tvar w = this._w;\n\n\tvar a = this._a | 0;\n\tvar b = this._b | 0;\n\tvar c = this._c | 0;\n\tvar d = this._d | 0;\n\tvar e = this._e | 0;\n\n\tfor (var i = 0; i < 16; ++i) {\n\t\tw[i] = M.readInt32BE(i * 4);\n\t}\n\tfor (; i < 80; ++i) {\n\t\tw[i] = rotl1(w[i - 3] ^ w[i - 8] ^ w[i - 14] ^ w[i - 16]);\n\t}\n\n\tfor (var j = 0; j < 80; ++j) {\n\t\tvar s = ~~(j / 20);\n\t\tvar t = (rotl5(a) + ft(s, b, c, d) + e + w[j] + K[s]) | 0;\n\n\t\te = d;\n\t\td = c;\n\t\tc = rotl30(b);\n\t\tb = a;\n\t\ta = t;\n\t}\n\n\tthis._a = (a + this._a) | 0;\n\tthis._b = (b + this._b) | 0;\n\tthis._c = (c + this._c) | 0;\n\tthis._d = (d + this._d) | 0;\n\tthis._e = (e + this._e) | 0;\n};\n\nSha1.prototype._hash = function () {\n\tvar H = Buffer.allocUnsafe(20);\n\n\tH.writeInt32BE(this._a | 0, 0);\n\tH.writeInt32BE(this._b | 0, 4);\n\tH.writeInt32BE(this._c | 0, 8);\n\tH.writeInt32BE(this._d | 0, 12);\n\tH.writeInt32BE(this._e | 0, 16);\n\n\treturn H;\n};\n\nmodule.exports = Sha1;\n","export function toHex(buffer) {\n  let hex = ''\n  for (const byte of new Uint8Array(buffer)) {\n    if (byte < 16) hex += '0'\n    hex += byte.toString(16)\n  }\n  return hex\n}\n","/* eslint-env node, browser */\nimport Hash from 'sha.js/sha1.js'\n\nimport { toHex } from './toHex.js'\n\nlet supportsSubtleSHA1 = null\n\nexport async function shasum(buffer) {\n  if (supportsSubtleSHA1 === null) {\n    supportsSubtleSHA1 = await testSubtleSHA1()\n  }\n  return supportsSubtleSHA1 ? subtleSHA1(buffer) : shasumSync(buffer)\n}\n\n// This is modeled after @dominictarr's \"shasum\" module,\n// but without the 'json-stable-stringify' dependency and\n// extra type-casting features.\nfunction shasumSync(buffer) {\n  return new Hash().update(buffer).digest('hex')\n}\n\nasync function subtleSHA1(buffer) {\n  const hash = await crypto.subtle.digest('SHA-1', buffer)\n  return toHex(hash)\n}\n\nasync function testSubtleSHA1() {\n  // I'm using a rather crude method of progressive enhancement, because\n  // some browsers that have crypto.subtle.digest don't actually implement SHA-1.\n  try {\n    const hash = await subtleSHA1(new Uint8Array([]))\n    if (hash === 'da39a3ee5e6b4b0d3255bfef95601890afd80709') return true\n  } catch (_) {\n    // no bother\n  }\n  return false\n}\n","import crc32 from 'crc-32'\n\nimport { InternalError } from '../errors/InternalError.js'\nimport { GitObject } from '../models/GitObject'\nimport { BufferCursor } from '../utils/BufferCursor.js'\nimport { applyDelta } from '../utils/applyDelta.js'\nimport { listpack } from '../utils/git-list-pack.js'\nimport { inflate } from '../utils/inflate.js'\nimport { shasum } from '../utils/shasum.js'\n\nfunction decodeVarInt(reader) {\n  const bytes = []\n  let byte = 0\n  let multibyte = 0\n  do {\n    byte = reader.readUInt8()\n    // We keep bits 6543210\n    const lastSeven = byte & 0b01111111\n    bytes.push(lastSeven)\n    // Whether the next byte is part of the variable-length encoded number\n    // is encoded in bit 7\n    multibyte = byte & 0b10000000\n  } while (multibyte)\n  // Now that all the bytes are in big-endian order,\n  // alternate shifting the bits left by 7 and OR-ing the next byte.\n  // And... do a weird increment-by-one thing that I don't quite understand.\n  return bytes.reduce((a, b) => ((a + 1) << 7) | b, -1)\n}\n\n// I'm pretty much copying this one from the git C source code,\n// because it makes no sense.\nfunction otherVarIntDecode(reader, startWith) {\n  let result = startWith\n  let shift = 4\n  let byte = null\n  do {\n    byte = reader.readUInt8()\n    result |= (byte & 0b01111111) << shift\n    shift += 7\n  } while (byte & 0b10000000)\n  return result\n}\n\nexport class GitPackIndex {\n  constructor(stuff) {\n    Object.assign(this, stuff)\n    this.offsetCache = {}\n  }\n\n  static async fromIdx({ idx, getExternalRefDelta }) {\n    const reader = new BufferCursor(idx)\n    const magic = reader.slice(4).toString('hex')\n    // Check for IDX v2 magic number\n    if (magic !== 'ff744f63') {\n      return // undefined\n    }\n    const version = reader.readUInt32BE()\n    if (version !== 2) {\n      throw new InternalError(\n        `Unable to read version ${version} packfile IDX. (Only version 2 supported)`\n      )\n    }\n    if (idx.byteLength > 2048 * 1024 * 1024) {\n      throw new InternalError(\n        `To keep implementation simple, I haven't implemented the layer 5 feature needed to support packfiles > 2GB in size.`\n      )\n    }\n    // Skip over fanout table\n    reader.seek(reader.tell() + 4 * 255)\n    // Get hashes\n    const size = reader.readUInt32BE()\n    const hashes = []\n    for (let i = 0; i < size; i++) {\n      const hash = reader.slice(20).toString('hex')\n      hashes[i] = hash\n    }\n    reader.seek(reader.tell() + 4 * size)\n    // Skip over CRCs\n    // Get offsets\n    const offsets = new Map()\n    for (let i = 0; i < size; i++) {\n      offsets.set(hashes[i], reader.readUInt32BE())\n    }\n    const packfileSha = reader.slice(20).toString('hex')\n    return new GitPackIndex({\n      hashes,\n      crcs: {},\n      offsets,\n      packfileSha,\n      getExternalRefDelta,\n    })\n  }\n\n  static async fromPack({ pack, getExternalRefDelta, onProgress }) {\n    const listpackTypes = {\n      1: 'commit',\n      2: 'tree',\n      3: 'blob',\n      4: 'tag',\n      6: 'ofs-delta',\n      7: 'ref-delta',\n    }\n    const offsetToObject = {}\n\n    // Older packfiles do NOT use the shasum of the pack itself,\n    // so it is recommended to just use whatever bytes are in the trailer.\n    // Source: https://github.com/git/git/commit/1190a1acf800acdcfd7569f87ac1560e2d077414\n    const packfileSha = pack.slice(-20).toString('hex')\n\n    const hashes = []\n    const crcs = {}\n    const offsets = new Map()\n    let totalObjectCount = null\n    let lastPercent = null\n\n    await listpack([pack], async ({ data, type, reference, offset, num }) => {\n      if (totalObjectCount === null) totalObjectCount = num\n      const percent = Math.floor(\n        ((totalObjectCount - num) * 100) / totalObjectCount\n      )\n      if (percent !== lastPercent) {\n        if (onProgress) {\n          await onProgress({\n            phase: 'Receiving objects',\n            loaded: totalObjectCount - num,\n            total: totalObjectCount,\n          })\n        }\n      }\n      lastPercent = percent\n      // Change type from a number to a meaningful string\n      type = listpackTypes[type]\n\n      if (['commit', 'tree', 'blob', 'tag'].includes(type)) {\n        offsetToObject[offset] = {\n          type,\n          offset,\n        }\n      } else if (type === 'ofs-delta') {\n        offsetToObject[offset] = {\n          type,\n          offset,\n        }\n      } else if (type === 'ref-delta') {\n        offsetToObject[offset] = {\n          type,\n          offset,\n        }\n      }\n    })\n\n    // We need to know the lengths of the slices to compute the CRCs.\n    const offsetArray = Object.keys(offsetToObject).map(Number)\n    for (const [i, start] of offsetArray.entries()) {\n      const end =\n        i + 1 === offsetArray.length ? pack.byteLength - 20 : offsetArray[i + 1]\n      const o = offsetToObject[start]\n      const crc = crc32.buf(pack.slice(start, end)) >>> 0\n      o.end = end\n      o.crc = crc\n    }\n\n    // We don't have the hashes yet. But we can generate them using the .readSlice function!\n    const p = new GitPackIndex({\n      pack: Promise.resolve(pack),\n      packfileSha,\n      crcs,\n      hashes,\n      offsets,\n      getExternalRefDelta,\n    })\n\n    // Resolve deltas and compute the oids\n    lastPercent = null\n    let count = 0\n    const objectsByDepth = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]\n    for (let offset in offsetToObject) {\n      offset = Number(offset)\n      const percent = Math.floor((count * 100) / totalObjectCount)\n      if (percent !== lastPercent) {\n        if (onProgress) {\n          await onProgress({\n            phase: 'Resolving deltas',\n            loaded: count,\n            total: totalObjectCount,\n          })\n        }\n      }\n      count++\n      lastPercent = percent\n\n      const o = offsetToObject[offset]\n      if (o.oid) continue\n      try {\n        p.readDepth = 0\n        p.externalReadDepth = 0\n        const { type, object } = await p.readSlice({ start: offset })\n        objectsByDepth[p.readDepth] += 1\n        const oid = await shasum(GitObject.wrap({ type, object }))\n        o.oid = oid\n        hashes.push(oid)\n        offsets.set(oid, offset)\n        crcs[oid] = o.crc\n      } catch (err) {\n        continue\n      }\n    }\n\n    hashes.sort()\n    return p\n  }\n\n  async toBuffer() {\n    const buffers = []\n    const write = (str, encoding) => {\n      buffers.push(Buffer.from(str, encoding))\n    }\n    // Write out IDX v2 magic number\n    write('ff744f63', 'hex')\n    // Write out version number 2\n    write('00000002', 'hex')\n    // Write fanout table\n    const fanoutBuffer = new BufferCursor(Buffer.alloc(256 * 4))\n    for (let i = 0; i < 256; i++) {\n      let count = 0\n      for (const hash of this.hashes) {\n        if (parseInt(hash.slice(0, 2), 16) <= i) count++\n      }\n      fanoutBuffer.writeUInt32BE(count)\n    }\n    buffers.push(fanoutBuffer.buffer)\n    // Write out hashes\n    for (const hash of this.hashes) {\n      write(hash, 'hex')\n    }\n    // Write out crcs\n    const crcsBuffer = new BufferCursor(Buffer.alloc(this.hashes.length * 4))\n    for (const hash of this.hashes) {\n      crcsBuffer.writeUInt32BE(this.crcs[hash])\n    }\n    buffers.push(crcsBuffer.buffer)\n    // Write out offsets\n    const offsetsBuffer = new BufferCursor(Buffer.alloc(this.hashes.length * 4))\n    for (const hash of this.hashes) {\n      offsetsBuffer.writeUInt32BE(this.offsets.get(hash))\n    }\n    buffers.push(offsetsBuffer.buffer)\n    // Write out packfile checksum\n    write(this.packfileSha, 'hex')\n    // Write out shasum\n    const totalBuffer = Buffer.concat(buffers)\n    const sha = await shasum(totalBuffer)\n    const shaBuffer = Buffer.alloc(20)\n    shaBuffer.write(sha, 'hex')\n    return Buffer.concat([totalBuffer, shaBuffer])\n  }\n\n  async load({ pack }) {\n    this.pack = pack\n  }\n\n  async unload() {\n    this.pack = null\n  }\n\n  async read({ oid }) {\n    if (!this.offsets.get(oid)) {\n      if (this.getExternalRefDelta) {\n        this.externalReadDepth++\n        return this.getExternalRefDelta(oid)\n      } else {\n        throw new InternalError(`Could not read object ${oid} from packfile`)\n      }\n    }\n    const start = this.offsets.get(oid)\n    return this.readSlice({ start })\n  }\n\n  async readSlice({ start }) {\n    if (this.offsetCache[start]) {\n      return Object.assign({}, this.offsetCache[start])\n    }\n    this.readDepth++\n    const types = {\n      0b0010000: 'commit',\n      0b0100000: 'tree',\n      0b0110000: 'blob',\n      0b1000000: 'tag',\n      0b1100000: 'ofs_delta',\n      0b1110000: 'ref_delta',\n    }\n    if (!this.pack) {\n      throw new InternalError(\n        'Tried to read from a GitPackIndex with no packfile loaded into memory'\n      )\n    }\n    const raw = (await this.pack).slice(start)\n    const reader = new BufferCursor(raw)\n    const byte = reader.readUInt8()\n    // Object type is encoded in bits 654\n    const btype = byte & 0b1110000\n    let type = types[btype]\n    if (type === undefined) {\n      throw new InternalError('Unrecognized type: 0b' + btype.toString(2))\n    }\n    // The length encoding get complicated.\n    // Last four bits of length is encoded in bits 3210\n    const lastFour = byte & 0b1111\n    let length = lastFour\n    // Whether the next byte is part of the variable-length encoded number\n    // is encoded in bit 7\n    const multibyte = byte & 0b10000000\n    if (multibyte) {\n      length = otherVarIntDecode(reader, lastFour)\n    }\n    let base = null\n    let object = null\n    // Handle deltified objects\n    if (type === 'ofs_delta') {\n      const offset = decodeVarInt(reader)\n      const baseOffset = start - offset\n      ;({ object: base, type } = await this.readSlice({ start: baseOffset }))\n    }\n    if (type === 'ref_delta') {\n      const oid = reader.slice(20).toString('hex')\n      ;({ object: base, type } = await this.read({ oid }))\n    }\n    // Handle undeltified objects\n    const buffer = raw.slice(reader.tell())\n    object = Buffer.from(await inflate(buffer))\n    // Assert that the object length is as expected.\n    if (object.byteLength !== length) {\n      throw new InternalError(\n        `Packfile told us object would have length ${length} but it had length ${object.byteLength}`\n      )\n    }\n    if (base) {\n      object = Buffer.from(applyDelta(object, base))\n    }\n    // Cache the result based on depth.\n    if (this.readDepth > 3) {\n      // hand tuned for speed / memory usage tradeoff\n      this.offsetCache[start] = { type, object }\n    }\n    return { type, format: 'content', object }\n  }\n}\n","import { BaseError } from './BaseError.js'\n\nexport class InvalidOidError extends BaseError {\n  /**\n   * @param {string} value\n   */\n  constructor(value) {\n    super(`Expected a 40-char hex object id but saw \"${value}\".`)\n    this.code = this.name = InvalidOidError.code\n    this.data = { value }\n  }\n}\n/** @type {'InvalidOidError'} */\nInvalidOidError.code = 'InvalidOidError'\n","import { BaseError } from './BaseError.js'\n\nexport class ObjectTypeError extends BaseError {\n  /**\n   * @param {string} oid\n   * @param {'blob'|'commit'|'tag'|'tree'} actual\n   * @param {'blob'|'commit'|'tag'|'tree'} expected\n   * @param {string} [filepath]\n   */\n  constructor(oid, actual, expected, filepath) {\n    super(\n      `Object ${oid} ${\n        filepath ? `at ${filepath}` : ''\n      }was anticipated to be a ${expected} but it is a ${actual}.`\n    )\n    this.code = this.name = ObjectTypeError.code\n    this.data = { oid, actual, expected, filepath }\n  }\n}\n/** @type {'ObjectTypeError'} */\nObjectTypeError.code = 'ObjectTypeError'\n","/**\n * From https://github.com/git/git/blob/master/Documentation/technical/index-format.txt\n *\n * 32-bit mode, split into (high to low bits)\n *\n *  4-bit object type\n *    valid values in binary are 1000 (regular file), 1010 (symbolic link)\n *    and 1110 (gitlink)\n *\n *  3-bit unused\n *\n *  9-bit unix permission. Only 0755 and 0644 are valid for regular files.\n *  Symbolic links and gitlinks have value 0 in this field.\n */\nexport function normalizeMode(mode) {\n  // Note: BrowserFS will use -1 for \"unknown\"\n  // I need to make it non-negative for these bitshifts to work.\n  let type = mode > 0 ? mode >> 12 : 0\n  // If it isn't valid, assume it as a \"regular file\"\n  // 0100 = directory\n  // 1000 = regular file\n  // 1010 = symlink\n  // 1110 = gitlink\n  if (\n    type !== 0b0100 &&\n    type !== 0b1000 &&\n    type !== 0b1010 &&\n    type !== 0b1110\n  ) {\n    type = 0b1000\n  }\n  let permissions = mode & 0o777\n  // Is the file executable? then 755. Else 644.\n  if (permissions & 0b001001001) {\n    permissions = 0o755\n  } else {\n    permissions = 0o644\n  }\n  // If it's not a regular file, scrub all permissions\n  if (type !== 0b1000) permissions = 0\n  return (type << 12) + permissions\n}\n","import { normalizeMode } from './normalizeMode'\n\nconst MAX_UINT32 = 2 ** 32\n\nfunction SecondsNanoseconds(\n  givenSeconds,\n  givenNanoseconds,\n  milliseconds,\n  date\n) {\n  if (givenSeconds !== undefined && givenNanoseconds !== undefined) {\n    return [givenSeconds, givenNanoseconds]\n  }\n  if (milliseconds === undefined) {\n    milliseconds = date.valueOf()\n  }\n  const seconds = Math.floor(milliseconds / 1000)\n  const nanoseconds = (milliseconds - seconds * 1000) * 1000000\n  return [seconds, nanoseconds]\n}\n\nexport function normalizeStats(e) {\n  const [ctimeSeconds, ctimeNanoseconds] = SecondsNanoseconds(\n    e.ctimeSeconds,\n    e.ctimeNanoseconds,\n    e.ctimeMs,\n    e.ctime\n  )\n  const [mtimeSeconds, mtimeNanoseconds] = SecondsNanoseconds(\n    e.mtimeSeconds,\n    e.mtimeNanoseconds,\n    e.mtimeMs,\n    e.mtime\n  )\n\n  return {\n    ctimeSeconds: ctimeSeconds % MAX_UINT32,\n    ctimeNanoseconds: ctimeNanoseconds % MAX_UINT32,\n    mtimeSeconds: mtimeSeconds % MAX_UINT32,\n    mtimeNanoseconds: mtimeNanoseconds % MAX_UINT32,\n    dev: e.dev % MAX_UINT32,\n    ino: e.ino % MAX_UINT32,\n    mode: normalizeMode(e.mode % MAX_UINT32),\n    uid: e.uid % MAX_UINT32,\n    gid: e.gid % MAX_UINT32,\n    // size of -1 happens over a BrowserFS HTTP Backend that doesn't serve Content-Length headers\n    // (like the Karma webserver) because BrowserFS HTTP Backend uses HTTP HEAD requests to do fs.stat\n    size: e.size > -1 ? e.size % MAX_UINT32 : 0,\n  }\n}\n","import { InternalError } from '../errors/InternalError.js'\nimport { UnsafeFilepathError } from '../errors/UnsafeFilepathError.js'\nimport { BufferCursor } from '../utils/BufferCursor.js'\nimport { comparePath } from '../utils/comparePath.js'\nimport { normalizeStats } from '../utils/normalizeStats.js'\nimport { shasum } from '../utils/shasum.js'\n\n// Extract 1-bit assume-valid, 1-bit extended flag, 2-bit merge state flag, 12-bit path length flag\nfunction parseCacheEntryFlags(bits) {\n  return {\n    assumeValid: Boolean(bits & 0b1000000000000000),\n    extended: Boolean(bits & 0b0100000000000000),\n    stage: (bits & 0b0011000000000000) >> 12,\n    nameLength: bits & 0b0000111111111111,\n  }\n}\n\nfunction renderCacheEntryFlags(entry) {\n  const flags = entry.flags\n  // 1-bit extended flag (must be zero in version 2)\n  flags.extended = false\n  // 12-bit name length if the length is less than 0xFFF; otherwise 0xFFF\n  // is stored in this field.\n  flags.nameLength = Math.min(Buffer.from(entry.path).length, 0xfff)\n  return (\n    (flags.assumeValid ? 0b1000000000000000 : 0) +\n    (flags.extended ? 0b0100000000000000 : 0) +\n    ((flags.stage & 0b11) << 12) +\n    (flags.nameLength & 0b111111111111)\n  )\n}\n\nexport class GitIndex {\n  /*::\n   _entries: Map<string, CacheEntry>\n   _dirty: boolean // Used to determine if index needs to be saved to filesystem\n   */\n  constructor(entries, unmergedPaths) {\n    this._dirty = false\n    this._unmergedPaths = unmergedPaths || new Set()\n    this._entries = entries || new Map()\n  }\n\n  _addEntry(entry) {\n    if (entry.flags.stage === 0) {\n      entry.stages = [entry]\n      this._entries.set(entry.path, entry)\n      this._unmergedPaths.delete(entry.path)\n    } else {\n      let existingEntry = this._entries.get(entry.path)\n      if (!existingEntry) {\n        this._entries.set(entry.path, entry)\n        existingEntry = entry\n      }\n      existingEntry.stages[entry.flags.stage] = entry\n      this._unmergedPaths.add(entry.path)\n    }\n  }\n\n  static async from(buffer) {\n    if (Buffer.isBuffer(buffer)) {\n      return GitIndex.fromBuffer(buffer)\n    } else if (buffer === null) {\n      return new GitIndex(null)\n    } else {\n      throw new InternalError('invalid type passed to GitIndex.from')\n    }\n  }\n\n  static async fromBuffer(buffer) {\n    if (buffer.length === 0) {\n      throw new InternalError('Index file is empty (.git/index)')\n    }\n\n    const index = new GitIndex()\n    const reader = new BufferCursor(buffer)\n    const magic = reader.toString('utf8', 4)\n    if (magic !== 'DIRC') {\n      throw new InternalError(`Invalid dircache magic file number: ${magic}`)\n    }\n\n    // Verify shasum after we ensured that the file has a magic number\n    const shaComputed = await shasum(buffer.slice(0, -20))\n    const shaClaimed = buffer.slice(-20).toString('hex')\n    if (shaClaimed !== shaComputed) {\n      throw new InternalError(\n        `Invalid checksum in GitIndex buffer: expected ${shaClaimed} but saw ${shaComputed}`\n      )\n    }\n\n    const version = reader.readUInt32BE()\n    if (version !== 2) {\n      throw new InternalError(`Unsupported dircache version: ${version}`)\n    }\n    const numEntries = reader.readUInt32BE()\n    let i = 0\n    while (!reader.eof() && i < numEntries) {\n      const entry = {}\n      entry.ctimeSeconds = reader.readUInt32BE()\n      entry.ctimeNanoseconds = reader.readUInt32BE()\n      entry.mtimeSeconds = reader.readUInt32BE()\n      entry.mtimeNanoseconds = reader.readUInt32BE()\n      entry.dev = reader.readUInt32BE()\n      entry.ino = reader.readUInt32BE()\n      entry.mode = reader.readUInt32BE()\n      entry.uid = reader.readUInt32BE()\n      entry.gid = reader.readUInt32BE()\n      entry.size = reader.readUInt32BE()\n      entry.oid = reader.slice(20).toString('hex')\n      const flags = reader.readUInt16BE()\n      entry.flags = parseCacheEntryFlags(flags)\n      // TODO: handle if (version === 3 && entry.flags.extended)\n      const pathlength = buffer.indexOf(0, reader.tell() + 1) - reader.tell()\n      if (pathlength < 1) {\n        throw new InternalError(`Got a path length of: ${pathlength}`)\n      }\n      // TODO: handle pathnames larger than 12 bits\n      entry.path = reader.toString('utf8', pathlength)\n\n      // Prevent malicious paths like \"..\\foo\"\n      if (entry.path.includes('..\\\\') || entry.path.includes('../')) {\n        throw new UnsafeFilepathError(entry.path)\n      }\n\n      // The next bit is awkward. We expect 1 to 8 null characters\n      // such that the total size of the entry is a multiple of 8 bits.\n      // (Hence subtract 12 bytes for the header.)\n      let padding = 8 - ((reader.tell() - 12) % 8)\n      if (padding === 0) padding = 8\n      while (padding--) {\n        const tmp = reader.readUInt8()\n        if (tmp !== 0) {\n          throw new InternalError(\n            `Expected 1-8 null characters but got '${tmp}' after ${entry.path}`\n          )\n        } else if (reader.eof()) {\n          throw new InternalError('Unexpected end of file')\n        }\n      }\n      // end of awkward part\n      entry.stages = []\n\n      index._addEntry(entry)\n\n      i++\n    }\n    return index\n  }\n\n  get unmergedPaths() {\n    return [...this._unmergedPaths]\n  }\n\n  get entries() {\n    return [...this._entries.values()].sort(comparePath)\n  }\n\n  get entriesMap() {\n    return this._entries\n  }\n\n  get entriesFlat() {\n    return [...this.entries].flatMap(entry => {\n      return entry.stages.length > 1 ? entry.stages.filter(x => x) : entry\n    })\n  }\n\n  *[Symbol.iterator]() {\n    for (const entry of this.entries) {\n      yield entry\n    }\n  }\n\n  insert({ filepath, stats, oid, stage = 0 }) {\n    if (!stats) {\n      stats = {\n        ctimeSeconds: 0,\n        ctimeNanoseconds: 0,\n        mtimeSeconds: 0,\n        mtimeNanoseconds: 0,\n        dev: 0,\n        ino: 0,\n        mode: 0,\n        uid: 0,\n        gid: 0,\n        size: 0,\n      }\n    }\n    stats = normalizeStats(stats)\n    const bfilepath = Buffer.from(filepath)\n    const entry = {\n      ctimeSeconds: stats.ctimeSeconds,\n      ctimeNanoseconds: stats.ctimeNanoseconds,\n      mtimeSeconds: stats.mtimeSeconds,\n      mtimeNanoseconds: stats.mtimeNanoseconds,\n      dev: stats.dev,\n      ino: stats.ino,\n      // We provide a fallback value for `mode` here because not all fs\n      // implementations assign it, but we use it in GitTree.\n      // '100644' is for a \"regular non-executable file\"\n      mode: stats.mode || 0o100644,\n      uid: stats.uid,\n      gid: stats.gid,\n      size: stats.size,\n      path: filepath,\n      oid: oid,\n      flags: {\n        assumeValid: false,\n        extended: false,\n        stage,\n        nameLength: bfilepath.length < 0xfff ? bfilepath.length : 0xfff,\n      },\n      stages: [],\n    }\n\n    this._addEntry(entry)\n\n    this._dirty = true\n  }\n\n  delete({ filepath }) {\n    if (this._entries.has(filepath)) {\n      this._entries.delete(filepath)\n    } else {\n      for (const key of this._entries.keys()) {\n        if (key.startsWith(filepath + '/')) {\n          this._entries.delete(key)\n        }\n      }\n    }\n\n    if (this._unmergedPaths.has(filepath)) {\n      this._unmergedPaths.delete(filepath)\n    }\n    this._dirty = true\n  }\n\n  clear() {\n    this._entries.clear()\n    this._dirty = true\n  }\n\n  has({ filepath }) {\n    return this._entries.has(filepath)\n  }\n\n  render() {\n    return this.entries\n      .map(entry => `${entry.mode.toString(8)} ${entry.oid}    ${entry.path}`)\n      .join('\\n')\n  }\n\n  static async _entryToBuffer(entry) {\n    const bpath = Buffer.from(entry.path)\n    // the fixed length + the filename + at least one null char => align by 8\n    const length = Math.ceil((62 + bpath.length + 1) / 8) * 8\n    const written = Buffer.alloc(length)\n    const writer = new BufferCursor(written)\n    const stat = normalizeStats(entry)\n    writer.writeUInt32BE(stat.ctimeSeconds)\n    writer.writeUInt32BE(stat.ctimeNanoseconds)\n    writer.writeUInt32BE(stat.mtimeSeconds)\n    writer.writeUInt32BE(stat.mtimeNanoseconds)\n    writer.writeUInt32BE(stat.dev)\n    writer.writeUInt32BE(stat.ino)\n    writer.writeUInt32BE(stat.mode)\n    writer.writeUInt32BE(stat.uid)\n    writer.writeUInt32BE(stat.gid)\n    writer.writeUInt32BE(stat.size)\n    writer.write(entry.oid, 20, 'hex')\n    writer.writeUInt16BE(renderCacheEntryFlags(entry))\n    writer.write(entry.path, bpath.length, 'utf8')\n    return written\n  }\n\n  async toObject() {\n    const header = Buffer.alloc(12)\n    const writer = new BufferCursor(header)\n    writer.write('DIRC', 4, 'utf8')\n    writer.writeUInt32BE(2)\n    writer.writeUInt32BE(this.entriesFlat.length)\n\n    let entryBuffers = []\n    for (const entry of this.entries) {\n      entryBuffers.push(GitIndex._entryToBuffer(entry))\n      if (entry.stages.length > 1) {\n        for (const stage of entry.stages) {\n          if (stage && stage !== entry) {\n            entryBuffers.push(GitIndex._entryToBuffer(stage))\n          }\n        }\n      }\n    }\n    entryBuffers = await Promise.all(entryBuffers)\n\n    const body = Buffer.concat(entryBuffers)\n    const main = Buffer.concat([header, body])\n    const sum = await shasum(main)\n    return Buffer.concat([main, Buffer.from(sum, 'hex')])\n  }\n}\n","import { getIterator } from './getIterator.js'\n\n// Currently 'for await' upsets my linters.\nexport async function forAwait(iterable, cb) {\n  const iter = getIterator(iterable)\n  while (true) {\n    const { value, done } = await iter.next()\n    if (value) await cb(value)\n    if (done) break\n  }\n  if (iter.return) iter.return()\n}\n","import { forAwait } from './forAwait.js'\n\nexport async function collect(iterable) {\n  let size = 0\n  const buffers = []\n  // This will be easier once `for await ... of` loops are available.\n  await forAwait(iterable, value => {\n    buffers.push(value)\n    size += value.byteLength\n  })\n  const result = new Uint8Array(size)\n  let nextIndex = 0\n  for (const buffer of buffers) {\n    result.set(buffer, nextIndex)\n    nextIndex += buffer.byteLength\n  }\n  return result\n}\n","export class FIFO {\n  constructor() {\n    this._queue = []\n  }\n\n  write(chunk) {\n    if (this._ended) {\n      throw Error('You cannot write to a FIFO that has already been ended!')\n    }\n    if (this._waiting) {\n      const resolve = this._waiting\n      this._waiting = null\n      resolve({ value: chunk })\n    } else {\n      this._queue.push(chunk)\n    }\n  }\n\n  end() {\n    this._ended = true\n    if (this._waiting) {\n      const resolve = this._waiting\n      this._waiting = null\n      resolve({ done: true })\n    }\n  }\n\n  destroy(err) {\n    this.error = err\n    this.end()\n  }\n\n  async next() {\n    if (this._queue.length > 0) {\n      return { value: this._queue.shift() }\n    }\n    if (this._ended) {\n      return { done: true }\n    }\n    if (this._waiting) {\n      throw Error(\n        'You cannot call read until the previous call to read has returned!'\n      )\n    }\n    return new Promise(resolve => {\n      this._waiting = resolve\n    })\n  }\n}\n","/*\nIf 'side-band' or 'side-band-64k' capabilities have been specified by\nthe client, the server will send the packfile data multiplexed.\n\nEach packet starting with the packet-line length of the amount of data\nthat follows, followed by a single byte specifying the sideband the\nfollowing data is coming in on.\n\nIn 'side-band' mode, it will send up to 999 data bytes plus 1 control\ncode, for a total of up to 1000 bytes in a pkt-line.  In 'side-band-64k'\nmode it will send up to 65519 data bytes plus 1 control code, for a\ntotal of up to 65520 bytes in a pkt-line.\n\nThe sideband byte will be a '1', '2' or a '3'. Sideband '1' will contain\npackfile data, sideband '2' will be used for progress information that the\nclient will generally print to stderr and sideband '3' is used for error\ninformation.\n\nIf no 'side-band' capability was specified, the server will stream the\nentire packfile without multiplexing.\n*/\nimport { FIFO } from '../utils/FIFO.js'\n\nimport { GitPktLine } from './GitPktLine.js'\n\nexport class GitSideBand {\n  static demux(input) {\n    const read = GitPktLine.streamReader(input)\n    // And now for the ridiculous side-band or side-band-64k protocol\n    const packetlines = new FIFO()\n    const packfile = new FIFO()\n    const progress = new FIFO()\n    // TODO: Use a proper through stream?\n    const nextBit = async function() {\n      const line = await read()\n      // Skip over flush packets\n      if (line === null) return nextBit()\n      // A made up convention to signal there's no more to read.\n      if (line === true) {\n        packetlines.end()\n        progress.end()\n        input.error ? packfile.destroy(input.error) : packfile.end()\n        return\n      }\n      // Examine first byte to determine which output \"stream\" to use\n      switch (line[0]) {\n        case 1: {\n          // pack data\n          packfile.write(line.slice(1))\n          break\n        }\n        case 2: {\n          // progress message\n          progress.write(line.slice(1))\n          break\n        }\n        case 3: {\n          // fatal error message just before stream aborts\n          const error = line.slice(1)\n          progress.write(error)\n          packetlines.end()\n          progress.end()\n          packfile.destroy(new Error(error.toString('utf8')))\n          return\n        }\n        default: {\n          // Not part of the side-band-64k protocol\n          packetlines.write(line)\n        }\n      }\n      // Careful not to blow up the stack.\n      // I think Promises in a tail-call position should be OK.\n      nextBit()\n    }\n    nextBit()\n    return {\n      packetlines,\n      packfile,\n      progress,\n    }\n  }\n  // static mux ({\n  //   protocol, // 'side-band' or 'side-band-64k'\n  //   packetlines,\n  //   packfile,\n  //   progress,\n  //   error\n  // }) {\n  //   const MAX_PACKET_LENGTH = protocol === 'side-band-64k' ? 999 : 65519\n  //   let output = new PassThrough()\n  //   packetlines.on('data', data => {\n  //     if (data === null) {\n  //       output.write(GitPktLine.flush())\n  //     } else {\n  //       output.write(GitPktLine.encode(data))\n  //     }\n  //   })\n  //   let packfileWasEmpty = true\n  //   let packfileEnded = false\n  //   let progressEnded = false\n  //   let errorEnded = false\n  //   let goodbye = Buffer.concat([\n  //     GitPktLine.encode(Buffer.from('010A', 'hex')),\n  //     GitPktLine.flush()\n  //   ])\n  //   packfile\n  //     .on('data', data => {\n  //       packfileWasEmpty = false\n  //       const buffers = splitBuffer(data, MAX_PACKET_LENGTH)\n  //       for (const buffer of buffers) {\n  //         output.write(\n  //           GitPktLine.encode(Buffer.concat([Buffer.from('01', 'hex'), buffer]))\n  //         )\n  //       }\n  //     })\n  //     .on('end', () => {\n  //       packfileEnded = true\n  //       if (!packfileWasEmpty) output.write(goodbye)\n  //       if (progressEnded && errorEnded) output.end()\n  //     })\n  //   progress\n  //     .on('data', data => {\n  //       const buffers = splitBuffer(data, MAX_PACKET_LENGTH)\n  //       for (const buffer of buffers) {\n  //         output.write(\n  //           GitPktLine.encode(Buffer.concat([Buffer.from('02', 'hex'), buffer]))\n  //         )\n  //       }\n  //     })\n  //     .on('end', () => {\n  //       progressEnded = true\n  //       if (packfileEnded && errorEnded) output.end()\n  //     })\n  //   error\n  //     .on('data', data => {\n  //       const buffers = splitBuffer(data, MAX_PACKET_LENGTH)\n  //       for (const buffer of buffers) {\n  //         output.write(\n  //           GitPktLine.encode(Buffer.concat([Buffer.from('03', 'hex'), buffer]))\n  //         )\n  //       }\n  //     })\n  //     .on('end', () => {\n  //       errorEnded = true\n  //       if (progressEnded && packfileEnded) output.end()\n  //     })\n  //   return output\n  // }\n}\n","import { InvalidOidError } from '../errors/InvalidOidError.js'\nimport { GitSideBand } from '../models/GitSideBand.js'\nimport { forAwait } from '../utils/forAwait.js'\n\nexport async function parseUploadPackResponse(stream) {\n  const { packetlines, packfile, progress } = GitSideBand.demux(stream)\n  const shallows = []\n  const unshallows = []\n  const acks = []\n  let nak = false\n  let done = false\n  return new Promise((resolve, reject) => {\n    // Parse the response\n    forAwait(packetlines, data => {\n      const line = data.toString('utf8').trim()\n      if (line.startsWith('shallow')) {\n        const oid = line.slice(-41).trim()\n        if (oid.length !== 40) {\n          reject(new InvalidOidError(oid))\n        }\n        shallows.push(oid)\n      } else if (line.startsWith('unshallow')) {\n        const oid = line.slice(-41).trim()\n        if (oid.length !== 40) {\n          reject(new InvalidOidError(oid))\n        }\n        unshallows.push(oid)\n      } else if (line.startsWith('ACK')) {\n        const [, oid, status] = line.split(' ')\n        acks.push({ oid, status })\n        if (!status) done = true\n      } else if (line.startsWith('NAK')) {\n        nak = true\n        done = true\n      } else {\n        done = true\n        nak = true\n      }\n      if (done) {\n        stream.error\n          ? reject(stream.error)\n          : resolve({ shallows, unshallows, acks, nak, packfile, progress })\n      }\n    }).finally(() => {\n      if (!done) {\n        stream.error\n          ? reject(stream.error)\n          : resolve({ shallows, unshallows, acks, nak, packfile, progress })\n      }\n    })\n  })\n}\n","/* eslint-disable comment-length/limit-multi-line-comments */\n\n/*\n * Import internal data parsers and structures from isomorphic-git. These\n * exports are not available in the npm version of isomorphic-git, which is why\n * we use one from the git repository.\n *\n * This file heavily relies on isomorphic-git internals to parse Git data formats\n * such as PACK, trees, deltas, etc.\n */\nimport './isomorphic-git.d.ts';\nimport { GitPktLine } from 'isomorphic-git/src/models/GitPktLine.js';\nimport { GitTree } from 'isomorphic-git/src/models/GitTree.js';\nimport { GitAnnotatedTag } from 'isomorphic-git/src/models/GitAnnotatedTag.js';\nimport { GitCommit } from 'isomorphic-git/src/models/GitCommit.js';\nimport { GitPackIndex } from 'isomorphic-git/src/models/GitPackIndex.js';\nimport { collect } from 'isomorphic-git/src/internal-apis.js';\nimport { parseUploadPackResponse } from 'isomorphic-git/src/wire/parseUploadPackResponse.js';\nimport { ObjectTypeError } from 'isomorphic-git/src/errors/ObjectTypeError.js';\nimport { Buffer as BufferPolyfill } from 'buffer';\n\n/**\n * Polyfills the Buffer class in the browser.\n *\n * We need it because isomorphic-git uses Buffer internally. The isomorphic-git version\n * released via npm shipes a Buffer implementation, but we're using a version cloned from\n * the git repository which assumes a global Buffer is available.\n */\nif (typeof globalThis.Buffer === 'undefined') {\n\tglobalThis.Buffer = BufferPolyfill;\n}\n\n/**\n * Custom error class for git authentication failures.\n */\nexport class GitAuthenticationError extends Error {\n\tpublic repoUrl: string;\n\tpublic status: number;\n\n\tconstructor(repoUrl: string, status: number) {\n\t\tsuper(\n\t\t\t`Authentication required to access private repository: ${repoUrl}`\n\t\t);\n\t\tthis.name = 'GitAuthenticationError';\n\t\tthis.repoUrl = repoUrl;\n\t\tthis.status = status;\n\t}\n}\n\nexport type GitAdditionalHeaders = Record<string, string>;\n\n/**\n * Downloads specific files from a git repository.\n * It uses the git protocol over HTTP to fetch the files. It only uses\n * three HTTP requests regardless of the number of paths requested.\n *\n * @param repoUrl The URL of the git repository.\n * @param fullyQualifiedBranchName The full name of the branch to fetch from (e.g., 'refs/heads/main').\n * @param filesPaths An array of all the file paths to fetch from the repository. Does **not** accept\n *                   patterns, wildcards, directory paths. All files must be explicitly listed.\n * @returns The requested files and packfiles required to recreate the Git objects locally.\n */\nexport type SparseCheckoutPackfile = {\n\tname: string;\n\tpack: Uint8Array;\n\tindex: Uint8Array;\n\tpromisor?: boolean;\n};\n\nexport type SparseCheckoutObject = {\n\toid: string;\n\ttype: 'blob' | 'tree' | 'commit' | 'tag';\n\tbody: Uint8Array;\n};\n\nexport type SparseCheckoutResult = {\n\tfiles: Record<string, any>;\n\tpackfiles?: SparseCheckoutPackfile[];\n\tobjects?: SparseCheckoutObject[];\n\tfileOids?: Record<string, string>;\n};\n\nexport async function sparseCheckout(\n\trepoUrl: string,\n\tcommitHash: string,\n\tfilesPaths: string[],\n\toptions?: {\n\t\twithObjects?: boolean;\n\t\tadditionalHeaders?: GitAdditionalHeaders;\n\t}\n): Promise<SparseCheckoutResult> {\n\tconst additionalHeaders = options?.additionalHeaders || {};\n\tconst treesPack = await fetchWithoutBlobs(\n\t\trepoUrl,\n\t\tcommitHash,\n\t\tadditionalHeaders\n\t);\n\tconst objects = await resolveObjects(treesPack.idx, commitHash, filesPaths);\n\n\tconst blobOids = filesPaths.map((path) => objects[path].oid);\n\tconst blobsPack =\n\t\tblobOids.length > 0\n\t\t\t? await fetchObjects(repoUrl, blobOids, additionalHeaders)\n\t\t\t: null;\n\n\tconst fetchedPaths: Record<string, any> = {};\n\tawait Promise.all(\n\t\tfilesPaths.map(async (path) => {\n\t\t\tif (!blobsPack) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tfetchedPaths[path] = await extractGitObjectFromIdx(\n\t\t\t\tblobsPack.idx,\n\t\t\t\tobjects[path].oid\n\t\t\t);\n\t\t})\n\t);\n\n\t/**\n\t * Short-circuit if the consumer doesn't need additional details about\n\t * the Git objects.\n\t */\n\tif (!options?.withObjects) {\n\t\treturn { files: fetchedPaths };\n\t}\n\n\tconst packfiles: SparseCheckoutPackfile[] = [];\n\tconst treesIndex = await treesPack.idx.toBuffer();\n\tpackfiles.push({\n\t\tname: `pack-${treesPack.idx.packfileSha}`,\n\t\tpack: treesPack.packfile,\n\t\tindex: toUint8Array(treesIndex),\n\t\tpromisor: treesPack.promisor,\n\t});\n\n\tif (blobsPack) {\n\t\tconst blobsIndex = await blobsPack.idx.toBuffer();\n\t\tpackfiles.push({\n\t\t\tname: `pack-${blobsPack.idx.packfileSha}`,\n\t\t\tpack: blobsPack.packfile,\n\t\t\tindex: toUint8Array(blobsIndex),\n\t\t\tpromisor: blobsPack.promisor,\n\t\t});\n\t}\n\n\tconst fileOids: Record<string, string> = {};\n\tfor (const path of filesPaths) {\n\t\tfileOids[path] = objects[path].oid;\n\t}\n\n\treturn {\n\t\tfiles: fetchedPaths,\n\t\tpackfiles,\n\t\tobjects: [\n\t\t\t...(await collectLooseObjects(treesPack)),\n\t\t\t...(await collectLooseObjects(blobsPack)),\n\t\t],\n\t\tfileOids,\n\t};\n}\n\nexport type GitFileTreeFile = {\n\tname: string;\n\ttype: 'file';\n};\nexport type GitFileTreeFolder = {\n\tname: string;\n\ttype: 'folder';\n\tchildren: GitFileTree[];\n};\nexport type GitFileTree = GitFileTreeFile | GitFileTreeFolder;\n\n/**\n * A Git ref in a human-readable format. Could be a single string,\n * e.g. 'main', 'v0.1.28', '1234567890abcdef1234567890abcdef12345678',\n * could be a string and an explicit type, e.g. { value: 'main', type: 'branch' },\n */\nexport type GitRef = {\n\tvalue: string;\n\ttype?: 'branch' | 'commit' | 'refname' | 'tag' | 'infer';\n};\n\n/**\n * A Git ref in a machine-friendly format.\n * Contains all the information needed to resolve the ref to its oid,\n * and, optionally, the oid itself.\n */\ntype ParsedGitRef = {\n\tkind: 'refname' | 'commit';\n\trefname: string;\n\tresolvedOid?: string;\n};\n\nconst FULL_SHA_REGEX = /^[0-9a-f]{40}$/i;\n\n/**\n * Lists all files in a git repository.\n *\n * See https://git-scm.com/book/en/v2/Git-Internals-Git-Objects for more information.\n *\n * @param repoUrl The URL of the git repository.\n * @param commitHash The commit hash to fetch from.\n * @returns A list of all files in the repository.\n */\nexport async function listGitFiles(\n\trepoUrl: string,\n\tcommitHash: string,\n\tadditionalHeaders: GitAdditionalHeaders = {}\n): Promise<GitFileTree[]> {\n\tconst treesPack = await fetchWithoutBlobs(\n\t\trepoUrl,\n\t\tcommitHash,\n\t\tadditionalHeaders\n\t);\n\tconst rootTree = await resolveAllObjects(treesPack.idx, commitHash);\n\tif (!rootTree?.object) {\n\t\treturn [];\n\t}\n\n\treturn gitTreeToFileTree(rootTree);\n}\n\n/**\n * Resolves a ref description, e.g. a branch name, to a commit hash.\n *\n * @param repoUrl The URL of the git repository.\n * @param ref The branch name or commit hash.\n * @returns The commit hash.\n */\nexport async function resolveCommitHash(\n\trepoUrl: string,\n\tref: GitRef,\n\tadditionalHeaders: GitAdditionalHeaders = {}\n) {\n\tconst parsed = await parseGitRef(repoUrl, ref);\n\tif (parsed.resolvedOid) {\n\t\treturn parsed.resolvedOid;\n\t}\n\n\tconst oid = await fetchRefOid(repoUrl, parsed.refname, additionalHeaders);\n\tif (!oid) {\n\t\tthrow new Error(`Git ref \"${parsed.refname}\" not found at ${repoUrl}`);\n\t}\n\treturn oid;\n}\n\nfunction gitTreeToFileTree(tree: GitTree): GitFileTree[] {\n\treturn tree.object\n\t\t.map((branch) => {\n\t\t\tif (branch.type === 'blob') {\n\t\t\t\treturn {\n\t\t\t\t\tname: branch.path,\n\t\t\t\t\ttype: 'file',\n\t\t\t\t} as GitFileTreeFile;\n\t\t\t} else if (branch.type === 'tree' && branch.object) {\n\t\t\t\treturn {\n\t\t\t\t\tname: branch.path,\n\t\t\t\t\ttype: 'folder',\n\t\t\t\t\tchildren: gitTreeToFileTree(branch as any as GitTree),\n\t\t\t\t} as GitFileTreeFolder;\n\t\t\t}\n\t\t\treturn undefined;\n\t\t})\n\t\t.filter((entry) => !!entry?.name) as GitFileTree[];\n}\n\n/**\n * Retrieves a list of refs from a git repository.\n *\n * See https://git-scm.com/book/en/v2/Git-Internals-Git-References for more information.\n *\n * @param repoUrl The URL of the git repository. For example: https://github.com/WordPress/gutenberg.git\n * @param fullyQualifiedBranchPrefix The prefix of the refs to fetch. For example: refs/heads/my-feature-branch\n * @returns A map of refs to their corresponding commit hashes.\n */\nexport async function listGitRefs(\n\trepoUrl: string,\n\tfullyQualifiedBranchPrefix: string,\n\tadditionalHeaders: GitAdditionalHeaders = {}\n) {\n\tconst packbuffer = Buffer.from(\n\t\t(await collect([\n\t\t\tGitPktLine.encode(`command=ls-refs\\n`),\n\t\t\tGitPktLine.encode(`agent=git/2.37.3\\n`),\n\t\t\tGitPktLine.encode(`object-format=sha1\\n`),\n\t\t\tGitPktLine.delim(),\n\t\t\tGitPktLine.encode(`peel\\n`),\n\t\t\tGitPktLine.encode(`ref-prefix ${fullyQualifiedBranchPrefix}\\n`),\n\t\t\tGitPktLine.flush(),\n\t\t])) as any\n\t);\n\n\tconst response = await fetch(repoUrl + '/git-upload-pack', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/x-git-upload-pack-advertisement',\n\t\t\t'content-type': 'application/x-git-upload-pack-request',\n\t\t\t'Content-Length': `${packbuffer.length}`,\n\t\t\t'Git-Protocol': 'version=2',\n\t\t\t...additionalHeaders,\n\t\t},\n\t\tbody: packbuffer as any,\n\t});\n\n\tif (!response.ok) {\n\t\tif (response.status === 401 || response.status === 403) {\n\t\t\tthrow new GitAuthenticationError(repoUrl, response.status);\n\t\t}\n\t\tthrow new Error(\n\t\t\t`Failed to fetch git refs from ${repoUrl}: ${response.status} ${response.statusText}`\n\t\t);\n\t}\n\n\tconst refs: Record<string, string> = {};\n\tfor await (const line of parseGitResponseLines(response)) {\n\t\tconst spaceAt = line.indexOf(' ');\n\t\tconst ref = line.slice(0, spaceAt);\n\t\t/**\n\t\t * Git protocol may return a line such as:\n\t\t *\n\t\t * 41d27ca5d6df1e7826c7fa297398159857ea2d60 refs/tags/v0.1.28 peeled:883860eacc7c37377f772a26919e700749020e4c\n\t\t *\n\t\t * This means:\n\t\t *\n\t\t * * A tag with a name `v0.1.28`\n\t\t * * The tag is an object with an oid `883860eacc7c37377f772a26919e700749020e4c`\n\t\t * * The tag points to a commit with an oid `41d27ca5d6df1e7826c7fa297398159857ea2d60`\n\t\t *\n\t\t * nameBuffer is everything after the first space. Let's extract the ref name\n\t\t * itself, that is refs/tags/v0.1.28.\n\t\t */\n\t\tconst nameBuffer = line.slice(spaceAt + 1, line.length - 1);\n\t\tconst name = nameBuffer.split(' ')[0];\n\t\trefs[name] = ref;\n\t}\n\treturn refs;\n}\n\n/**\n * Turns a user-provided ref in a convenient format, such as 'main' or\n * '1234567890abcdef1234567890abcdef12345678' into a more structured\n * format that tells us about the nature of the ref, e.g.\n *\n * * { kind: 'refname', refname: 'refs/heads/main' }\n * * { kind: 'commit', refname: '1234567890abcdef1234567890abcdef12345678' }.\n *\n * @param repoUrl\n * @param ref\n * @returns\n */\nasync function parseGitRef(\n\trepoUrl: string,\n\tref: GitRef\n): Promise<ParsedGitRef> {\n\tconst type = ref.type ?? 'infer';\n\tswitch (type) {\n\t\tcase 'commit':\n\t\t\treturn {\n\t\t\t\tkind: 'commit',\n\t\t\t\trefname: ref.value,\n\t\t\t\tresolvedOid: ref.value,\n\t\t\t};\n\t\tcase 'branch':\n\t\t\treturn {\n\t\t\t\tkind: 'refname',\n\t\t\t\trefname: `refs/heads/${ref.value.trim()}`,\n\t\t\t};\n\t\tcase 'tag':\n\t\t\treturn {\n\t\t\t\tkind: 'refname',\n\t\t\t\trefname: `refs/tags/${ref.value.trim()}`,\n\t\t\t};\n\t\tcase 'refname':\n\t\t\treturn {\n\t\t\t\tkind: 'refname',\n\t\t\t\trefname: ref.value.trim(),\n\t\t\t};\n\t\tcase 'infer': {\n\t\t\tconst trimmed = ref.value.trim();\n\t\t\tif (trimmed === '' || trimmed === 'HEAD') {\n\t\t\t\treturn {\n\t\t\t\t\tkind: 'refname',\n\t\t\t\t\trefname: 'HEAD',\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (trimmed.startsWith('refs/')) {\n\t\t\t\treturn {\n\t\t\t\t\tkind: 'refname',\n\t\t\t\t\trefname: trimmed,\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (FULL_SHA_REGEX.test(trimmed)) {\n\t\t\t\treturn {\n\t\t\t\t\tkind: 'commit',\n\t\t\t\t\trefname: trimmed,\n\t\t\t\t\tresolvedOid: trimmed,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst branchRef = `refs/heads/${trimmed}`;\n\t\t\tconst branchOid = await fetchRefOid(repoUrl, branchRef);\n\t\t\tif (branchOid) {\n\t\t\t\treturn {\n\t\t\t\t\tkind: 'refname',\n\t\t\t\t\trefname: branchRef,\n\t\t\t\t\tresolvedOid: branchOid,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst tagRef = `refs/tags/${trimmed}`;\n\t\t\tconst tagOid = await fetchRefOid(repoUrl, tagRef);\n\t\t\tif (tagOid) {\n\t\t\t\treturn {\n\t\t\t\t\tkind: 'refname',\n\t\t\t\t\trefname: tagRef,\n\t\t\t\t\tresolvedOid: tagOid,\n\t\t\t\t};\n\t\t\t}\n\t\t\tthrow new Error(`Git ref \"${ref.value}\" not found at ${repoUrl}`);\n\t\t}\n\t\tdefault:\n\t\t\tthrow new Error(`Invalid ref type: ${ref.type}`);\n\t}\n}\n\nasync function fetchRefOid(\n\trepoUrl: string,\n\trefname: string,\n\tadditionalHeaders?: GitAdditionalHeaders\n) {\n\tconst refs = await listGitRefs(repoUrl, refname, additionalHeaders);\n\tconst candidates = [refname, `${refname}^{}`];\n\tfor (const candidate of candidates) {\n\t\tconst sanitized = candidate.trim();\n\t\tif (sanitized in refs) {\n\t\t\treturn refs[sanitized];\n\t\t}\n\t}\n\treturn null;\n}\n\nasync function fetchWithoutBlobs(\n\trepoUrl: string,\n\tcommitHash: string,\n\tadditionalHeaders?: Record<string, string>\n) {\n\tconst packbuffer = Buffer.from(\n\t\t(await collect([\n\t\t\tGitPktLine.encode(\n\t\t\t\t`want ${commitHash} multi_ack_detailed no-done side-band-64k thin-pack ofs-delta agent=git/2.37.3 filter \\n`\n\t\t\t),\n\t\t\tGitPktLine.encode(`filter blob:none\\n`),\n\t\t\tGitPktLine.encode(`shallow ${commitHash}\\n`),\n\t\t\tGitPktLine.encode(`deepen 1\\n`),\n\t\t\tGitPktLine.flush(),\n\t\t\tGitPktLine.encode(`done\\n`),\n\t\t\tGitPktLine.encode(`done\\n`),\n\t\t])) as any\n\t);\n\n\tconst response = await fetch(repoUrl + '/git-upload-pack', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/x-git-upload-pack-advertisement',\n\t\t\t'content-type': 'application/x-git-upload-pack-request',\n\t\t\t'Content-Length': `${packbuffer.length}`,\n\t\t\t...additionalHeaders,\n\t\t},\n\t\tbody: packbuffer as any,\n\t});\n\n\tif (!response.ok) {\n\t\tif (response.status === 401 || response.status === 403) {\n\t\t\tthrow new GitAuthenticationError(repoUrl, response.status);\n\t\t}\n\t\tthrow new Error(\n\t\t\t`Failed to fetch git objects from ${repoUrl}: ${response.status} ${response.statusText}`\n\t\t);\n\t}\n\n\tconst iterator = streamToIterator(response.body!);\n\tconst parsed = await parseUploadPackResponse(iterator);\n\tconst packfile = Buffer.from((await collect(parsed.packfile)) as any);\n\tconst idx = await GitPackIndex.fromPack({\n\t\tpack: packfile,\n\t});\n\tconst originalRead = idx.read as any;\n\tidx.read = async function ({ oid, ...rest }: { oid: string }) {\n\t\tconst result = await originalRead.call(this, { oid, ...rest });\n\t\tresult.oid = oid;\n\t\treturn result;\n\t};\n\treturn {\n\t\tidx,\n\t\tpackfile: toUint8Array(packfile),\n\t\tpromisor: true,\n\t};\n}\n\nasync function resolveAllObjects(idx: GitPackIndex, commitHash: string) {\n\tconst commit = await idx.read({\n\t\toid: commitHash,\n\t});\n\treadObject(commit);\n\n\tconst rootItem = await idx.read({ oid: commit.object.tree });\n\tconst items = [rootItem];\n\twhile (items.length > 0) {\n\t\tconst tree = items.pop();\n\t\tconst readItem = await idx.read({ oid: tree.oid });\n\t\treadObject(readItem);\n\t\ttree.object = readItem.object;\n\t\tif (readItem.type === 'tree') {\n\t\t\tfor (const subitem of readItem.object) {\n\t\t\t\tif (subitem.type === 'tree') {\n\t\t\t\t\titems.push(subitem);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn rootItem;\n}\n\nasync function collectLooseObjects(\n\tpack?: {\n\t\tidx: GitPackIndex;\n\t\tpackfile: Uint8Array;\n\t\tpromisor?: boolean;\n\t} | null\n): Promise<SparseCheckoutObject[]> {\n\tif (!pack) {\n\t\treturn [];\n\t}\n\tconst results: SparseCheckoutObject[] = [];\n\tconst seen = new Set<string>();\n\tfor (const oid of pack.idx.hashes ?? []) {\n\t\tif (seen.has(oid)) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst offset = pack.idx.offsets.get(oid);\n\t\tif (offset === undefined) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst { type, object } = await pack.idx.readSlice({ start: offset });\n\t\tif (type === 'ofs_delta' || type === 'ref_delta') {\n\t\t\tcontinue;\n\t\t}\n\t\tif (!object) {\n\t\t\tcontinue;\n\t\t}\n\t\tseen.add(oid);\n\t\tresults.push({\n\t\t\toid,\n\t\t\ttype: type as SparseCheckoutObject['type'],\n\t\t\tbody: toUint8Array(object as Uint8Array),\n\t\t});\n\t}\n\treturn results;\n}\n\nasync function resolveObjects(\n\tidx: GitPackIndex,\n\tcommitHash: string,\n\tpaths: string[]\n) {\n\tconst commit = await idx.read({\n\t\toid: commitHash,\n\t});\n\treadObject(commit);\n\n\tconst rootTree = await idx.read({ oid: commit.object.tree });\n\treadObject(rootTree);\n\n\t// Resolve refs to fetch\n\tconst resolvedOids: Record<string, any> = {};\n\tfor (const path of paths) {\n\t\tlet currentObject = rootTree;\n\t\tconst segments = path.split('/');\n\t\tfor (const segment of segments) {\n\t\t\tif (currentObject.type !== 'tree') {\n\t\t\t\tthrow new Error(`Path not found in the repo: ${path}`);\n\t\t\t}\n\n\t\t\tlet found = false;\n\t\t\tfor (const item of currentObject.object) {\n\t\t\t\tif (item.path === segment) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tcurrentObject = await idx.read({ oid: item.oid });\n\t\t\t\t\t\treadObject(currentObject);\n\t\t\t\t\t} catch {\n\t\t\t\t\t\tcurrentObject = item;\n\t\t\t\t\t}\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!found) {\n\t\t\t\tthrow new Error(`Path not found in the repo: ${path}`);\n\t\t\t}\n\t\t}\n\t\tresolvedOids[path] = currentObject;\n\t}\n\treturn resolvedOids;\n}\n\n// Request oid for each resolvedRef\nasync function fetchObjects(\n\turl: string,\n\tobjectHashes: string[],\n\tadditionalHeaders?: Record<string, string>\n) {\n\tconst packbuffer = Buffer.from(\n\t\t(await collect([\n\t\t\t...objectHashes.map((objectHash) =>\n\t\t\t\tGitPktLine.encode(\n\t\t\t\t\t`want ${objectHash} multi_ack_detailed no-done side-band-64k thin-pack ofs-delta agent=git/2.37.3 \\n`\n\t\t\t\t)\n\t\t\t),\n\t\t\tGitPktLine.flush(),\n\t\t\tGitPktLine.encode(`done\\n`),\n\t\t])) as any\n\t);\n\n\tconst response = await fetch(url + '/git-upload-pack', {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/x-git-upload-pack-advertisement',\n\t\t\t'content-type': 'application/x-git-upload-pack-request',\n\t\t\t'Content-Length': `${packbuffer.length}`,\n\t\t\t...additionalHeaders,\n\t\t},\n\t\tbody: packbuffer as any,\n\t});\n\n\tif (!response.ok) {\n\t\tif (response.status === 401 || response.status === 403) {\n\t\t\tthrow new GitAuthenticationError(url, response.status);\n\t\t}\n\t\tthrow new Error(\n\t\t\t`Failed to fetch git objects from ${url}: ${response.status} ${response.statusText}`\n\t\t);\n\t}\n\n\tconst iterator = streamToIterator(response.body!);\n\tconst parsed = await parseUploadPackResponse(iterator);\n\tconst packfile = Buffer.from((await collect(parsed.packfile)) as any);\n\tif (packfile.byteLength === 0) {\n\t\tconst idx = await GitPackIndex.fromPack({\n\t\t\tpack: packfile,\n\t\t});\n\t\treturn {\n\t\t\tidx,\n\t\t\tpackfile: new Uint8Array(),\n\t\t\tpromisor: false,\n\t\t};\n\t}\n\tconst idx = await GitPackIndex.fromPack({\n\t\tpack: packfile,\n\t});\n\treturn {\n\t\tidx,\n\t\tpackfile: toUint8Array(packfile),\n\t\tpromisor: false,\n\t};\n}\n\nasync function extractGitObjectFromIdx(idx: GitPackIndex, objectHash: string) {\n\tconst tree = await idx.read({ oid: objectHash });\n\treadObject(tree);\n\n\tif (tree.type === 'blob') {\n\t\treturn tree.object;\n\t}\n\n\tconst files: Record<string, any> = {};\n\tfor (const { path, oid, type } of tree.object) {\n\t\tif (type === 'blob') {\n\t\t\tconst object = await idx.read({ oid });\n\t\t\treadObject(object);\n\t\t\tfiles[path] = object.object;\n\t\t} else if (type === 'tree') {\n\t\t\tfiles[path] = await extractGitObjectFromIdx(idx, oid);\n\t\t}\n\t}\n\treturn files;\n}\n\nfunction readObject(result: any) {\n\tif (!(result.object instanceof Buffer)) {\n\t\treturn;\n\t}\n\tswitch (result.type) {\n\t\tcase 'commit':\n\t\t\tresult.object = GitCommit.from(result.object).parse();\n\t\t\tbreak;\n\t\tcase 'tree':\n\t\t\tresult.object = (GitTree.from(result.object) as any).entries();\n\t\t\tbreak;\n\t\tcase 'blob':\n\t\t\tresult.object = new Uint8Array(result.object);\n\t\t\tresult.format = 'content';\n\t\t\tbreak;\n\t\tcase 'tag':\n\t\t\tresult.object = GitAnnotatedTag.from(result.object).parse();\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tthrow new ObjectTypeError(\n\t\t\t\tresult.oid,\n\t\t\t\tresult.type,\n\t\t\t\t'blob|commit|tag|tree'\n\t\t\t);\n\t}\n}\n\nasync function* parseGitResponseLines(response: Response) {\n\tconst text = await response.text();\n\tlet at = 0;\n\n\twhile (at <= text.length) {\n\t\tconst lineLength = parseInt(text.substring(at, at + 4), 16);\n\t\tif (lineLength === 0) {\n\t\t\tbreak;\n\t\t}\n\t\tconst line = text.substring(at + 4, at + lineLength);\n\t\tyield line;\n\t\tat += lineLength;\n\t}\n}\n\nfunction streamToIterator(stream: any) {\n\t// Use native async iteration if it's available.\n\tif (stream[Symbol.asyncIterator]) {\n\t\treturn stream;\n\t}\n\tconst reader = stream.getReader();\n\treturn {\n\t\tnext() {\n\t\t\treturn reader.read();\n\t\t},\n\t\treturn() {\n\t\t\treader.releaseLock();\n\t\t\treturn {};\n\t\t},\n\t\t[Symbol.asyncIterator]() {\n\t\t\treturn this;\n\t\t},\n\t};\n}\n\nfunction toUint8Array(buffer: Uint8Array | Buffer) {\n\tif (buffer instanceof Uint8Array) {\n\t\treturn Uint8Array.from(buffer);\n\t}\n\treturn Uint8Array.from(buffer);\n}\n","import { GitIndex } from 'isomorphic-git/src/models/GitIndex.js';\nimport type { SparseCheckoutObject } from './git-sparse-checkout';\nimport pako from 'pako';\nconst deflate = pako.deflate;\n\ntype GitDirectoryRefType = 'branch' | 'tag' | 'commit' | 'refname';\n\ntype GitHeadInfo = {\n\theadContent: string;\n\tbranchName?: string;\n\tbranchRef?: string;\n\ttagName?: string;\n};\n\nconst FULL_SHA_REGEX = /^[0-9a-f]{40}$/i;\n\n/**\n * Creates loose Git object files from sparse checkout objects.\n * Each object is compressed using deflate and stored in the Git objects directory.\n */\nasync function createLooseGitObjectFiles(\n\tobjects: SparseCheckoutObject[]\n): Promise<Record<string, Uint8Array>> {\n\tconst files: Record<string, Uint8Array> = {};\n\tconst encoder = new TextEncoder();\n\n\tawait Promise.all(\n\t\tobjects.map(async ({ oid, type, body }) => {\n\t\t\tif (!oid || body.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst header = encoder.encode(`${type} ${body.length}\\0`);\n\t\t\tconst combined = new Uint8Array(header.length + body.length);\n\t\t\tcombined.set(header, 0);\n\t\t\tcombined.set(body, header.length);\n\t\t\tconst compressed = await deflate(combined);\n\t\t\tconst prefix = oid.slice(0, 2);\n\t\t\tconst suffix = oid.slice(2);\n\t\t\tfiles[`.git/objects/${prefix}/${suffix}`] = compressed;\n\t\t})\n\t);\n\n\treturn files;\n}\n\n/**\n * Resolves the HEAD reference information based on the ref type and value.\n */\nfunction resolveHeadInfo(\n\tref: string,\n\trefType: GitDirectoryRefType | undefined,\n\tcommitHash: string\n): GitHeadInfo {\n\tconst trimmed = ref?.trim() ?? '';\n\tlet fullRef: string | null = null;\n\n\tswitch (refType) {\n\t\tcase 'branch':\n\t\t\tif (trimmed) {\n\t\t\t\tfullRef = `refs/heads/${trimmed}`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'refname':\n\t\t\tfullRef = trimmed || null;\n\t\t\tbreak;\n\t\tcase 'tag':\n\t\t\tif (trimmed.startsWith('refs/')) {\n\t\t\t\tfullRef = trimmed;\n\t\t\t} else if (trimmed) {\n\t\t\t\tfullRef = `refs/tags/${trimmed}`;\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'commit':\n\t\t\tfullRef = null;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tif (trimmed.startsWith('refs/')) {\n\t\t\t\tfullRef = trimmed;\n\t\t\t} else if (FULL_SHA_REGEX.test(trimmed)) {\n\t\t\t\tfullRef = null;\n\t\t\t} else if (trimmed && trimmed !== 'HEAD') {\n\t\t\t\tfullRef = `refs/heads/${trimmed}`;\n\t\t\t}\n\t\t\tbreak;\n\t}\n\n\tconst headContent = fullRef ? `ref: ${fullRef}\\n` : `${commitHash}\\n`;\n\n\tconst branchRef =\n\t\tfullRef && fullRef.startsWith('refs/heads/') ? fullRef : undefined;\n\tconst branchName = branchRef?.slice('refs/heads/'.length);\n\n\tconst tagRef =\n\t\tfullRef && fullRef.startsWith('refs/tags/') ? fullRef : undefined;\n\tconst tagName = tagRef?.slice('refs/tags/'.length);\n\n\treturn {\n\t\theadContent,\n\t\tbranchName,\n\t\tbranchRef,\n\t\ttagName,\n\t};\n}\n\n/**\n * Builds a Git config file content with remote and branch configuration.\n */\nfunction buildGitConfig(\n\trepoUrl: string,\n\t{\n\t\tbranchName,\n\t\tpartialCloneFilter,\n\t}: { branchName?: string; partialCloneFilter?: string }\n): string {\n\tconst repositoryFormatVersion = partialCloneFilter ? 1 : 0;\n\tconst lines = [\n\t\t'[core]',\n\t\t`\\trepositoryformatversion = ${repositoryFormatVersion}`,\n\t\t'\\tfilemode = true',\n\t\t'\\tbare = false',\n\t\t'\\tlogallrefupdates = true',\n\t\t'\\tignorecase = true',\n\t\t'\\tprecomposeunicode = true',\n\t\t'[remote \"origin\"]',\n\t\t`\\turl = ${repoUrl}`,\n\t\t'\\tfetch = +refs/heads/*:refs/remotes/origin/*',\n\t\t'\\tfetch = +refs/tags/*:refs/tags/*',\n\t];\n\tif (partialCloneFilter) {\n\t\tlines.push('\\tpromisor = true');\n\t\tlines.push(`\\tpartialclonefilter = ${partialCloneFilter}`);\n\t\tlines.push('[extensions]');\n\t\tlines.push('\\tpartialclone = origin');\n\t}\n\tif (branchName) {\n\t\tlines.push(\n\t\t\t`[branch \"${branchName}\"]`,\n\t\t\t'\\tremote = origin',\n\t\t\t`\\tmerge = refs/heads/${branchName}`\n\t\t);\n\t}\n\treturn lines.join('\\n') + '\\n';\n}\n\n/**\n * Creates a complete .git directory structure with all necessary files.\n * This includes HEAD, config, refs, objects, and the Git index.\n */\nexport async function createDotGitDirectory({\n\trepoUrl,\n\tcommitHash,\n\tref,\n\trefType,\n\tobjects,\n\tfileOids,\n\tpathPrefix,\n}: {\n\trepoUrl: string;\n\tcommitHash: string;\n\tref: string;\n\trefType?: GitDirectoryRefType;\n\tobjects: SparseCheckoutObject[];\n\tfileOids: Record<string, string>;\n\tpathPrefix: string;\n}): Promise<Record<string, string | Uint8Array>> {\n\tconst gitFiles: Record<string, string | Uint8Array> = {};\n\tconst headInfo = resolveHeadInfo(ref, refType, commitHash);\n\n\tgitFiles['.git/HEAD'] = headInfo.headContent;\n\tgitFiles['.git/config'] = buildGitConfig(repoUrl, {\n\t\tbranchName: headInfo.branchName,\n\t});\n\tgitFiles['.git/description'] = 'WordPress Playground clone\\n';\n\tgitFiles['.git/shallow'] = `${commitHash}\\n`;\n\n\t// Create refs/ directory structure\n\tgitFiles['.git/refs/heads/.gitkeep'] = '';\n\tgitFiles['.git/refs/tags/.gitkeep'] = '';\n\tgitFiles['.git/refs/remotes/.gitkeep'] = '';\n\n\tif (headInfo.branchRef && headInfo.branchName) {\n\t\tgitFiles['.git/logs/HEAD'] = `ref: ${headInfo.branchRef}\\n`;\n\t\tgitFiles[`.git/${headInfo.branchRef}`] = `${commitHash}\\n`;\n\t\tgitFiles[\n\t\t\t`.git/refs/remotes/origin/${headInfo.branchName}`\n\t\t] = `${commitHash}\\n`;\n\t\tgitFiles[\n\t\t\t'.git/refs/remotes/origin/HEAD'\n\t\t] = `ref: refs/remotes/origin/${headInfo.branchName}\\n`;\n\t}\n\n\tif (headInfo.tagName) {\n\t\tgitFiles[`.git/refs/tags/${headInfo.tagName}`] = `${commitHash}\\n`;\n\t}\n\n\t// Use loose objects only, no packfiles\n\tObject.assign(gitFiles, await createLooseGitObjectFiles(objects));\n\n\t// Create the git index\n\tconst index = new GitIndex();\n\tfor (const [path, oid] of Object.entries(fileOids)) {\n\t\t// Remove the path prefix to get the working tree relative path\n\t\tconst workingTreePath = path\n\t\t\t.substring(pathPrefix.length)\n\t\t\t.replace(/^\\/+/, '');\n\t\tindex.insert({\n\t\t\tfilepath: workingTreePath,\n\t\t\toid,\n\t\t\tstats: {\n\t\t\t\tctimeSeconds: 0,\n\t\t\t\tctimeNanoseconds: 0,\n\t\t\t\tmtimeSeconds: 0,\n\t\t\t\tmtimeNanoseconds: 0,\n\t\t\t\tdev: 0,\n\t\t\t\tino: 0,\n\t\t\t\tmode: 0o100644, // Regular file\n\t\t\t\tuid: 0,\n\t\t\t\tgid: 0,\n\t\t\t\tsize: 0,\n\t\t\t},\n\t\t});\n\t}\n\tconst indexBuffer = await index.toObject();\n\t// Convert Buffer to Uint8Array - copy the data to ensure it's a proper Uint8Array\n\tgitFiles['.git/index'] = Uint8Array.from(indexBuffer);\n\n\treturn gitFiles;\n}\n","import { normalizePath } from '@php-wasm/util';\nimport type { GitFileTree } from './git-sparse-checkout';\n\nexport function listDescendantFiles(\n\tfiles: GitFileTree[],\n\tselectedPath: string\n) {\n\tselectedPath = normalizePath(selectedPath);\n\tconst isRoot = ['', '.', '/'].includes(selectedPath);\n\n\tlet currentTree: GitFileTree[] | null = files;\n\tif (isRoot) {\n\t\tselectedPath = '';\n\t} else {\n\t\tconst segments = selectedPath.split('/');\n\t\tfor (const segment of segments) {\n\t\t\tconst file = currentTree?.find(\n\t\t\t\t(file) => file.name === segment\n\t\t\t) as GitFileTree;\n\t\t\tif (file?.type === 'folder') {\n\t\t\t\tcurrentTree = file.children;\n\t\t\t} else if (file) {\n\t\t\t\treturn [file.name];\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t}\n\n\t// Calculate the list of files to checkout based on the mapping\n\tconst descendants: string[] = [];\n\tconst stack = [{ tree: currentTree, path: selectedPath }];\n\twhile (stack.length > 0) {\n\t\tconst { tree, path } = stack.pop() as {\n\t\t\ttree: GitFileTree[];\n\t\t\tpath: string;\n\t\t};\n\t\tfor (const file of tree) {\n\t\t\tconst filePath = `${path}${path ? '/' : ''}${file.name}`;\n\t\t\tif (file.type === 'folder') {\n\t\t\t\tstack.push({\n\t\t\t\t\ttree: file.children,\n\t\t\t\t\tpath: filePath,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdescendants.push(filePath);\n\t\t\t}\n\t\t}\n\t}\n\treturn descendants;\n}\n\nexport function removePathPrefix(path: string, prefix: string) {\n\tif (path.startsWith(prefix)) {\n\t\treturn path.substring(prefix.length);\n\t}\n\treturn path;\n}\n","import { StreamedFile } from '@php-wasm/stream-compression';\nimport type { FileTree } from '@php-wasm/universal';\nimport { normalizePath } from '@php-wasm/util';\nimport type { Entry } from '@zip.js/zip.js';\nimport { ZipReader, BlobWriter, BlobReader } from '@zip.js/zip.js';\n\nexport interface ReadableFilesystemBackend {\n\tread(path: string): Promise<StreamedFile>;\n}\n\n/**\n * A readable filesystem that can also be traversed (list directories).\n */\nexport interface TraversableFilesystemBackend extends ReadableFilesystemBackend {\n\tlistFiles(path: string): Promise<string[]>;\n\tisDir(path: string): Promise<boolean>;\n}\n\n/**\n * Backend interface for writable filesystem operations.\n * All paths passed to these methods are expected to be absolute paths.\n */\nexport interface WritableFilesystemBackend extends TraversableFilesystemBackend {\n\tfileExists(absolutePath: string): Promise<boolean>;\n\twriteFile(absolutePath: string, data: Uint8Array): Promise<void>;\n\tmkdir(absolutePath: string, recursive?: boolean): Promise<void>;\n\trmdir(absolutePath: string, recursive: boolean): Promise<void>;\n\tmv(absoluteSource: string, absoluteDestination: string): Promise<void>;\n\tunlink(absolutePath: string): Promise<void>;\n\tclear(): Promise<void>;\n}\n\n/**\n * Interface for a writable filesystem with EventTarget support.\n * Used by UI components that need to react to filesystem changes.\n */\nexport interface AsyncWritableFilesystem extends EventTarget {\n\tisDir(path: string): Promise<boolean>;\n\tfileExists(path: string): Promise<boolean>;\n\tread(path: string): Promise<{ arrayBuffer(): Promise<ArrayBuffer> }>;\n\treadFileAsText(path: string): Promise<string>;\n\tlistFiles(path: string): Promise<string[]>;\n\twriteFile(path: string, data: Uint8Array | string): Promise<void>;\n\tmkdir(path: string, options?: { recursive?: boolean }): Promise<void>;\n\trmdir(path: string, options?: { recursive?: boolean }): Promise<void>;\n\tmv(source: string, destination: string): Promise<void>;\n\tunlink(path: string): Promise<void>;\n}\n\n/**\n * Copy all files from source filesystem to destination filesystem.\n * Clears the destination before copying.\n */\nexport async function copyFilesystem(\n\tsource: TraversableFilesystemBackend,\n\tdestination: WritableFilesystemBackend\n): Promise<void> {\n\tawait destination.clear();\n\n\tconst copyDir = async (path: string) => {\n\t\tconst entries = await source.listFiles(path);\n\t\tfor (const name of entries) {\n\t\t\tconst fullPath = path === '/' ? `/${name}` : `${path}/${name}`;\n\t\t\tif (await source.isDir(fullPath)) {\n\t\t\t\tawait destination.mkdir(fullPath);\n\t\t\t\tawait copyDir(fullPath);\n\t\t\t} else {\n\t\t\t\tconst file = await source.read(fullPath);\n\t\t\t\tconst content = new Uint8Array(await file.arrayBuffer());\n\t\t\t\tawait destination.writeFile(fullPath, content);\n\t\t\t}\n\t\t}\n\t};\n\n\tawait copyDir('/');\n}\n\n/**\n * Wraps a WritableFilesystemBackend with EventTarget support and convenience methods.\n * Dispatches 'change' events on write operations.\n */\nexport class EventedFilesystem\n\textends EventTarget\n\timplements AsyncWritableFilesystem\n{\n\tprivate readonly encoder = new TextEncoder();\n\tprivate readonly decoder = new TextDecoder();\n\treadonly backend: WritableFilesystemBackend;\n\n\tconstructor(backend: WritableFilesystemBackend) {\n\t\tsuper();\n\t\tthis.backend = backend;\n\t}\n\n\tasync isDir(path: string): Promise<boolean> {\n\t\treturn this.backend.isDir(path);\n\t}\n\n\tasync fileExists(path: string): Promise<boolean> {\n\t\treturn this.backend.fileExists(path);\n\t}\n\n\tasync read(path: string): Promise<StreamedFile> {\n\t\treturn this.backend.read(path);\n\t}\n\n\tasync readFileAsText(path: string): Promise<string> {\n\t\tconst file = await this.read(path);\n\t\tconst buffer = await file.arrayBuffer();\n\t\treturn this.decoder.decode(buffer);\n\t}\n\n\tasync listFiles(path: string): Promise<string[]> {\n\t\treturn this.backend.listFiles(path);\n\t}\n\n\tasync writeFile(path: string, data: Uint8Array | string): Promise<void> {\n\t\tconst content =\n\t\t\ttypeof data === 'string' ? this.encoder.encode(data) : data;\n\t\tawait this.backend.writeFile(path, content);\n\t\tthis.dispatchEvent(new Event('change'));\n\t}\n\n\tasync mkdir(\n\t\tpath: string,\n\t\toptions?: { recursive?: boolean }\n\t): Promise<void> {\n\t\tawait this.backend.mkdir(path, options?.recursive ?? false);\n\t\tthis.dispatchEvent(new Event('change'));\n\t}\n\n\tasync rmdir(\n\t\tpath: string,\n\t\toptions?: { recursive?: boolean }\n\t): Promise<void> {\n\t\tawait this.backend.rmdir(path, options?.recursive ?? false);\n\t\tthis.dispatchEvent(new Event('change'));\n\t}\n\n\tasync mv(source: string, destination: string): Promise<void> {\n\t\tif (source === destination) {\n\t\t\treturn;\n\t\t}\n\t\tawait this.backend.mv(source, destination);\n\t\tthis.dispatchEvent(new Event('change'));\n\t}\n\n\tasync unlink(path: string): Promise<void> {\n\t\tawait this.backend.unlink(path);\n\t\tthis.dispatchEvent(new Event('change'));\n\t}\n\n\tasync clear(): Promise<void> {\n\t\tawait this.backend.clear();\n\t\tthis.dispatchEvent(new Event('change'));\n\t}\n}\n\nexport class InMemoryFilesystem implements ReadableFilesystemBackend {\n\tprivate fileTree: FileTree;\n\n\tconstructor(fileTree: FileTree) {\n\t\tthis.fileTree = fileTree;\n\t}\n\n\tasync read(path: string): Promise<StreamedFile> {\n\t\tlet content = this.getEntryAtPath(path);\n\t\tif (typeof content === 'string') {\n\t\t\tcontent = new TextEncoder().encode(content);\n\t\t} else if (!(content instanceof Uint8Array)) {\n\t\t\tthrow new Error(`Unsupported content type: ${typeof content}`);\n\t\t}\n\t\tconst stream = new ReadableStream({\n\t\t\tstart(controller) {\n\t\t\t\tcontroller.enqueue(content);\n\t\t\t\tcontroller.close();\n\t\t\t},\n\t\t});\n\t\treturn new StreamedFile(stream, path, {\n\t\t\tfilesize: content.byteLength,\n\t\t});\n\t}\n\n\tprivate getEntryAtPath(path: string): Uint8Array | string | FileTree {\n\t\tlet remainingPath = path.replace(/^\\//, '');\n\t\tlet currentSubtree = this.fileTree;\n\t\twhile (remainingPath) {\n\t\t\tif (currentSubtree[remainingPath]) {\n\t\t\t\treturn currentSubtree[remainingPath];\n\t\t\t}\n\t\t\tconst segments = remainingPath.split('/');\n\t\t\tconst nextSegment = segments.shift();\n\t\t\tif (!nextSegment || !currentSubtree[nextSegment]) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcurrentSubtree = currentSubtree[nextSegment] as FileTree;\n\t\t\tremainingPath = segments.join('/');\n\t\t}\n\t\tthrow new Error(`File not found at ${path}`);\n\t}\n}\n\nexport class ZipFilesystem implements ReadableFilesystemBackend {\n\tprivate entries: Map<string, Entry> = new Map();\n\tprivate zipReader: ZipReader<BlobReader>;\n\n\tstatic fromStream(stream: ReadableStream<Uint8Array>): ZipFilesystem {\n\t\tconst zipReader = new ZipReader(\n\t\t\tnew BlobReader(new StreamedFile(stream, 'archive.zip'))\n\t\t);\n\t\treturn new ZipFilesystem(zipReader);\n\t}\n\n\tstatic fromArrayBuffer(arrayBuffer: ArrayBuffer): ZipFilesystem {\n\t\tconst zipReader = new ZipReader(\n\t\t\tnew BlobReader(new Blob([arrayBuffer]))\n\t\t);\n\t\treturn new ZipFilesystem(zipReader);\n\t}\n\n\tconstructor(zipReader: ZipReader<BlobReader>) {\n\t\tthis.zipReader = zipReader;\n\t}\n\n\tasync read(relativePath: string): Promise<StreamedFile> {\n\t\tconst entry = await this.getEntry(relativePath);\n\t\tconst blob = await entry.getData!(new BlobWriter());\n\t\treturn new StreamedFile(blob.stream(), relativePath, {\n\t\t\tfilesize: entry.uncompressedSize,\n\t\t});\n\t}\n\n\tprivate async getEntry(relativePath: string): Promise<Entry> {\n\t\tconst entries = await this.getEntries();\n\t\tconst entry = entries.get(relativePath.replace(/^\\//, ''));\n\t\tif (!entry) {\n\t\t\tthrow new Error(`File ${relativePath} not found in the zip.`);\n\t\t}\n\t\treturn entry;\n\t}\n\n\tprivate async getEntries(): Promise<Map<string, Entry>> {\n\t\tif (this.entries.size === 0) {\n\t\t\tconst entries = await this.zipReader.getEntries();\n\t\t\tfor (const entry of entries) {\n\t\t\t\tthis.entries.set(entry.filename, entry);\n\t\t\t}\n\t\t}\n\t\treturn this.entries;\n\t}\n}\n\n/**\n * A Filesystem implementation that cascades through multiple filesystems\n * and returns the first successful result.\n *\n * This is useful for creating a layered approach to file resolution,\n * such as checking a local cache before fetching from a remote source.\n */\nexport class OverlayFilesystem implements ReadableFilesystemBackend {\n\tprivate filesystems: ReadableFilesystemBackend[];\n\n\t/**\n\t * Creates a new OverlayFilesystem.\n\t *\n\t * @param filesystems An array of Filesystem instances to cascade through.\n\t *                    The order determines the priority - earlier filesystems\n\t *                    are checked first.\n\t */\n\tconstructor(filesystems: ReadableFilesystemBackend[]) {\n\t\tif (!filesystems.length) {\n\t\t\tthrow new Error(\n\t\t\t\t'OverlayFilesystem requires at least one filesystem'\n\t\t\t);\n\t\t}\n\t\tthis.filesystems = filesystems;\n\t}\n\n\t/**\n\t * Reads a file by trying each filesystem in order until one succeeds.\n\t *\n\t * @param path The path to the file to read.\n\t * @returns A Promise that resolves to a StreamedFile from the first\n\t *          filesystem that successfully resolves the path.\n\t * @throws Error if all filesystems fail to resolve the path.\n\t */\n\tasync read(path: string): Promise<StreamedFile> {\n\t\tconst errors: Error[] = [];\n\n\t\t// Try each filesystem in order\n\t\tfor (const filesystem of this.filesystems) {\n\t\t\ttry {\n\t\t\t\treturn await filesystem.read(path);\n\t\t\t} catch (error) {\n\t\t\t\t// Collect the error and continue to the next filesystem\n\t\t\t\terrors.push(\n\t\t\t\t\terror instanceof Error ? error : new Error(String(error))\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// If we get here, all filesystems failed\n\t\tconst errorMessages = errors.map((e) => e.message).join('; ');\n\t\tthrow new Error(\n\t\t\t`Failed to read ${path} from any filesystem: ${errorMessages}`,\n\t\t\t{ cause: errors }\n\t\t);\n\t}\n}\n\nexport interface FetchFilesystemOptions {\n\tcorsProxy?: string;\n\tbaseUrl: string;\n}\n\n/**\n * A Filesystem implementation that fetches files from URLs.\n * It can optionally use a CORS proxy and resolve paths relative to a base URL.\n */\nexport class FetchFilesystem implements ReadableFilesystemBackend {\n\tprivate baseUrl = '';\n\tprivate options: FetchFilesystemOptions;\n\tprivate isDataUrl: boolean;\n\n\tconstructor(options: FetchFilesystemOptions) {\n\t\tthis.options = options;\n\t\tthis.isDataUrl = options.baseUrl.startsWith('data:');\n\t\tif (this.isDataUrl) {\n\t\t\treturn;\n\t\t}\n\t\t// Ensure the base URL ends with a slash\n\t\tconst url = new URL('./', options.baseUrl);\n\t\tif (url.protocol !== 'http:' && url.protocol !== 'https:') {\n\t\t\tthrow new Error(\n\t\t\t\t'Unsupported protocol: ' +\n\t\t\t\t\turl.protocol +\n\t\t\t\t\t'. Only HTTP and HTTPS are supported.'\n\t\t\t);\n\t\t}\n\t\tthis.baseUrl = url.origin + url.pathname;\n\t}\n\n\tasync read(path: string): Promise<StreamedFile> {\n\t\tif (this.isDataUrl) {\n\t\t\tthrow new Error(\n\t\t\t\t'FetchFilesystem cannot fetch files from data URLs'\n\t\t\t);\n\t\t}\n\n\t\t// Make sure there's no .. segments in the path\n\t\tpath = normalizePath(path);\n\t\t// Prevent escaping the base URL\n\t\tconst cleanPath = path.replace(/^\\//, '');\n\n\t\t// Resolve path to a URL\n\t\tconst url = new URL(cleanPath, this.baseUrl).toString();\n\t\tif (!url.startsWith(this.baseUrl)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Refused to read a file outside of the base URL: ${url}`\n\t\t\t);\n\t\t}\n\n\t\t// Apply CORS proxy if configured\n\t\tconst finalUrl = this.options.corsProxy\n\t\t\t? `${this.options.corsProxy}${encodeURIComponent(url)}`\n\t\t\t: url;\n\n\t\t// Fetch the file\n\t\tconst response = await fetch(finalUrl);\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(\n\t\t\t\t`Failed to fetch file at ${path}: ${response.statusText}`\n\t\t\t);\n\t\t}\n\n\t\t// Get the content length if available\n\t\tconst filesize = response.headers.get('content-length')\n\t\t\t? parseInt(response.headers.get('content-length')!, 10)\n\t\t\t: undefined;\n\n\t\t// Return as a StreamedFile\n\t\treturn new StreamedFile(response.body!, path, { filesize });\n\t}\n}\n\n/**\n * A Filesystem implementation that uses the \"fs\" and \"path\" modules from Node.js\n * to read files from the local file system.\n *\n * This is only available in a local environment.\n */\nexport class NodeJsFilesystem implements ReadableFilesystemBackend {\n\tprivate fs: any;\n\tprivate path: any;\n\tprivate root: string;\n\n\tconstructor(root: string) {\n\t\tthis.root = root;\n\t}\n\n\tprivate async ensureNodeModules() {\n\t\tif (!this.fs || !this.path) {\n\t\t\ttry {\n\t\t\t\tthis.fs = await import('fs');\n\t\t\t\tthis.path = await import('path');\n\t\t\t} catch {\n\t\t\t\tthis.fs = require('fs');\n\t\t\t\tthis.path = require('path');\n\t\t\t}\n\t\t\tthis.root = this.path.resolve(this.root) + this.path.sep;\n\t\t}\n\t}\n\n\tasync read(filePath: string): Promise<StreamedFile> {\n\t\tawait this.ensureNodeModules();\n\n\t\tfilePath = this.path.resolve(\n\t\t\tthis.root,\n\t\t\tthis.path.normalize(filePath.replace(/^\\//, ''))\n\t\t);\n\t\tif (!filePath.startsWith(this.root)) {\n\t\t\tthrow new Error(\n\t\t\t\t`Refused to read a file outside of the root directory: ${filePath}`\n\t\t\t);\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst fullPath = this.path.resolve(filePath);\n\t\t\tconst stream = this.fs.createReadStream(fullPath);\n\n\t\t\tstream.on('error', (err: any) => {\n\t\t\t\treject(\n\t\t\t\t\tnew Error(\n\t\t\t\t\t\t`Failed to read file at ${filePath}: ${err.message}`\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tthis.fs.stat(fullPath, (err: any, stats: any) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(\n\t\t\t\t\t\tnew Error(\n\t\t\t\t\t\t\t`Failed to read file at ${filePath}: ${err.message}`\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(\n\t\t\t\t\t\tnew StreamedFile(\n\t\t\t\t\t\t\tnodeStreamToReadableStream(stream),\n\t\t\t\t\t\t\tfilePath,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfilesize: stats.size,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n\nfunction nodeStreamToReadableStream(stream: any): ReadableStream {\n\tconst readableStream = new ReadableStream({\n\t\tstart(controller) {\n\t\t\tstream.on('data', (chunk: Buffer) => controller.enqueue(chunk));\n\t\t\tstream.on('end', () => controller.close());\n\t\t},\n\t});\n\treturn readableStream;\n}\n\n/**\n * OPFS filesystem backend that operates directly on the Origin Private File System.\n * Implements both ReadableFilesystemBackend (for BlueprintBundle) and\n * WritableFilesystemBackend (for the editor).\n */\nexport class OpfsFilesystemBackend implements WritableFilesystemBackend {\n\tprivate readonly opfsRoot: FileSystemDirectoryHandle;\n\n\tconstructor(opfsRoot: FileSystemDirectoryHandle) {\n\t\tthis.opfsRoot = opfsRoot;\n\t}\n\n\t/**\n\t * Create a backend for a specific OPFS directory handle.\n\t */\n\tstatic fromDirectoryHandle(\n\t\thandle: FileSystemDirectoryHandle\n\t): OpfsFilesystemBackend {\n\t\treturn new OpfsFilesystemBackend(handle);\n\t}\n\n\t/**\n\t * Create a backend for a specific path in OPFS.\n\t * The path will be created if `create` is true.\n\t * @throws Error if OPFS is not available or path doesn't exist (when create=false)\n\t */\n\tstatic async fromPath(\n\t\tpath: string,\n\t\tcreate = false\n\t): Promise<OpfsFilesystemBackend> {\n\t\tif (typeof navigator === 'undefined') {\n\t\t\tthrow new Error('OPFS not available: navigator is undefined');\n\t\t}\n\t\tif (!navigator.storage || !navigator.storage.getDirectory) {\n\t\t\tthrow new Error('OPFS not available: storage API not supported');\n\t\t}\n\t\tlet handle = await navigator.storage.getDirectory();\n\t\tconst segments = path.split('/').filter(Boolean);\n\t\tfor (const segment of segments) {\n\t\t\thandle = await handle.getDirectoryHandle(segment, { create });\n\t\t}\n\t\treturn new OpfsFilesystemBackend(handle);\n\t}\n\n\tasync clear(): Promise<void> {\n\t\tfor await (const [name] of this.opfsRoot.entries()) {\n\t\t\ttry {\n\t\t\t\tawait this.opfsRoot.removeEntry(name, { recursive: true });\n\t\t\t} catch {\n\t\t\t\t/* ignore */\n\t\t\t}\n\t\t}\n\t}\n\n\t// ReadableFilesystemBackend interface\n\tasync read(path: string): Promise<StreamedFile> {\n\t\tconst content = await this.readFileAsBuffer(path);\n\t\tconst stream = new ReadableStream({\n\t\t\tstart(controller) {\n\t\t\t\tcontroller.enqueue(content);\n\t\t\t\tcontroller.close();\n\t\t\t},\n\t\t});\n\t\treturn new StreamedFile(stream, path, {\n\t\t\tfilesize: content.byteLength,\n\t\t});\n\t}\n\n\tasync isDir(absolutePath: string): Promise<boolean> {\n\t\tif (absolutePath === '/') {\n\t\t\treturn true;\n\t\t}\n\t\ttry {\n\t\t\tconst segments = absolutePath.split('/').filter(Boolean);\n\t\t\tlet dir = this.opfsRoot;\n\t\t\tfor (const segment of segments) {\n\t\t\t\tdir = await dir.getDirectoryHandle(segment);\n\t\t\t}\n\t\t\treturn true;\n\t\t} catch {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tasync fileExists(absolutePath: string): Promise<boolean> {\n\t\tconst segments = absolutePath.split('/').filter(Boolean);\n\t\t// Root always exists\n\t\tif (segments.length === 0) {\n\t\t\treturn true;\n\t\t}\n\t\tconst name = segments.pop()!;\n\t\ttry {\n\t\t\tlet dir = this.opfsRoot;\n\t\t\tfor (const segment of segments) {\n\t\t\t\tdir = await dir.getDirectoryHandle(segment);\n\t\t\t}\n\t\t\t// Check if it's a file or directory\n\t\t\ttry {\n\t\t\t\tawait dir.getFileHandle(name);\n\t\t\t\treturn true;\n\t\t\t} catch {\n\t\t\t\tawait dir.getDirectoryHandle(name);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} catch {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tasync listFiles(absolutePath: string): Promise<string[]> {\n\t\tlet dir = this.opfsRoot;\n\t\tif (absolutePath !== '/') {\n\t\t\tconst segments = absolutePath.split('/').filter(Boolean);\n\t\t\tfor (const segment of segments) {\n\t\t\t\tdir = await dir.getDirectoryHandle(segment);\n\t\t\t}\n\t\t}\n\t\tconst names: string[] = [];\n\t\tfor await (const [name] of dir.entries()) {\n\t\t\tnames.push(name);\n\t\t}\n\t\treturn names;\n\t}\n\n\tasync writeFile(absolutePath: string, data: Uint8Array): Promise<void> {\n\t\tconst segments = absolutePath.split('/').filter(Boolean);\n\t\tconst fileName = segments.pop();\n\t\tif (!fileName) {\n\t\t\tthrow new Error(`Invalid file path: ${absolutePath}`);\n\t\t}\n\t\t// Navigate to parent directory without creating it\n\t\tlet dir = this.opfsRoot;\n\t\tfor (const segment of segments) {\n\t\t\tdir = await dir.getDirectoryHandle(segment);\n\t\t}\n\t\tconst handle = await dir.getFileHandle(fileName, { create: true });\n\t\tconst writable = await handle.createWritable();\n\t\tawait writable.write(data);\n\t\tawait writable.close();\n\t}\n\n\tasync mkdir(absolutePath: string, recursive = false): Promise<void> {\n\t\tconst segments = absolutePath.split('/').filter(Boolean);\n\t\tlet dir = this.opfsRoot;\n\t\tfor (let i = 0; i < segments.length; i++) {\n\t\t\tconst segment = segments[i];\n\t\t\tconst isLast = i === segments.length - 1;\n\t\t\t// Only create the final directory; parent dirs must exist unless recursive\n\t\t\tdir = await dir.getDirectoryHandle(segment, {\n\t\t\t\tcreate: recursive || isLast,\n\t\t\t});\n\t\t}\n\t}\n\n\tasync rmdir(absolutePath: string, recursive: boolean): Promise<void> {\n\t\tconst segments = absolutePath.split('/').filter(Boolean);\n\t\tconst name = segments.pop();\n\t\tif (!name) {\n\t\t\treturn;\n\t\t}\n\t\tlet dir = this.opfsRoot;\n\t\tfor (const segment of segments) {\n\t\t\tdir = await dir.getDirectoryHandle(segment);\n\t\t}\n\t\tawait dir.removeEntry(name, { recursive });\n\t}\n\n\tasync mv(\n\t\tabsoluteSource: string,\n\t\tabsoluteDestination: string\n\t): Promise<void> {\n\t\tconst isSourceDir = await this.isDir(absoluteSource);\n\t\tif (isSourceDir) {\n\t\t\tawait this.copyDir(absoluteSource, absoluteDestination);\n\t\t\tawait this.rmdir(absoluteSource, true);\n\t\t} else {\n\t\t\tconst content = await this.readFileAsBuffer(absoluteSource);\n\t\t\tawait this.writeFile(absoluteDestination, content);\n\t\t\tawait this.unlink(absoluteSource);\n\t\t}\n\t}\n\n\tasync unlink(absolutePath: string): Promise<void> {\n\t\tconst segments = absolutePath.split('/').filter(Boolean);\n\t\tconst name = segments.pop();\n\t\tif (!name) {\n\t\t\treturn;\n\t\t}\n\t\tlet dir = this.opfsRoot;\n\t\tfor (const segment of segments) {\n\t\t\tdir = await dir.getDirectoryHandle(segment);\n\t\t}\n\t\ttry {\n\t\t\tawait dir.removeEntry(name);\n\t\t} catch {\n\t\t\t/* ignore */\n\t\t}\n\t}\n\n\t// --- Internal helpers ---\n\tprivate async readFileAsBuffer(absolutePath: string): Promise<Uint8Array> {\n\t\tconst segments = absolutePath.split('/').filter(Boolean);\n\t\tconst fileName = segments.pop();\n\t\tif (!fileName) {\n\t\t\tthrow new Error(`Invalid file path: ${absolutePath}`);\n\t\t}\n\t\tlet dir = this.opfsRoot;\n\t\tfor (const segment of segments) {\n\t\t\tdir = await dir.getDirectoryHandle(segment);\n\t\t}\n\t\tconst handle = await dir.getFileHandle(fileName);\n\t\tconst file = await handle.getFile();\n\t\treturn new Uint8Array(await file.arrayBuffer());\n\t}\n\n\tprivate async copyDir(source: string, destination: string): Promise<void> {\n\t\tawait this.mkdir(destination);\n\t\tconst files = await this.listFiles(source);\n\t\tfor (const name of files) {\n\t\t\tconst srcPath = source === '/' ? `/${name}` : `${source}/${name}`;\n\t\t\tconst destPath =\n\t\t\t\tdestination === '/' ? `/${name}` : `${destination}/${name}`;\n\t\t\tif (await this.isDir(srcPath)) {\n\t\t\t\tawait this.copyDir(srcPath, destPath);\n\t\t\t} else {\n\t\t\t\tconst content = await this.readFileAsBuffer(srcPath);\n\t\t\t\tawait this.writeFile(destPath, content);\n\t\t\t}\n\t\t}\n\t}\n}\n\ntype FileNode = { type: 'file'; content: Uint8Array };\ntype DirNode = { type: 'dir'; children: Record<string, FsNode> };\ntype FsNode = FileNode | DirNode;\n\n/**\n * In-memory writable filesystem backend that stores files in a tree structure.\n */\nexport class InMemoryFilesystemBackend implements WritableFilesystemBackend {\n\tprivate root: DirNode = { type: 'dir', children: {} };\n\n\tconstructor(initialFiles: Record<string, Uint8Array> = {}) {\n\t\tfor (const [path, content] of Object.entries(initialFiles)) {\n\t\t\tthis.writeFileSync(path, content);\n\t\t}\n\t}\n\n\tasync read(path: string): Promise<StreamedFile> {\n\t\tconst file = this.getFile(path);\n\t\tconst content = file.content;\n\t\tconst stream = new ReadableStream({\n\t\t\tstart(controller) {\n\t\t\t\tcontroller.enqueue(content);\n\t\t\t\tcontroller.close();\n\t\t\t},\n\t\t});\n\t\treturn new StreamedFile(stream, path, {\n\t\t\tfilesize: content.byteLength,\n\t\t});\n\t}\n\n\tasync isDir(absolutePath: string): Promise<boolean> {\n\t\tconst node = this.getNode(absolutePath);\n\t\treturn !!node && node.type === 'dir';\n\t}\n\n\tasync fileExists(absolutePath: string): Promise<boolean> {\n\t\tconst node = this.getNode(absolutePath);\n\t\treturn !!node;\n\t}\n\n\tasync listFiles(absolutePath: string): Promise<string[]> {\n\t\tconst node = this.getNode(absolutePath);\n\t\tif (!node || node.type !== 'dir') {\n\t\t\treturn [];\n\t\t}\n\t\treturn Object.keys(node.children);\n\t}\n\n\tasync writeFile(absolutePath: string, data: Uint8Array): Promise<void> {\n\t\tthis.writeFileSync(absolutePath, data);\n\t}\n\n\tasync mkdir(absolutePath: string, recursive = false): Promise<void> {\n\t\t// Root always exists, nothing to create\n\t\tif (absolutePath === '/') {\n\t\t\treturn;\n\t\t}\n\t\tconst { parent, name } = recursive\n\t\t\t? this.getOrCreateParent(absolutePath)\n\t\t\t: this.getParent(absolutePath);\n\t\tif (!parent.children[name]) {\n\t\t\tparent.children[name] = { type: 'dir', children: {} };\n\t\t}\n\t}\n\n\tasync rmdir(absolutePath: string, recursive: boolean): Promise<void> {\n\t\tconst { parent, name } = this.getParent(absolutePath);\n\t\tconst target = parent.children[name];\n\t\tif (!target || target.type !== 'dir') {\n\t\t\treturn;\n\t\t}\n\t\tif (!recursive && Object.keys(target.children).length > 0) {\n\t\t\tthrow new Error('Directory not empty');\n\t\t}\n\t\tdelete parent.children[name];\n\t}\n\n\tasync mv(\n\t\tabsoluteSource: string,\n\t\tabsoluteDestination: string\n\t): Promise<void> {\n\t\tconst { parent: sourceParent, name: sourceName } =\n\t\t\tthis.getParent(absoluteSource);\n\t\tconst entry = sourceParent.children[sourceName];\n\t\tif (!entry) {\n\t\t\tthrow new Error(`Source not found: ${absoluteSource}`);\n\t\t}\n\n\t\tconst { parent: destParent, name: destName } =\n\t\t\tthis.getParent(absoluteDestination);\n\t\tdestParent.children[destName] = entry;\n\t\tdelete sourceParent.children[sourceName];\n\t}\n\n\tasync unlink(absolutePath: string): Promise<void> {\n\t\tconst { parent, name } = this.getParent(absolutePath);\n\t\tconst target = parent.children[name];\n\t\tif (target && target.type === 'file') {\n\t\t\tdelete parent.children[name];\n\t\t}\n\t}\n\n\tasync clear(): Promise<void> {\n\t\tthis.root = { type: 'dir', children: {} };\n\t}\n\n\t// --- Internal helpers ---\n\tprivate writeFileSync(absolutePath: string, data: Uint8Array): void {\n\t\tconst { parent, name } = this.getParent(absolutePath);\n\t\tparent.children[name] = {\n\t\t\ttype: 'file',\n\t\t\tcontent: new Uint8Array(data),\n\t\t};\n\t}\n\n\tprivate getNode(absolutePath: string): FsNode | undefined {\n\t\tif (absolutePath === '/') {\n\t\t\treturn this.root;\n\t\t}\n\t\tconst parts = absolutePath.split('/').filter(Boolean);\n\t\tlet current: FsNode = this.root;\n\t\tfor (const segment of parts) {\n\t\t\tif (current.type !== 'dir') {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tconst next = current.children[segment] as FsNode | undefined;\n\t\t\tif (!next) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tcurrent = next;\n\t\t}\n\t\treturn current;\n\t}\n\n\tprivate getDir(absolutePath: string): DirNode {\n\t\tconst node = this.getNode(absolutePath);\n\t\tif (!node || node.type !== 'dir') {\n\t\t\tthrow new Error(`Directory not found: ${absolutePath}`);\n\t\t}\n\t\treturn node;\n\t}\n\n\tprivate getFile(absolutePath: string): FileNode {\n\t\tconst node = this.getNode(absolutePath);\n\t\tif (!node || node.type !== 'file') {\n\t\t\tthrow new Error(`File not found: ${absolutePath}`);\n\t\t}\n\t\treturn node;\n\t}\n\n\t/**\n\t * Get parent directory, throwing if it doesn't exist.\n\t */\n\tprivate getParent(absolutePath: string): { parent: DirNode; name: string } {\n\t\tconst segments = absolutePath.split('/').filter(Boolean);\n\t\tconst name = segments.pop();\n\t\tif (!name) {\n\t\t\tthrow new Error(`Invalid path: ${absolutePath}`);\n\t\t}\n\t\tconst parentPath = segments.length ? `/${segments.join('/')}` : '/';\n\t\tconst parent = this.getNode(parentPath);\n\t\tif (!parent || parent.type !== 'dir') {\n\t\t\tthrow new Error(`Parent directory not found: ${parentPath}`);\n\t\t}\n\t\treturn { parent, name };\n\t}\n\n\t/**\n\t * Get parent directory, creating it if it doesn't exist.\n\t */\n\tprivate getOrCreateParent(absolutePath: string): {\n\t\tparent: DirNode;\n\t\tname: string;\n\t} {\n\t\tconst segments = absolutePath.split('/').filter(Boolean);\n\t\tconst name = segments.pop();\n\t\tif (!name) {\n\t\t\tthrow new Error(`Invalid path: ${absolutePath}`);\n\t\t}\n\t\tconst parentPath = segments.length ? `/${segments.join('/')}` : '/';\n\t\tconst parent = this.ensureDir(parentPath);\n\t\treturn { parent, name };\n\t}\n\n\tprivate ensureDir(absolutePath: string): DirNode {\n\t\tif (absolutePath === '/') {\n\t\t\treturn this.root;\n\t\t}\n\t\tconst parts = absolutePath.split('/').filter(Boolean);\n\t\tlet current: DirNode = this.root;\n\t\tfor (const part of parts) {\n\t\t\tconst next = current.children[part];\n\t\t\tif (!next) {\n\t\t\t\tconst dir: DirNode = { type: 'dir', children: {} };\n\t\t\t\tcurrent.children[part] = dir;\n\t\t\t\tcurrent = dir;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (next.type !== 'dir') {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`Path segment \"${part}\" is not a directory in ${absolutePath}`\n\t\t\t\t);\n\t\t\t}\n\t\t\tcurrent = next;\n\t\t}\n\t\treturn current;\n\t}\n}\n"],"names":["createClient","githubToken","Octokit","filesListToObject","files","root","result","file","getFilesFromDirectory","octokit","owner","repo","ref","path","options","onProgress","filePromises","directoryPromises","content","item","getFileContent","filesInDirs","dir","semaphore","Semaphore","release","fileContent","base64ToUint8Array","base64","binaryString","len","bytes","i","getArtifact","pull_number","workflow_id","pullRequest","runId","_a","artifacts","mayPush","repository","headers","createOrUpdateBranch","branch","newHead","fork","user","createCommit","message","parentSha","treeSha","sha","createTree","changeset","tree","createTreeNodes","newTreeSha","blobsPromises","createTreeNode","deleteFile","blobs","blob","blobSemaphore","stringContent","uint8ArrayToBase64","binary","iterateFiles","playground","exceptPaths","normalizePath","stack","currentParent","absPath","joinPaths","filesBefore","filesAfter","changes","seenFilesAfter","fileAfter","before","after","uint8arraysEqual","pathBefore","a","b","val","index","directoryHandleFromMountDevice","device","opfsPathToDirectoryHandle","opfsPath","parts","p","handle","part","directoryHandleToOpfsPath","directoryHandle","pathParts","clearContentsFromMountDevice","mountDevice","parentHandle","name","fromValue","value","queue","getIterator","iterable","StreamReader","stream","n","done","buffers","lengthBuffers","nextbuffer","acc","buffer","padHex","s","GitPktLine","line","length","hexlength","reader","err","BaseError","json","InternalError","UnsafeFilepathError","filepath","compareStrings","comparePath","compareTreeEntryPath","appendSlashIfDir","entry","mode2type","mode","parseBuffer","_entries","cursor","space","nullchar","type","oid","limitModeToAllowed","nudgeIntoShape","GitTree","entries","formatAuthor","email","timestamp","timezoneOffset","formatTimezoneOffset","minutes","sign","simpleSign","negateExceptForZero","hours","strHours","strMinutes","normalizeNewlines","str","parseAuthor","author","offset","parseTimezoneOffset","GitAnnotatedTag","tag","obj","hs","h","key","signature","secretKey","payload","signedTag","indent","x","outdent","GitCommit","commit","committer","signedCommit","GitObject","object","actualLength","BufferCursor","r","enc","source","start","end","applyDelta","delta","sourceSize","readVarIntLE","targetSize","target","firstOp","readOp","writer","tell","shift","byte","readCompactLE","flags","size","COPY","OFFS","SIZE","listpack","onData","PACK","version","numObjects","ofs","reference","parseHeader","inflator","pako","chunk","inflate","inherits_browserModule","ctor","superCtor","TempCtor","base64Js","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","code","getLens","b64","validLen","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","output","extraBytes","maxChunkLength","len2","ieee754","isLE","mLen","nBytes","e","m","eLen","eMax","eBias","nBits","d","c","rt","require$$0","require$$1","customInspectSymbol","exports","Buffer","SlowBuffer","K_MAX_LENGTH","typedArraySupport","proto","createBuffer","buf","arg","encodingOrOffset","allocUnsafe","from","fromString","fromArrayView","isInstance","fromArrayBuffer","valueOf","fromObject","assertSize","alloc","fill","encoding","checked","string","actual","fromArrayLike","array","arrayView","copy","byteOffset","numberIsNaN","y","list","pos","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","max","thisStart","thisEnd","thisCopy","targetCopy","bidirectionalIndexOf","arrayIndexOf","indexSize","arrLength","valLength","read","foundIndex","found","j","hexWrite","remaining","strLen","parsed","utf8Write","blitBuffer","asciiWrite","asciiToBytes","base64Write","ucs2Write","utf16leToBytes","res","firstByte","codePoint","bytesPerSequence","secondByte","thirdByte","fourthByte","tempCodePoint","decodeCodePointsArray","MAX_ARGUMENTS_LENGTH","codePoints","ret","out","hexSliceLookupTable","newBuf","checkOffset","ext","noAssert","mul","checkInt","min","maxBytes","limit","sub","checkIEEE754","writeFloat","littleEndian","writeDouble","targetStart","INVALID_BASE64_RE","base64clean","units","leadSurrogate","byteArray","hi","lo","src","dst","alphabet","table","i16","copyProps","module","SafeBuffer","toString","isarray","esObjectAtoms","esErrors","_eval","range","syntax","uri","abs","floor","pow","round","_isNaN","$isNaN","number","gOPD","$gOPD","gopd","$defineProperty","esDefineProperty","shams","sym","symObj","symVal","_","syms","descriptor","origSymbol","hasSymbolSham","hasSymbols","Reflect_getPrototypeOf","$Object","Object_getPrototypeOf","ERROR_MESSAGE","toStr","funcType","concatty","slicy","arrLike","joiny","joiner","implementation","that","args","bound","binder","boundLength","boundArgs","Empty","functionBind","functionCall","functionApply","reflectApply","bind","$apply","$call","require$$2","$reflectApply","require$$3","actualApply","$TypeError","$actualApply","callBindApplyHelpers","callBind","hasProtoAccessor","desc","$getPrototypeOf","get","reflectGetProto","originalGetProto","getDunderProto","getProto","O","call","$hasOwn","hasown","undefined","$Error","$EvalError","$RangeError","$ReferenceError","require$$4","$SyntaxError","require$$5","require$$6","$URIError","require$$7","require$$8","require$$9","require$$10","require$$11","require$$12","require$$13","require$$14","$Function","getEvalledConstructor","expressionSyntax","require$$15","require$$16","throwTypeError","ThrowTypeError","require$$17","require$$18","$ObjectGPO","require$$19","$ReflectGPO","require$$20","require$$21","require$$22","needsEval","TypedArray","INTRINSICS","errorProto","doEval","fn","gen","LEGACY_ALIASES","require$$23","hasOwn","require$$24","$concat","$spliceApply","$replace","$strSlice","$exec","rePropName","reEscapeChar","stringToPath","first","last","match","quote","subString","getBaseIntrinsic","allowMissing","intrinsicName","alias","getIntrinsic","intrinsicBaseName","intrinsic","intrinsicRealName","skipFurtherCaching","isOwn","GetIntrinsic","callBindBasic","$indexOf","callBound","fnToStr","badArrayLike","isCallableMarker","constructorRegex","isES6ClassFn","fnStr","tryFunctionObject","objectClass","fnClass","genClass","ddaClass","ddaClass2","ddaClass3","hasToStringTag","isIE68","isDDA","all","isCallable","strClass","hasOwnProperty","forEachArray","iterator","receiver","forEachString","forEachObject","k","isArray","forEach","thisArg","possibleTypedArrayNames","possibleNames","g","global","availableTypedArrays","defineDataProperty","property","nonEnumerable","nonWritable","nonConfigurable","loose","hasPropertyDescriptors","hasPropertyDescriptors_1","define","hasDescriptors","$floor","setFunctionLength","functionLengthIsConfigurable","functionLengthIsWritable","applyBind","originalFunction","func","adjustedLength","$toString","typedArrays","$slice","cache","typedArray","superProto","tryTypedArrays","getter","trySlices","whichTypedArray","isTypedArray","$typedArrayBuffer","typedArrayBuffer","isView","useUint8Array","useArrayBuffer","useFromArrayBuffer","toBuffer","data","isArr","Hash","blockSize","finalSize","block","accum","assigned","remainder","rem","bits","lowBits","highBits","hash","inherits","K","W","Sha1","rotl1","rotl5","rotl30","ft","M","w","t","H","sha1","toHex","hex","supportsSubtleSHA1","shasum","testSubtleSHA1","subtleSHA1","shasumSync","decodeVarInt","multibyte","lastSeven","otherVarIntDecode","startWith","GitPackIndex","stuff","idx","getExternalRefDelta","hashes","offsets","packfileSha","pack","listpackTypes","offsetToObject","crcs","totalObjectCount","lastPercent","percent","offsetArray","o","crc","crc32","count","objectsByDepth","write","fanoutBuffer","crcsBuffer","offsetsBuffer","totalBuffer","shaBuffer","types","raw","btype","lastFour","base","baseOffset","InvalidOidError","ObjectTypeError","expected","normalizeMode","permissions","MAX_UINT32","SecondsNanoseconds","givenSeconds","givenNanoseconds","milliseconds","date","seconds","nanoseconds","normalizeStats","ctimeSeconds","ctimeNanoseconds","mtimeSeconds","mtimeNanoseconds","parseCacheEntryFlags","renderCacheEntryFlags","GitIndex","unmergedPaths","existingEntry","magic","shaComputed","shaClaimed","numEntries","pathlength","padding","stats","stage","bfilepath","bpath","written","stat","header","entryBuffers","body","main","sum","forAwait","cb","iter","collect","nextIndex","FIFO","resolve","GitSideBand","input","packetlines","packfile","progress","nextBit","error","parseUploadPackResponse","shallows","unshallows","acks","nak","reject","status","BufferPolyfill","GitAuthenticationError","repoUrl","sparseCheckout","commitHash","filesPaths","additionalHeaders","treesPack","fetchWithoutBlobs","objects","resolveObjects","blobOids","blobsPack","fetchObjects","fetchedPaths","extractGitObjectFromIdx","packfiles","treesIndex","toUint8Array","blobsIndex","fileOids","collectLooseObjects","FULL_SHA_REGEX","listGitFiles","rootTree","resolveAllObjects","gitTreeToFileTree","resolveCommitHash","parseGitRef","fetchRefOid","listGitRefs","fullyQualifiedBranchPrefix","packbuffer","response","refs","parseGitResponseLines","spaceAt","trimmed","branchRef","branchOid","tagRef","tagOid","refname","candidates","candidate","sanitized","streamToIterator","originalRead","rest","readObject","rootItem","items","readItem","subitem","results","seen","paths","resolvedOids","currentObject","segments","segment","url","objectHashes","objectHash","text","at","lineLength","deflate","createLooseGitObjectFiles","encoder","combined","compressed","prefix","suffix","resolveHeadInfo","refType","fullRef","headContent","branchName","tagName","buildGitConfig","partialCloneFilter","lines","createDotGitDirectory","pathPrefix","gitFiles","headInfo","workingTreePath","indexBuffer","listDescendantFiles","selectedPath","isRoot","currentTree","descendants","filePath","removePathPrefix","copyFilesystem","destination","copyDir","fullPath","EventedFilesystem","backend","InMemoryFilesystem","fileTree","controller","StreamedFile","remainingPath","currentSubtree","nextSegment","ZipFilesystem","zipReader","ZipReader","BlobReader","arrayBuffer","relativePath","BlobWriter","OverlayFilesystem","filesystems","errors","filesystem","errorMessages","FetchFilesystem","cleanPath","finalUrl","filesize","NodeJsFilesystem","nodeStreamToReadableStream","OpfsFilesystemBackend","opfsRoot","create","absolutePath","names","fileName","writable","recursive","isLast","absoluteSource","absoluteDestination","srcPath","destPath","InMemoryFilesystemBackend","initialFiles","node","parent","sourceParent","sourceName","destParent","destName","current","next","parentPath"],"mappings":";;;;;;AAMO,SAASA,GAAaC,GAA8B;AAI1D,SAHgB,IAAIC,GAAQ;AAAA,IAC3B,MAAMD;AAAA,EAAA,CACN;AAEF;AAGO,SAASE,GAAkBC,GAAcC,IAAO,IAAI;AAC1D,EAAIA,EAAK,UAAU,CAACA,EAAK,SAAS,GAAG,MACpCA,KAAQ;AAET,QAAMC,IAAgB,CAAA;AACtB,aAAWC,KAAQH;AAClB,IAAIG,EAAK,KAAK,WAAWF,CAAI,MAC5BC,EAAOC,EAAK,KAAK,UAAUF,EAAK,MAAM,CAAC,IAAIE,EAAK;AAGlD,SAAOD;AACR;AAUA,eAAsBE,GACrBC,GACAC,GACAC,GACAC,GACAC,GACAC,IAA2B,IAC1B;AACD,EAAKA,EAAQ,aACZA,EAAQ,WAAW;AAAA,IAClB,YAAY;AAAA,IACZ,iBAAiB;AAAA,EAAA;AAGnB,QAAM,EAAE,YAAAC,MAAeD,GACjBE,IAA+B,CAAA,GAC/BC,IAAoC,CAAA,GAGpC,EAAE,MAAMC,EAAA,IAAY,MAAMT,EAAQ,KAAK,MAAM,WAAW;AAAA,IAC7D,OAAAC;AAAA,IACA,MAAAC;AAAA,IACA,MAAAE;AAAA,IACA,KAAAD;AAAA,EAAA,CACA;AACD,MAAI,CAAC,MAAM,QAAQM,CAAO;AACzB,UAAM,IAAI;AAAA,MACT,sDAAsD,OAAOA,CAAO;AAAA,IAAA;AAItE,aAAWC,KAAQD;AAClB,IAAIC,EAAK,SAAS,UACjB,EAAEL,EAAQ,SAAS,YACnBC,KAAA,QAAAA,EAAaD,EAAQ,WACrBE,EAAa;AAAA,MACZI,GAAeX,GAASC,GAAOC,GAAMC,GAAKO,CAAI,EAAE,KAAK,CAACZ,OACrD,EAAEO,EAAQ,SAAU,iBACpBC,KAAA,QAAAA,EAAaD,EAAQ,WACdP,EACP;AAAA,IAAA,KAEQY,EAAK,SAAS,SACxBF,EAAkB;AAAA,MACjBT;AAAA,QACCC;AAAA,QACAC;AAAA,QACAC;AAAA,QACAC;AAAA,QACAO,EAAK;AAAA,QACLL;AAAA,MAAA;AAAA,IACD;AAKH,QAAMV,IAAQ,MAAM,QAAQ,IAAIY,CAAY,GACtCK,KAAe,MAAM,QAAQ,IAAIJ,CAAiB,GAAG;AAAA,IAC1D,CAACK,MAAQA;AAAA,EAAA;AAEV,SAAO,CAAC,GAAGlB,GAAO,GAAGiB,CAAW;AACjC;AAEA,MAAME,KAAY,IAAIC,GAAU,EAAE,aAAa,IAAI;AACnD,eAAeJ,GACdX,GACAC,GACAC,GACAC,GACAO,GACC;AACD,QAAMM,IAAU,MAAMF,GAAU,QAAA;AAChC,MAAI;AACH,UAAM,EAAE,MAAMG,EAAA,IAAgB,MAAMjB,EAAQ,KAAK,MAAM,WAAW;AAAA,MACjE,OAAAC;AAAA,MACA,MAAAC;AAAA,MACA,KAAAC;AAAA,MACA,MAAMO,EAAK;AAAA,IAAA,CACX;AACD,QAAI,EAAE,aAAaO;AAClB,YAAM,IAAI,MAAM,wBAAwBP,EAAK,IAAI,EAAE;AAEpD,WAAO;AAAA,MACN,MAAMA,EAAK;AAAA,MACX,MAAMA,EAAK;AAAA,MACX,SAASQ,GAAmBD,EAAY,OAAO;AAAA,IAAA;AAAA,EAEjD,UAAA;AACC,IAAAD,EAAA;AAAA,EACD;AACD;AAEA,SAASE,GAAmBC,GAAgB;AAC3C,QAAMC,IAAe,OAAO,KAAKD,CAAM,GACjCE,IAAMD,EAAa,QACnBE,IAAQ,IAAI,WAAWD,CAAG;AAChC,WAASE,IAAI,GAAGA,IAAIF,GAAKE;AACxB,IAAAD,EAAMC,CAAC,IAAIH,EAAa,WAAWG,CAAC;AAErC,SAAOD;AACR;AAWA,eAAsBE,GACrBxB,GACAC,GACAC,GACAuB,GACAC,GACC;;AACD,QAAM,EAAE,MAAMC,EAAA,IAAgB,MAAM3B,EAAQ,KAAK,MAAM,IAAI;AAAA,IAC1D,OAAAC;AAAA,IACA,MAAAC;AAAA,IACA,aAAAuB;AAAA,EAAA,CACA,GAOKG,KAAQC,KANO,MAAM7B,EAAQ,KAAK,QAAQ,iBAAiB;AAAA,IAChE,OAAAC;AAAA,IACA,MAAAC;AAAA,IACA,QAAQyB,EAAY,KAAK;AAAA,IACzB,aAAAD;AAAA,EAAA,CACA,GAC0B,KAAK,cAAc,CAAC,MAAjC,gBAAAG,EAAoC,IAC5CC,IAAY,MAAM9B,EAAQ,KAAK,QAAQ,yBAAyB;AAAA,IACrE,OAAAC;AAAA,IACA,MAAAC;AAAA,IACA,QAAQ0B;AAAA,EAAA,CACR;AAQD,UANiB,MAAM5B,EAAQ,KAAK,QAAQ,iBAAiB;AAAA,IAC5D,OAAAC;AAAA,IACA,MAAAC;AAAA,IACA,aAAa4B,EAAU,KAAK,UAAU,CAAC,EAAE;AAAA,IACzC,gBAAgB;AAAA,EAAA,CAChB,GACe;AACjB;AAEA,eAAsBC,GAAQ/B,GAAkBC,GAAeC,GAAc;;AAC5E,QAAM,EAAE,MAAM8B,GAAY,SAAAC,EAAA,IAAY,MAAMjC,EAAQ;AAAA,IACnD;AAAA,IACA;AAAA,MACC,OAAAC;AAAA,MACA,MAAAC;AAAA,IAAA;AAAA,EACD;AAED,SAAI,GAAC+B,EAAQ,gBAAgB,KAAK,GAACJ,IAAAG,EAAW,gBAAX,QAAAH,EAAwB;AAQ5D;AAEA,eAAsBK,GACrBlC,GACAC,GACAC,GACAiC,GACAC,GACC;AAYD,EAXqB,MAAMpC,EACzB,QAAQ,+CAA+C;AAAA,IACvD,OAAAC;AAAA,IACA,MAAAC;AAAA,IACA,QAAAiC;AAAA,EAAA,CACA,EACA;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,EAAA,IAIP,MAAMnC,EAAQ,QAAQ,8CAA8C;AAAA,IACnE,OAAAC;AAAA,IACA,MAAAC;AAAA,IACA,KAAKkC;AAAA,IACL,KAAK,SAASD,CAAM;AAAA,EAAA,CACpB,IAED,MAAMnC,EAAQ,QAAQ,uCAAuC;AAAA,IAC5D,OAAAC;AAAA,IACA,MAAAC;AAAA,IACA,KAAKkC;AAAA,IACL,KAAK,cAAcD,CAAM;AAAA,EAAA,CACzB;AAEH;AAQA,eAAsBE,GAAKrC,GAAkBC,GAAeC,GAAc;AACzE,QAAMoC,IAAO,MAAMtC,EAAQ,QAAQ,WAAW;AAS9C,UARc,MAAMA,EAAQ,QAAQ,mCAAmC;AAAA,IACtE,OAAAC;AAAA,IACA,MAAAC;AAAA,EAAA,CACA,GACqB,KAAK;AAAA,IAC1B,CAACmC,MAAcA,EAAK,SAASA,EAAK,MAAM,UAAUC,EAAK,KAAK;AAAA,EAAA,KAI5D,MAAMtC,EAAQ,QAAQ,oCAAoC;AAAA,IACzD,OAAAC;AAAA,IACA,MAAAC;AAAA,EAAA,CACA,GAGKoC,EAAK,KAAK;AAClB;AAEA,eAAsBC,GACrBvC,GACAC,GACAC,GACAsC,GACAC,GACAC,GACkB;AAClB,QAAM;AAAA,IACL,MAAM,EAAE,KAAAC,EAAA;AAAA,EAAI,IACT,MAAM3C,EAAQ,QAAQ,0CAA0C;AAAA,IACnE,OAAAC;AAAA,IACA,MAAAC;AAAA,IACA,SAAAsC;AAAA,IACA,MAAME;AAAA,IACN,SAAS,CAACD,CAAS;AAAA,EAAA,CACnB;AAED,SAAOE;AACR;AAEA,eAAsBC,GACrB5C,GACAC,GACAC,GACAuC,GACAI,GACC;AACD,QAAMC,IAAO,MAAMC;AAAA,IAClB/C;AAAA,IACAC;AAAA,IACAC;AAAA,IACAuC;AAAA,IACAI;AAAA,EAAA;AAED,MAAIC,EAAK,WAAW;AACnB,WAAO;AAGR,QAAM;AAAA,IACL,MAAM,EAAE,KAAKE,EAAA;AAAA,EAAW,IACrB,MAAMhD,EAAQ,QAAQ,wCAAwC;AAAA,IACjE,OAAAC;AAAA,IACA,MAAAC;AAAA,IACA,WAAWuC;AAAA,IACX,MAAAK;AAAA,EAAA,CACA;AACD,SAAOE;AACR;AAaA,eAAsBD,GACrB/C,GACAC,GACAC,GACAuC,GACAI,GAC4B;AAC5B,QAAMI,IAAgB,CAAA;AACtB,aAAW,CAAC7C,GAAMK,CAAO,KAAKoC,EAAU;AACvC,IAAAI,EAAc,KAAKC,GAAelD,GAASC,GAAOC,GAAME,GAAMK,CAAO,CAAC;AAEvE,aAAW,CAACL,GAAMK,CAAO,KAAKoC,EAAU;AACvC,IAAAI,EAAc,KAAKC,GAAelD,GAASC,GAAOC,GAAME,GAAMK,CAAO,CAAC;AAEvE,aAAWL,KAAQyC,EAAU;AAC5B,IAAAI,EAAc,KAAKE,GAAWnD,GAASC,GAAOC,GAAMuC,GAAWrC,CAAI,CAAC;AAErE,SAAO,QAAQ,IAAI6C,CAAa,EAAE;AAAA,IACjC,CAACG,MAAUA,EAAM,OAAO,CAACC,MAAS,CAAC,CAACA,CAAI;AAAA,EAAA;AAE1C;AAEA,MAAMC,KAAgB,IAAIvC,GAAU,EAAE,aAAa,IAAI;AACvD,eAAsBmC,GACrBlD,GACAC,GACAC,GACAE,GACAK,GAC0B;AAC1B,QAAMO,IAAU,MAAMsC,GAAc,QAAA;AACpC,MAAI;AACH,QAAI,YAAY,OAAO7C,CAAO;AAC7B,UAAI;AAEH,cAAM8C,IAAgB,IAAI,YAAY,SAAS;AAAA,UAC9C,OAAO;AAAA,QAAA,CACP,EAAE,OAAO9C,CAAO;AACjB,eAAO;AAAA,UACN,MAAAL;AAAA,UACA,SAASmD;AAAA,UACT,MAAM;AAAA,QAAA;AAAA,MAER,QAAQ;AAGP,cAAM;AAAA,UACL,MAAM,EAAE,KAAAZ,EAAA;AAAA,QAAI,IACT,MAAM3C,EAAQ,KAAK,IAAI,WAAW;AAAA,UACrC,OAAAC;AAAA,UACA,MAAAC;AAAA,UACA,UAAU;AAAA,UACV,SAASsD,GAAmB/C,CAAO;AAAA,QAAA,CACnC;AACD,eAAO;AAAA,UACN,MAAAL;AAAA,UACA,KAAAuC;AAAA,UACA,MAAM;AAAA,QAAA;AAAA,MAER;AAAA;AAGA,aAAO;AAAA,QACN,MAAAvC;AAAA,QACA,SAAAK;AAAA,QACA,MAAM;AAAA,MAAA;AAAA,EAGT,UAAA;AACC,IAAAO,EAAA;AAAA,EACD;AACD;AAEA,eAAsBmC,GACrBnD,GACAC,GACAC,GACAuC,GACArC,GACsC;AACtC,QAAMY,IAAU,MAAMsC,GAAc,QAAA;AACpC,MAAI;AAIH,iBAAMtD,EAAQ,QAAQ,6CAA6C;AAAA,MAClE,OAAAC;AAAA,MACA,MAAAC;AAAA,MACA,KAAKuC;AAAA,MACL,MAAArC;AAAA,IAAA,CACA,GAEM;AAAA,MACN,MAAAA;AAAA,MACA,MAAM;AAAA,MACN,KAAK;AAAA,IAAA;AAAA,EAEP,QAAQ;AAEP;AAAA,EACD,UAAA;AACC,IAAAY,EAAA;AAAA,EACD;AACD;AAEA,SAASwC,GAAmBlC,GAAmB;AAC9C,QAAMmC,IAAS,CAAA,GACTpC,IAAMC,EAAM;AAClB,WAASC,IAAI,GAAGA,IAAIF,GAAKE;AACxB,IAAAkC,EAAO,KAAK,OAAO,aAAanC,EAAMC,CAAC,CAAC,CAAC;AAE1C,SAAO,OAAO,KAAKkC,EAAO,KAAK,EAAE,CAAC;AACnC;AC7YA,gBAAuBC,GACtBC,GACA/D,GACA,EAAE,aAAAgE,IAAc,CAAA,EAAC,IAA2B,IAChB;AAI5B,MAHAhE,IAAOiE,GAAcjE,CAAI,GAGrB,CAAE,MAAM+D,EAAW,MAAM/D,CAAI,GAAI;AACpC,IAAI,MAAM+D,EAAW,WAAW/D,CAAI,MACnC,MAAM;AAAA,MACL,MAAMA;AAAA,MACN,MAAM,YAAY,MAAM+D,EAAW,iBAAiB/D,CAAI;AAAA,IAAA;AAG1D;AAAA,EACD;AAEA,QAAMkE,IAAkB,CAAClE,CAAI;AAC7B,SAAOkE,EAAM,UAAQ;AACpB,UAAMC,IAAgBD,EAAM,IAAA;AAC5B,QAAI,CAACC;AACJ;AAED,UAAMpE,IAAQ,MAAMgE,EAAW,UAAUI,CAAa;AACtD,eAAWjE,KAAQH,GAAO;AACzB,YAAMqE,IAAUC,GAAUF,GAAejE,CAAI;AAC7C,MAAI8D,EAAY,SAASI,EAAQ,UAAUpE,EAAK,SAAS,CAAC,CAAC,MAGvD,MAAM+D,EAAW,MAAMK,CAAO,IACjCF,EAAM,KAAKE,CAAO,IAElB,MAAM;AAAA,QACL,MAAMA;AAAA,QACN,MAAM,YACL,MAAML,EAAW,iBAAiBK,CAAO;AAAA,MAAA;AAAA,IAG7C;AAAA,EACD;AACD;AAqCA,eAAsBnB,GACrBqB,GACAC,GACC;AACD,QAAMC,IAAqB;AAAA,IAC1B,4BAAY,IAAA;AAAA,IACZ,4BAAY,IAAA;AAAA,IACZ,4BAAY,IAAA;AAAA,EAAI,GAGXC,wBAAqB,IAAA;AAC3B,mBAAiBC,KAAaH,GAAY;AACzC,IAAAE,EAAe,IAAIC,EAAU,IAAI;AAEjC,UAAMC,IAASL,EAAY,IAAII,EAAU,IAAI,GACvCE,IAAQ,MAAMF,EAAU,KAAA;AAC9B,IAAIC,IACEE,GAAiBF,GAAQC,CAAK,KAClCJ,EAAQ,OAAO,IAAIE,EAAU,MAAME,CAAK,IAGzCJ,EAAQ,OAAO,IAAIE,EAAU,MAAME,CAAK;AAAA,EAE1C;AAEA,aAAWE,KAAcR,EAAY;AACpC,IAAKG,EAAe,IAAIK,CAAU,KACjCN,EAAQ,OAAO,IAAIM,CAAU;AAI/B,SAAON;AACR;AAEA,SAASK,GAAiBE,GAAeC,GAAwB;AAChE,SAAOD,EAAE,WAAWC,EAAE,UAAUD,EAAE,MAAM,CAACE,GAAKC,MAAUD,MAAQD,EAAEE,CAAK,CAAC;AACzE;ACjJA,eAAsBC,GACrBC,GACqC;AACrC,SAAIA,EAAO,SAAS,aACZA,EAAO,SAGRC,GAA0BD,EAAO,IAAI;AAC7C;AAEA,eAAsBC,GACrBC,GACqC;AACrC,QAAMC,IAAQD,EAAS,MAAM,GAAG,EAAE,OAAO,CAACE,MAAMA,EAAE,SAAS,CAAC;AAC5D,MAAIC,IAAS,MAAM,UAAU,QAAQ,aAAA;AACrC,aAAWC,KAAQH;AAClB,IAAAE,IAAS,MAAMA,EAAO,mBAAmBC,GAAM,EAAE,QAAQ,IAAM;AAEhE,SAAOD;AACR;AAEA,eAAsBE,GACrBC,GACkB;AAElB,QAAMC,IAAY,OADL,MAAM,UAAU,QAAQ,aAAA,GACR,QAAQD,CAAe;AACpD,MAAIC,MAAc;AACjB,UAAM,IAAI;AAAA,MACT;AAAA,MACA;AAAA,IAAA;AAGF,SAAO,MAAMA,EAAU,KAAK,GAAG;AAChC;AAEA,eAAsBC,GAA6BC,GAA0B;AAC5E,QAAMC,IAAe,MAAMb,GAA+BY,CAAW;AACrE,mBAAiBE,KAAQD,EAAa;AACrC,UAAMA,EAAa,YAAYC,GAAM;AAAA,MACpC,WAAW;AAAA,IAAA,CACX;AAEH;AC5CO,SAASC,GAAUC,GAAO;AAC/B,MAAIC,IAAQ,CAACD,CAAK;AAClB,SAAO;AAAA,IACL,OAAO;AACL,aAAO,QAAQ,QAAQ,EAAE,MAAMC,EAAM,WAAW,GAAG,OAAOA,EAAM,MAAK,CAAE;AAAA,IACzE;AAAA,IACA,SAAS;AACP,aAAAA,IAAQ,CAAA,GACD,CAAA;AAAA,IACT;AAAA,IACA,CAAC,OAAO,aAAa,IAAI;AACvB,aAAO;AAAA,IACT;AAAA,EACJ;AACA;ACdO,SAASC,GAAYC,GAAU;AACpC,SAAIA,EAAS,OAAO,aAAa,IACxBA,EAAS,OAAO,aAAa,EAAC,IAEnCA,EAAS,OAAO,QAAQ,IACnBA,EAAS,OAAO,QAAQ,EAAC,IAE9BA,EAAS,OACJA,IAEFJ,GAAUI,CAAQ;AAC3B;ACVO,MAAMC,GAAa;AAAA,EACxB,YAAYC,GAAQ;AAElB,QAAI,OAAO,SAAW;AACpB,YAAM,IAAI,MAAM,2BAA2B;AAE7C,SAAK,SAASH,GAAYG,CAAM,GAChC,KAAK,SAAS,MACd,KAAK,SAAS,GACd,KAAK,aAAa,GAClB,KAAK,UAAU,IACf,KAAK,SAAS,IACd,KAAK,kBAAkB;AAAA,EACzB;AAAA,EAEA,MAAM;AACJ,WAAO,KAAK,UAAU,KAAK,WAAW,KAAK,OAAO;AAAA,EACpD;AAAA,EAEA,OAAO;AACL,WAAO,KAAK,kBAAkB,KAAK;AAAA,EACrC;AAAA,EAEA,MAAM,OAAO;AACX,QAAI,MAAK,UACJ,KAAK,WAAS,MAAM,KAAK,MAAK,GAC/B,OAAK,WAAW,KAAK,OAAO,WAC9B,MAAM,KAAK,UAAS,GAChB,KAAK;AAEX,kBAAK,YAAY,CAAC,GACX,KAAK,OAAO,KAAK,UAAU;AAAA,EACpC;AAAA,EAEA,MAAM,QAAQ;AACZ,QAAI,MAAK,UACJ,KAAK,WAAS,MAAM,KAAK,MAAK,GAC/B,OAAK,WAAW,KAAK,OAAO,WAC9B,MAAM,KAAK,UAAS,GAChB,KAAK;AAEX,kBAAK,YAAY,KAAK,OAAO,MAAM,GAC5B,KAAK,OAAO,MAAM,KAAK,YAAY,KAAK,MAAM;AAAA,EACvD;AAAA,EAEA,MAAM,KAAKC,GAAG;AACZ,QAAI,MAAK;AACT,aAAK,KAAK,WAAS,MAAM,KAAK,MAAK,GAC/B,KAAK,SAASA,IAAI,KAAK,OAAO,WAChC,KAAK,MAAK,GACV,MAAM,KAAK,YAAYA,CAAC,IAE1B,KAAK,YAAYA,CAAC,GACX,KAAK,OAAO,MAAM,KAAK,YAAY,KAAK,MAAM;AAAA,EACvD;AAAA,EAEA,MAAM,KAAKA,GAAG;AACZ,IAAI,KAAK,UACJ,KAAK,WAAS,MAAM,KAAK,MAAK,GAC/B,KAAK,SAASA,IAAI,KAAK,OAAO,WAChC,KAAK,MAAK,GACV,MAAM,KAAK,YAAYA,CAAC,IAE1B,KAAK,YAAYA,CAAC;AAAA,EACpB;AAAA,EAEA,MAAM,OAAO;AACX,SAAK,SAAS,KAAK;AAAA,EACrB;AAAA,EAEA,MAAM,QAAQ;AACZ,SAAK,UAAU;AACf,QAAI,EAAE,MAAAC,GAAM,OAAAP,EAAK,IAAK,MAAM,KAAK,OAAO,KAAI;AAC5C,WAAIO,MACF,KAAK,SAAS,IACV,CAACP,KAAc,OAAO,MAAM,CAAC,KAE/BA,MACFA,IAAQ,OAAO,KAAKA,CAAK,IAEpBA;AAAA,EACT;AAAA,EAEA,QAAQ;AAGN,SAAK,SAAS,KAAK,OAAO,MAAM,KAAK,UAAU,GAC/C,KAAK,UAAU,KAAK,YACpB,KAAK,mBAAmB,KAAK,YAC7B,KAAK,aAAa;AAAA,EACpB;AAAA,EAEA,YAAYM,GAAG;AACb,SAAK,aAAa,KAAK,QACvB,KAAK,UAAUA,GACX,KAAK,SAAS,KAAK,OAAO,WAC5B,KAAK,SAAS,KAAK,OAAO;AAAA,EAE9B;AAAA,EAEA,MAAM,YAAYA,GAAG;AACnB,QAAI,KAAK,OAAQ;AAGjB,UAAME,IAAU,CAAC,KAAK,MAAM;AAC5B,WAAO,KAAK,SAASF,IAAIG,GAAcD,CAAO,KAAG;AAC/C,YAAME,IAAa,MAAM,KAAK,MAAK;AACnC,UAAI,KAAK,OAAQ;AACjB,MAAAF,EAAQ,KAAKE,CAAU;AAAA,IACzB;AACA,SAAK,SAAS,OAAO,OAAOF,CAAO;AAAA,EACrC;AAAA,EAEA,MAAM,YAAY;AAChB,SAAK,mBAAmB,KAAK,OAAO,QACpC,KAAK,aAAa,GAClB,KAAK,SAAS,GACd,KAAK,SAAS,MAAM,KAAK,MAAK;AAAA,EAChC;AAAA,EAEA,MAAM,QAAQ;AACZ,SAAK,SAAS,MAAM,KAAK,MAAK;AAAA,EAChC;AACF;AAIA,SAASC,GAAcD,GAAS;AAC9B,SAAOA,EAAQ,OAAO,CAACG,GAAKC,MAAWD,IAAMC,EAAO,QAAQ,CAAC;AAC/D;ACpIO,SAASC,GAAOhC,GAAGyB,GAAG;AAC3B,QAAMQ,IAAIR,EAAE,SAAS,EAAE;AACvB,SAAO,IAAI,OAAOzB,IAAIiC,EAAE,MAAM,IAAIA;AACpC;ACsDO,MAAMC,EAAW;AAAA,EACtB,OAAO,QAAQ;AACb,WAAO,OAAO,KAAK,QAAQ,MAAM;AAAA,EACnC;AAAA,EAEA,OAAO,QAAQ;AACb,WAAO,OAAO,KAAK,QAAQ,MAAM;AAAA,EACnC;AAAA,EAEA,OAAO,OAAOC,GAAM;AAClB,IAAI,OAAOA,KAAS,aAClBA,IAAO,OAAO,KAAKA,CAAI;AAEzB,UAAMC,IAASD,EAAK,SAAS,GACvBE,IAAYL,GAAO,GAAGI,CAAM;AAClC,WAAO,OAAO,OAAO,CAAC,OAAO,KAAKC,GAAW,MAAM,GAAGF,CAAI,CAAC;AAAA,EAC7D;AAAA,EAEA,OAAO,aAAaX,GAAQ;AAC1B,UAAMc,IAAS,IAAIf,GAAaC,CAAM;AACtC,WAAO,iBAAsB;AAC3B,UAAI;AACF,YAAIY,IAAS,MAAME,EAAO,KAAK,CAAC;AAChC,YAAIF,KAAU,KAAM,QAAO;AAG3B,YAFAA,IAAS,SAASA,EAAO,SAAS,MAAM,GAAG,EAAE,GACzCA,MAAW,KACXA,MAAW,EAAG,QAAO;AACzB,cAAML,IAAS,MAAMO,EAAO,KAAKF,IAAS,CAAC;AAC3C,eAAIL,KAAuB;AAAA,MAE7B,SAASQ,GAAK;AACZ,eAAAf,EAAO,QAAQe,GACR;AAAA,MACT;AAAA,IACF;AAAA,EACF;AACF;AC7FO,MAAMC,WAAkB,MAAM;AAAA,EACnC,YAAY5E,GAAS;AACnB,UAAMA,CAAO,GAGb,KAAK,SAAS;AAAA,EAChB;AAAA,EAEA,SAAS;AAEP,WAAO;AAAA,MACL,MAAM,KAAK;AAAA,MACX,MAAM,KAAK;AAAA,MACX,QAAQ,KAAK;AAAA,MACb,SAAS,KAAK;AAAA,MACd,OAAO,KAAK;AAAA,IAClB;AAAA,EACE;AAAA,EAEA,SAAS6E,GAAM;AACb,UAAM,IAAI,IAAID,GAAUC,EAAK,OAAO;AACpC,aAAE,OAAOA,EAAK,MACd,EAAE,OAAOA,EAAK,MACd,EAAE,SAASA,EAAK,QAChB,EAAE,QAAQA,EAAK,OACR;AAAA,EACT;AAAA,EAEA,IAAI,uBAAuB;AACzB,WAAO;AAAA,EACT;AACF;AC7BO,MAAMC,UAAsBF,GAAU;AAAA;AAAA;AAAA;AAAA,EAI3C,YAAY5E,GAAS;AACnB;AAAA,MACE,+JAA+JA,CAAO;AAAA,IAC5K,GACI,KAAK,OAAO,KAAK,OAAO8E,EAAc,MACtC,KAAK,OAAO,EAAE,SAAA9E,EAAO;AAAA,EACvB;AACF;AAEA8E,EAAc,OAAO;ACbd,MAAMC,WAA4BH,GAAU;AAAA;AAAA;AAAA;AAAA,EAIjD,YAAYI,GAAU;AACpB,UAAM,iBAAiBA,CAAQ,uCAAuC,GACtE,KAAK,OAAO,KAAK,OAAOD,GAAoB,MAC5C,KAAK,OAAO,EAAE,UAAAC,EAAQ;AAAA,EACxB;AACF;AAEAD,GAAoB,OAAO;ACbpB,SAASE,GAAe9C,GAAGC,GAAG;AAEnC,SAAO,EAAED,IAAIC,MAAM,EAAED,IAAIC;AAC3B;ACDO,SAAS8C,GAAY/C,GAAGC,GAAG;AAEhC,SAAO6C,GAAe9C,EAAE,MAAMC,EAAE,IAAI;AACtC;ACHO,SAAS+C,GAAqBhD,GAAGC,GAAG;AAEzC,SAAO6C,GAAeG,GAAiBjD,CAAC,GAAGiD,GAAiBhD,CAAC,CAAC;AAChE;AAEA,SAASgD,GAAiBC,GAAO;AAC/B,SAAOA,EAAM,SAAS,WAAWA,EAAM,OAAO,MAAMA,EAAM;AAC5D;ACKA,SAASC,GAAUC,GAAM;AAEvB,UAAQA,GAAI;AAAA,IACV,KAAK;AAAU,aAAO;AAAA,IACtB,KAAK;AAAU,aAAO;AAAA,IACtB,KAAK;AAAU,aAAO;AAAA,IACtB,KAAK;AAAU,aAAO;AAAA,IACtB,KAAK;AAAU,aAAO;AAAA,EAC1B;AACE,QAAM,IAAIT,EAAc,kCAAkCS,CAAI,EAAE;AAClE;AAEA,SAASC,GAAYrB,GAAQ;AAC3B,QAAMsB,IAAW,CAAA;AACjB,MAAIC,IAAS;AACb,SAAOA,IAASvB,EAAO,UAAQ;AAC7B,UAAMwB,IAAQxB,EAAO,QAAQ,IAAIuB,CAAM;AACvC,QAAIC,MAAU;AACZ,YAAM,IAAIb;AAAA,QACR,kDAAkDY,CAAM;AAAA,MAChE;AAEI,UAAME,IAAWzB,EAAO,QAAQ,GAAGuB,CAAM;AACzC,QAAIE,MAAa;AACf,YAAM,IAAId;AAAA,QACR,kDAAkDY,CAAM;AAAA,MAChE;AAEI,QAAIH,IAAOpB,EAAO,MAAMuB,GAAQC,CAAK,EAAE,SAAS,MAAM;AACtD,IAAIJ,MAAS,YAASA,IAAO;AAC7B,UAAMM,IAAOP,GAAUC,CAAI,GACrB3H,IAAOuG,EAAO,MAAMwB,IAAQ,GAAGC,CAAQ,EAAE,SAAS,MAAM;AAG9D,QAAIhI,EAAK,SAAS,IAAI,KAAKA,EAAK,SAAS,GAAG;AAC1C,YAAM,IAAImH,GAAoBnH,CAAI;AAGpC,UAAMkI,IAAM3B,EAAO,MAAMyB,IAAW,GAAGA,IAAW,EAAE,EAAE,SAAS,KAAK;AACpE,IAAAF,IAASE,IAAW,IACpBH,EAAS,KAAK,EAAE,MAAAF,GAAM,MAAA3H,GAAM,KAAAkI,GAAK,MAAAD,EAAI,CAAE;AAAA,EACzC;AACA,SAAOJ;AACT;AAEA,SAASM,GAAmBR,GAAM;AAKhC,MAJI,OAAOA,KAAS,aAClBA,IAAOA,EAAK,SAAS,CAAC,IAGpBA,EAAK,MAAM,QAAQ,EAAG,QAAO;AACjC,MAAIA,EAAK,MAAM,SAAS,EAAG,QAAO;AAClC,MAAIA,EAAK,MAAM,SAAS,EAAG,QAAO;AAClC,MAAIA,EAAK,MAAM,QAAQ,EAAG,QAAO;AACjC,MAAIA,EAAK,MAAM,QAAQ,EAAG,QAAO;AACjC,QAAM,IAAIT,EAAc,mCAAmCS,CAAI,EAAE;AACnE;AAEA,SAASS,GAAeX,GAAO;AAC7B,SAAI,CAACA,EAAM,OAAOA,EAAM,QACtBA,EAAM,MAAMA,EAAM,MAEpBA,EAAM,OAAOU,GAAmBV,EAAM,IAAI,GACrCA,EAAM,SACTA,EAAM,OAAOC,GAAUD,EAAM,IAAI,IAE5BA;AACT;AAEO,MAAMY,GAAQ;AAAA,EACnB,YAAYC,GAAS;AACnB,QAAI,OAAO,SAASA,CAAO;AACzB,WAAK,WAAWV,GAAYU,CAAO;AAAA,aAC1B,MAAM,QAAQA,CAAO;AAC9B,WAAK,WAAWA,EAAQ,IAAIF,EAAc;AAAA;AAE1C,YAAM,IAAIlB,EAAc,4CAA4C;AAItE,SAAK,SAAS,KAAKI,EAAW;AAAA,EAChC;AAAA,EAEA,OAAO,KAAK5E,GAAM;AAChB,WAAO,IAAI2F,GAAQ3F,CAAI;AAAA,EACzB;AAAA,EAEA,SAAS;AACP,WAAO,KAAK,SACT,IAAI,CAAA+E,MAAS,GAAGA,EAAM,IAAI,IAAIA,EAAM,IAAI,IAAIA,EAAM,GAAG,OAAOA,EAAM,IAAI,EAAE,EACxE,KAAK;AAAA,CAAI;AAAA,EACd;AAAA,EAEA,WAAW;AAET,UAAMa,IAAU,CAAC,GAAG,KAAK,QAAQ;AACjC,WAAAA,EAAQ,KAAKf,EAAoB,GAC1B,OAAO;AAAA,MACZe,EAAQ,IAAI,CAAAb,MAAS;AACnB,cAAME,IAAO,OAAO,KAAKF,EAAM,KAAK,QAAQ,MAAM,EAAE,CAAC,GAC/CM,IAAQ,OAAO,KAAK,GAAG,GACvB/H,IAAO,OAAO,KAAKyH,EAAM,MAAM,MAAM,GACrCO,IAAW,OAAO,KAAK,CAAC,CAAC,CAAC,GAC1BE,IAAM,OAAO,KAAKT,EAAM,KAAK,KAAK;AACxC,eAAO,OAAO,OAAO,CAACE,GAAMI,GAAO/H,GAAMgI,GAAUE,CAAG,CAAC;AAAA,MACzD,CAAC;AAAA,IACP;AAAA,EACE;AAAA;AAAA;AAAA;AAAA,EAKA,UAAU;AACR,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,EAAE,OAAO,QAAQ,IAAI;AACnB,eAAWT,KAAS,KAAK;AACvB,YAAMA;AAAA,EAEV;AACF;ACvIO,SAASc,GAAa,EAAE,MAAA9C,GAAM,OAAA+C,GAAO,WAAAC,GAAW,gBAAAC,EAAc,GAAI;AACvE,SAAAA,IAAiBC,GAAqBD,CAAc,GAC7C,GAAGjD,CAAI,KAAK+C,CAAK,KAAKC,CAAS,IAAIC,CAAc;AAC1D;AAMA,SAASC,GAAqBC,GAAS;AACrC,QAAMC,IAAOC,GAAWC,GAAoBH,CAAO,CAAC;AACpD,EAAAA,IAAU,KAAK,IAAIA,CAAO;AAC1B,QAAMI,IAAQ,KAAK,MAAMJ,IAAU,EAAE;AACrC,EAAAA,KAAWI,IAAQ;AACnB,MAAIC,IAAW,OAAOD,CAAK,GACvBE,IAAa,OAAON,CAAO;AAC/B,SAAIK,EAAS,SAAS,MAAGA,IAAW,MAAMA,IACtCC,EAAW,SAAS,MAAGA,IAAa,MAAMA,KACtCL,MAAS,KAAK,MAAM,OAAOI,IAAWC;AAChD;AAEA,SAASJ,GAAW,GAAG;AACrB,SAAO,KAAK,KAAK,CAAC,MAAM,OAAO,GAAG,GAAG,EAAE,IAAI,KAAK;AAClD;AAEA,SAASC,GAAoB,GAAG;AAC9B,SAAO,MAAM,IAAI,IAAI,CAAC;AACxB;AC3BO,SAASI,EAAkBC,GAAK;AAErC,SAAAA,IAAMA,EAAI,QAAQ,OAAO,EAAE,GAE3BA,IAAMA,EAAI,QAAQ,QAAQ,EAAE,GAE5BA,IAAMA,EAAI,QAAQ,QAAQ,EAAE,IAAI;AAAA,GACzBA;AACT;ACRO,SAASC,GAAYC,GAAQ;AAClC,QAAM,CAAA,EAAG7D,GAAM+C,GAAOC,GAAWc,CAAM,IAAID,EAAO;AAAA,IAChD;AAAA,EACJ;AACE,SAAO;AAAA,IACL,MAAM7D;AAAA,IACN,OAAO+C;AAAA,IACP,WAAW,OAAOC,CAAS;AAAA,IAC3B,gBAAgBe,GAAoBD,CAAM;AAAA,EAC9C;AACA;AAMA,SAASC,GAAoBD,GAAQ;AACnC,MAAI,CAAA,EAAGV,GAAMG,GAAOJ,CAAO,IAAIW,EAAO,MAAM,oBAAoB;AAChE,SAAAX,KAAWC,MAAS,MAAM,IAAI,OAAO,OAAOG,CAAK,IAAI,KAAK,OAAOJ,CAAO,IACjEG,GAAoBH,CAAO;AACpC;AAEA,SAASG,GAAoB,GAAG;AAC9B,SAAO,MAAM,IAAI,IAAI,CAAC;AACxB;ACnBO,MAAMU,GAAgB;AAAA,EAC3B,YAAYC,GAAK;AACf,QAAI,OAAOA,KAAQ;AACjB,WAAK,OAAOA;AAAA,aACH,OAAO,SAASA,CAAG;AAC5B,WAAK,OAAOA,EAAI,SAAS,MAAM;AAAA,aACtB,OAAOA,KAAQ;AACxB,WAAK,OAAOD,GAAgB,OAAOC,CAAG;AAAA;AAEtC,YAAM,IAAIxC;AAAA,QACR;AAAA,MACR;AAAA,EAEE;AAAA,EAEA,OAAO,KAAKwC,GAAK;AACf,WAAO,IAAID,GAAgBC,CAAG;AAAA,EAChC;AAAA,EAEA,OAAO,OAAOC,GAAK;AACjB,WAAO,UAAUA,EAAI,MAAM;AAAA,OACxBA,EAAI,IAAI;AAAA,MACTA,EAAI,GAAG;AAAA,SACJpB,GAAaoB,EAAI,MAAM,CAAC;AAAA;AAAA,EAE/BA,EAAI,OAAO;AAAA,EACXA,EAAI,SAASA,EAAI,SAAS,EAAE;AAAA,EAC5B;AAAA,EAEA,cAAc;AACZ,WAAO,KAAK,KAAK,MAAM,GAAG,KAAK,KAAK,QAAQ;AAAA;AAAA,CAAM,CAAC;AAAA,EACrD;AAAA,EAEA,UAAU;AACR,UAAMD,IAAM,KAAK,iBAAgB;AACjC,WAAOA,EAAI,MAAMA,EAAI,QAAQ;AAAA;AAAA,CAAM,IAAI,CAAC;AAAA,EAC1C;AAAA,EAEA,QAAQ;AACN,WAAO,OAAO,OAAO,KAAK,QAAO,GAAI;AAAA,MACnC,SAAS,KAAK,QAAO;AAAA,MACrB,QAAQ,KAAK,OAAM;AAAA,IACzB,CAAK;AAAA,EACH;AAAA,EAEA,SAAS;AACP,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,UAAU;AACR,UAAM7H,IAAU,KAAK,YAAW,EAAG,MAAM;AAAA,CAAI,GACvC+H,IAAK,CAAA;AACX,eAAWC,KAAKhI;AACd,MAAIgI,EAAE,CAAC,MAAM,MAEXD,EAAGA,EAAG,SAAS,CAAC,KAAK;AAAA,IAAOC,EAAE,MAAM,CAAC,IAErCD,EAAG,KAAKC,CAAC;AAGb,UAAMF,IAAM,CAAA;AACZ,eAAWE,KAAKD,GAAI;AAClB,YAAME,IAAMD,EAAE,MAAM,GAAGA,EAAE,QAAQ,GAAG,CAAC,GAC/BlE,IAAQkE,EAAE,MAAMA,EAAE,QAAQ,GAAG,IAAI,CAAC;AACxC,MAAI,MAAM,QAAQF,EAAIG,CAAG,CAAC,IACxBH,EAAIG,CAAG,EAAE,KAAKnE,CAAK,IAEnBgE,EAAIG,CAAG,IAAInE;AAAA,IAEf;AACA,WAAIgE,EAAI,WACNA,EAAI,SAASN,GAAYM,EAAI,MAAM,IAEjCA,EAAI,cACNA,EAAI,YAAYN,GAAYM,EAAI,SAAS,IAEpCA;AAAA,EACT;AAAA,EAEA,mBAAmB;AACjB,UAAMD,IAAMP,EAAkB,KAAK,IAAI;AACvC,WAAIO,EAAI,QAAQ;AAAA,8BAAiC,MAAM,KAAWA,IAC3DA,EAAI,MAAM,GAAGA,EAAI,YAAY;AAAA,8BAAiC,CAAC;AAAA,EACxE;AAAA,EAEA,SAAS;AACP,QAAI,KAAK,KAAK,QAAQ;AAAA,8BAAiC,MAAM,GAAI;AACjE,UAAMK,IAAY,KAAK,KAAK;AAAA,MAC1B,KAAK,KAAK,QAAQ,+BAA+B;AAAA,MACjD,KAAK,KAAK,QAAQ,6BAA6B,IAC7C;AAAA,IACR;AACI,WAAOZ,EAAkBY,CAAS;AAAA,EACpC;AAAA,EAEA,UAAU;AACR,WAAO,KAAK,qBAAqB;AAAA;AAAA,EACnC;AAAA,EAEA,WAAW;AACT,WAAO,OAAO,KAAK,KAAK,MAAM,MAAM;AAAA,EACtC;AAAA,EAEA,aAAa,KAAKL,GAAKb,GAAMmB,GAAW;AACtC,UAAMC,IAAUP,EAAI,QAAO;AAC3B,QAAI,EAAE,WAAAK,EAAS,IAAK,MAAMlB,EAAK,EAAE,SAAAoB,GAAS,WAAAD,EAAS,CAAE;AAErD,IAAAD,IAAYZ,EAAkBY,CAAS;AACvC,UAAMG,IAAYD,IAAUF;AAE5B,WAAON,GAAgB,KAAKS,CAAS;AAAA,EACvC;AACF;ACrHO,SAASC,GAAOf,GAAK;AAC1B,SACEA,EACG,KAAI,EACJ,MAAM;AAAA,CAAI,EACV,IAAI,CAAAgB,MAAK,MAAMA,CAAC,EAChB,KAAK;AAAA,CAAI,IAAI;AAAA;AAEpB;ACRO,SAASC,GAAQjB,GAAK;AAC3B,SAAOA,EACJ,MAAM;AAAA,CAAI,EACV,IAAI,CAAAgB,MAAKA,EAAE,QAAQ,MAAM,EAAE,CAAC,EAC5B,KAAK;AAAA,CAAI;AACd;ACEO,MAAME,EAAU;AAAA,EACrB,YAAYC,GAAQ;AAClB,QAAI,OAAOA,KAAW;AACpB,WAAK,UAAUA;AAAA,aACN,OAAO,SAASA,CAAM;AAC/B,WAAK,UAAUA,EAAO,SAAS,MAAM;AAAA,aAC5B,OAAOA,KAAW;AAC3B,WAAK,UAAUD,EAAU,OAAOC,CAAM;AAAA;AAEtC,YAAM,IAAIrD,EAAc,8CAA8C;AAAA,EAE1E;AAAA,EAEA,OAAO,qBAAqB,EAAE,SAAA+C,GAAS,WAAAF,KAAa;AAClD,UAAMlI,IAAUyI,EAAU,YAAYL,CAAO,GACvC7H,IAAUkI,EAAU,YAAYL,CAAO,GACvCM,IAASpB;AAAA,MACbtH,IAAU;AAAA,UAAasI,GAAOJ,CAAS,IAAI;AAAA,IAAO3H;AAAA,IACxD;AACI,WAAO,IAAIkI,EAAUC,CAAM;AAAA,EAC7B;AAAA,EAEA,OAAO,KAAKA,GAAQ;AAClB,WAAO,IAAID,EAAUC,CAAM;AAAA,EAC7B;AAAA,EAEA,WAAW;AACT,WAAO,OAAO,KAAK,KAAK,SAAS,MAAM;AAAA,EACzC;AAAA;AAAA,EAGA,UAAU;AACR,WAAO,KAAK,aAAY;AAAA,EAC1B;AAAA;AAAA,EAGA,UAAU;AACR,WAAOD,EAAU,YAAY,KAAK,OAAO;AAAA,EAC3C;AAAA,EAEA,QAAQ;AACN,WAAO,OAAO,OAAO,EAAE,SAAS,KAAK,QAAO,EAAE,GAAI,KAAK,QAAO,CAAE;AAAA,EAClE;AAAA,EAEA,OAAO,YAAYC,GAAQ;AACzB,WAAOpB,EAAkBoB,EAAO,MAAMA,EAAO,QAAQ;AAAA;AAAA,CAAM,IAAI,CAAC,CAAC;AAAA,EACnE;AAAA,EAEA,OAAO,YAAYA,GAAQ;AACzB,WAAOA,EAAO,MAAM,GAAGA,EAAO,QAAQ;AAAA;AAAA,CAAM,CAAC;AAAA,EAC/C;AAAA,EAEA,eAAe;AACb,UAAM1I,IAAUyI,EAAU,YAAY,KAAK,OAAO,EAAE,MAAM;AAAA,CAAI,GACxDV,IAAK,CAAA;AACX,eAAWC,KAAKhI;AACd,MAAIgI,EAAE,CAAC,MAAM,MAEXD,EAAGA,EAAG,SAAS,CAAC,KAAK;AAAA,IAAOC,EAAE,MAAM,CAAC,IAErCD,EAAG,KAAKC,CAAC;AAGb,UAAMF,IAAM;AAAA,MACV,QAAQ,CAAA;AAAA,IACd;AACI,eAAWE,KAAKD,GAAI;AAClB,YAAME,IAAMD,EAAE,MAAM,GAAGA,EAAE,QAAQ,GAAG,CAAC,GAC/BlE,IAAQkE,EAAE,MAAMA,EAAE,QAAQ,GAAG,IAAI,CAAC;AACxC,MAAI,MAAM,QAAQF,EAAIG,CAAG,CAAC,IACxBH,EAAIG,CAAG,EAAE,KAAKnE,CAAK,IAEnBgE,EAAIG,CAAG,IAAInE;AAAA,IAEf;AACA,WAAIgE,EAAI,WACNA,EAAI,SAASN,GAAYM,EAAI,MAAM,IAEjCA,EAAI,cACNA,EAAI,YAAYN,GAAYM,EAAI,SAAS,IAEpCA;AAAA,EACT;AAAA,EAEA,OAAO,cAAcA,GAAK;AACxB,QAAI9H,IAAU;AAMd,QALI8H,EAAI,OACN9H,KAAW,QAAQ8H,EAAI,IAAI;AAAA,IAE3B9H,KAAW;AAAA,GAET8H,EAAI,QAAQ;AACd,UAAIA,EAAI,OAAO,WAAW;AACxB,cAAM,IAAIzC,EAAc,6CAA6C;AAEvE,iBAAWlC,KAAK2E,EAAI;AAClB,QAAA9H,KAAW,UAAUmD,CAAC;AAAA;AAAA,IAE1B;AACA,UAAMsE,IAASK,EAAI;AACnB,IAAA9H,KAAW,UAAU0G,GAAae,CAAM,CAAC;AAAA;AACzC,UAAMkB,IAAYb,EAAI,aAAaA,EAAI;AACvC,WAAA9H,KAAW,aAAa0G,GAAaiC,CAAS,CAAC;AAAA,GAC3Cb,EAAI,WACN9H,KAAW,WAAWsI,GAAOR,EAAI,MAAM,IAElC9H;AAAA,EACT;AAAA,EAEA,OAAO,OAAO8H,GAAK;AACjB,WAAOW,EAAU,cAAcX,CAAG,IAAI;AAAA,IAAOR,EAAkBQ,EAAI,OAAO;AAAA,EAC5E;AAAA,EAEA,SAAS;AACP,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,mBAAmB;AACjB,UAAMY,IAASpB,EAAkB,KAAK,OAAO;AAC7C,QAAIoB,EAAO,QAAQ;AAAA,OAAU,MAAM,GAAI,QAAOA;AAC9C,UAAM1I,IAAU0I,EAAO,MAAM,GAAGA,EAAO,QAAQ;AAAA,OAAU,CAAC,GACpDnI,IAAUmI,EAAO;AAAA,MACrBA,EAAO,QAAQ;AAAA,CAA+B,IAC5C;AAAA,IACR;AACI,WAAOpB,EAAkBtH,IAAU;AAAA,IAAOO,CAAO;AAAA,EACnD;AAAA,EAEA,mBAAmB;AACjB,UAAM2H,IAAY,KAAK,QAAQ;AAAA,MAC7B,KAAK,QAAQ,QAAQ,+BAA+B;AAAA,MACpD,KAAK,QAAQ,QAAQ,6BAA6B,IAChD;AAAA,IACR;AACI,WAAOM,GAAQN,CAAS;AAAA,EAC1B;AAAA,EAEA,aAAa,KAAKQ,GAAQ1B,GAAMmB,GAAW;AACzC,UAAMC,IAAUM,EAAO,iBAAgB,GACjCnI,IAAUkI,EAAU,YAAYC,EAAO,OAAO;AACpD,QAAI,EAAE,WAAAR,EAAS,IAAK,MAAMlB,EAAK,EAAE,SAAAoB,GAAS,WAAAD,EAAS,CAAE;AAErD,IAAAD,IAAYZ,EAAkBY,CAAS;AAEvC,UAAMU,IADUH,EAAU,YAAYC,EAAO,OAAO,IAExC;AAAA,UAAkBJ,GAAOJ,CAAS,IAAI;AAAA,IAAO3H;AAEzD,WAAOkI,EAAU,KAAKG,CAAY;AAAA,EACpC;AACF;AC1JO,MAAMC,GAAU;AAAA,EACrB,OAAO,KAAK,EAAE,MAAAzC,GAAM,QAAA0C,KAAU;AAC5B,WAAO,OAAO,OAAO;AAAA,MACnB,OAAO,KAAK,GAAG1C,CAAI,IAAI0C,EAAO,WAAW,UAAU,IAAM;AAAA,MACzD,OAAO,KAAKA,CAAM;AAAA,IACxB,CAAK;AAAA,EACH;AAAA,EAEA,OAAO,OAAOpE,GAAQ;AACpB,UAAME,IAAIF,EAAO,QAAQ,EAAE,GACrBpF,IAAIoF,EAAO,QAAQ,CAAC,GACpB0B,IAAO1B,EAAO,MAAM,GAAGE,CAAC,EAAE,SAAS,MAAM,GACzCG,IAASL,EAAO,MAAME,IAAI,GAAGtF,CAAC,EAAE,SAAS,MAAM,GAC/CyJ,IAAerE,EAAO,UAAUpF,IAAI;AAE1C,QAAI,SAASyF,CAAM,MAAMgE;AACvB,YAAM,IAAI1D;AAAA,QACR,6BAA6BN,CAAM,kBAAkBgE,CAAY;AAAA,MACzE;AAEI,WAAO;AAAA,MACL,MAAA3C;AAAA,MACA,QAAQ,OAAO,KAAK1B,EAAO,MAAMpF,IAAI,CAAC,CAAC;AAAA,IAC7C;AAAA,EACE;AACF;ACzBO,MAAM0J,EAAa;AAAA,EACxB,YAAYtE,GAAQ;AAClB,SAAK,SAASA,GACd,KAAK,SAAS;AAAA,EAChB;AAAA,EAEA,MAAM;AACJ,WAAO,KAAK,UAAU,KAAK,OAAO;AAAA,EACpC;AAAA,EAEA,OAAO;AACL,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,KAAKN,GAAG;AACN,SAAK,SAASA;AAAA,EAChB;AAAA,EAEA,MAAMA,GAAG;AACP,UAAM6E,IAAI,KAAK,OAAO,MAAM,KAAK,QAAQ,KAAK,SAAS7E,CAAC;AACxD,gBAAK,UAAUA,GACR6E;AAAA,EACT;AAAA,EAEA,SAASC,GAAKnE,GAAQ;AACpB,UAAM,IAAI,KAAK,OAAO,SAASmE,GAAK,KAAK,QAAQ,KAAK,SAASnE,CAAM;AACrE,gBAAK,UAAUA,GACR;AAAA,EACT;AAAA,EAEA,MAAMjB,GAAOiB,GAAQmE,GAAK;AACxB,UAAMD,IAAI,KAAK,OAAO,MAAMnF,GAAO,KAAK,QAAQiB,GAAQmE,CAAG;AAC3D,gBAAK,UAAUnE,GACRkE;AAAA,EACT;AAAA,EAEA,KAAKE,GAAQC,GAAOC,GAAK;AACvB,UAAMJ,IAAIE,EAAO,KAAK,KAAK,QAAQ,KAAK,QAAQC,GAAOC,CAAG;AAC1D,gBAAK,UAAUJ,GACRA;AAAA,EACT;AAAA,EAEA,YAAY;AACV,UAAMA,IAAI,KAAK,OAAO,UAAU,KAAK,MAAM;AAC3C,gBAAK,UAAU,GACRA;AAAA,EACT;AAAA,EAEA,WAAWnF,GAAO;AAChB,UAAMmF,IAAI,KAAK,OAAO,WAAWnF,GAAO,KAAK,MAAM;AACnD,gBAAK,UAAU,GACRmF;AAAA,EACT;AAAA,EAEA,eAAe;AACb,UAAMA,IAAI,KAAK,OAAO,aAAa,KAAK,MAAM;AAC9C,gBAAK,UAAU,GACRA;AAAA,EACT;AAAA,EAEA,cAAcnF,GAAO;AACnB,UAAMmF,IAAI,KAAK,OAAO,cAAcnF,GAAO,KAAK,MAAM;AACtD,gBAAK,UAAU,GACRmF;AAAA,EACT;AAAA,EAEA,eAAe;AACb,UAAMA,IAAI,KAAK,OAAO,aAAa,KAAK,MAAM;AAC9C,gBAAK,UAAU,GACRA;AAAA,EACT;AAAA,EAEA,cAAcnF,GAAO;AACnB,UAAMmF,IAAI,KAAK,OAAO,cAAcnF,GAAO,KAAK,MAAM;AACtD,gBAAK,UAAU,GACRmF;AAAA,EACT;AACF;ACvEO,SAASK,GAAWC,GAAOJ,GAAQ;AACxC,QAAMlE,IAAS,IAAI+D,EAAaO,CAAK,GAC/BC,IAAaC,GAAaxE,CAAM;AAEtC,MAAIuE,MAAeL,EAAO;AACxB,UAAM,IAAI9D;AAAA,MACR,2CAA2CmE,CAAU,sCAAsCL,EAAO,MAAM;AAAA,IAC9G;AAEE,QAAMO,IAAaD,GAAaxE,CAAM;AACtC,MAAI0E;AAEJ,QAAMC,IAAUC,GAAO5E,GAAQkE,CAAM;AAErC,MAAIS,EAAQ,eAAeF;AACzB,IAAAC,IAASC;AAAA,OACJ;AAEL,IAAAD,IAAS,OAAO,MAAMD,CAAU;AAChC,UAAMI,IAAS,IAAId,EAAaW,CAAM;AAGtC,SAFAG,EAAO,KAAKF,CAAO,GAEZ,CAAC3E,EAAO;AACb,MAAA6E,EAAO,KAAKD,GAAO5E,GAAQkE,CAAM,CAAC;AAGpC,UAAMY,IAAOD,EAAO,KAAI;AACxB,QAAIJ,MAAeK;AACjB,YAAM,IAAI1E;AAAA,QACR,2CAA2CqE,CAAU,uCAAuCK,CAAI;AAAA,MACxG;AAAA,EAEE;AACA,SAAOJ;AACT;AAEA,SAASF,GAAaxE,GAAQ;AAC5B,MAAIrH,IAAS,GACToM,IAAQ,GACRC,IAAO;AACX;AACE,IAAAA,IAAOhF,EAAO,UAAS,GACvBrH,MAAWqM,IAAO,QAAeD,GACjCA,KAAS;AAAA,SACFC,IAAO;AAChB,SAAOrM;AACT;AAEA,SAASsM,GAAcjF,GAAQkF,GAAOC,GAAM;AAC1C,MAAIxM,IAAS,GACToM,IAAQ;AACZ,SAAOI;AACL,IAAID,IAAQ,MACVvM,KAAUqH,EAAO,eAAe+E,IAElCG,MAAU,GACVH,KAAS;AAEX,SAAOpM;AACT;AAEA,SAASiM,GAAO5E,GAAQkE,GAAQ;AAE9B,QAAMc,IAAOhF,EAAO,UAAS,GACvBoF,IAAO,KACPC,IAAO,IACPC,IAAO;AACb,MAAIN,IAAOI,GAAM;AAEf,UAAM3C,IAASwC,GAAcjF,GAAQgF,IAAOK,GAAM,CAAC;AACnD,QAAIF,IAAOF,GAAcjF,IAASgF,IAAOM,MAAS,GAAG,CAAC;AAEtD,WAAIH,MAAS,MAAGA,IAAO,QAChBjB,EAAO,MAAMzB,GAAQA,IAAS0C,CAAI;AAAA,EAC3C;AAEE,WAAOnF,EAAO,MAAMgF,CAAI;AAE5B;AC9EO,eAAeO,GAASrG,GAAQsG,GAAQ;AAC7C,QAAMxF,IAAS,IAAIf,GAAaC,CAAM;AACtC,MAAIuG,IAAO,MAAMzF,EAAO,KAAK,CAAC;AAE9B,MADAyF,IAAOA,EAAK,SAAS,MAAM,GACvBA,MAAS;AACX,UAAM,IAAIrF,EAAc,wBAAwBqF,CAAI,GAAG;AAGzD,MAAIC,IAAU,MAAM1F,EAAO,KAAK,CAAC;AAEjC,MADA0F,IAAUA,EAAQ,aAAa,CAAC,GAC5BA,MAAY;AACd,UAAM,IAAItF,EAAc,6BAA6BsF,CAAO,EAAE;AAGhE,MAAIC,IAAa,MAAM3F,EAAO,KAAK,CAAC;AAGpC,MAFA2F,IAAaA,EAAW,aAAa,CAAC,GAElC,EAAAA,IAAa;AAEjB,WAAO,CAAC3F,EAAO,IAAG,KAAM2F,OAAc;AACpC,YAAMlD,IAASzC,EAAO,KAAI,GACpB,EAAE,MAAAmB,GAAM,QAAArB,GAAQ,KAAA8F,GAAK,WAAAC,EAAS,IAAK,MAAMC,GAAY9F,CAAM,GAC3D+F,IAAW,IAAIC,GAAK,QAAO;AACjC,aAAO,CAACD,EAAS,UAAQ;AACvB,cAAME,IAAQ,MAAMjG,EAAO,MAAK;AAChC,YAAI,CAACiG,EAAO;AAEZ,YADAF,EAAS,KAAKE,GAAO,EAAK,GACtBF,EAAS;AACX,gBAAM,IAAI3F,EAAc,eAAe2F,EAAS,GAAG,EAAE;AAEvD,YAAIA,EAAS,QAAQ;AACnB,cAAIA,EAAS,OAAO,WAAWjG;AAC7B,kBAAM,IAAIM;AAAA,cACR;AAAA,YACZ;AAIQ,gBAAMJ,EAAO,KAAI,GACjB,MAAMA,EAAO,KAAKiG,EAAM,SAASF,EAAS,KAAK,QAAQ;AACvD,gBAAM3B,IAAMpE,EAAO,KAAI;AACvB,gBAAMwF,EAAO;AAAA,YACX,MAAMO,EAAS;AAAA,YACf,MAAA5E;AAAA,YACA,KAAKwE;AAAA,YACL,QAAAlD;AAAA,YACA,KAAA2B;AAAA,YACA,WAAAyB;AAAA,YACA,KAAAD;AAAA,UACV,CAAS;AAAA,QACH;AAAA,MACF;AAAA,IACF;AACF;AAEA,eAAeE,GAAY9F,GAAQ;AAEjC,MAAIgF,IAAO,MAAMhF,EAAO,KAAI;AAC5B,QAAMmB,IAAQ6D,KAAQ,IAAK;AAG3B,MAAIlF,IAASkF,IAAO;AAGpB,MAAIA,IAAO,KAAY;AACrB,QAAID,IAAQ;AACZ;AACE,MAAAC,IAAO,MAAMhF,EAAO,KAAI,GACxBF,MAAWkF,IAAO,QAAeD,GACjCA,KAAS;AAAA,WACFC,IAAO;AAAA,EAClB;AAEA,MAAIY,GACAC;AACJ,MAAI1E,MAAS,GAAG;AACd,QAAI4D,IAAQ;AACZ,IAAAa,IAAM;AACN,UAAMxL,IAAQ,CAAA;AACd;AACE,MAAA4K,IAAO,MAAMhF,EAAO,KAAI,GACxB4F,MAAQZ,IAAO,QAAeD,GAC9BA,KAAS,GACT3K,EAAM,KAAK4K,CAAI;AAAA,WACRA,IAAO;AAChB,IAAAa,IAAY,OAAO,KAAKzL,CAAK;AAAA,EAC/B;AACA,SAAI+G,MAAS,MAEX0E,IADY,MAAM7F,EAAO,KAAK,EAAE,IAG3B,EAAE,MAAAmB,GAAM,QAAArB,GAAQ,KAAA8F,GAAK,WAAAC,EAAS;AACvC;AC9FO,eAAeK,GAAQzG,GAAQ;AAIpC,SAEIuG,GAAK,QAAQvG,CAAM;AACzB;;;;;;ACbI,OAAO,OAAO,UAAW,aAE3B0G,GAAA,UAAiB,SAAkBC,GAAMC,GAAW;AAClD,EAAIA,MACFD,EAAK,SAASC,GACdD,EAAK,YAAY,OAAO,OAAOC,EAAU,WAAW;AAAA,IAClD,aAAa;AAAA,MACX,OAAOD;AAAA,MACP,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,cAAc;AAAA,IACxB;AAAA,EACA,CAAO;AAEP,IAGED,GAAA,UAAiB,SAAkBC,GAAMC,GAAW;AAClD,MAAIA,GAAW;AACb,IAAAD,EAAK,SAASC;AACd,QAAIC,IAAW,WAAY;AAAA,IAAA;AAC3B,IAAAA,EAAS,YAAYD,EAAU,WAC/BD,EAAK,YAAY,IAAIE,EAAQ,GAC7BF,EAAK,UAAU,cAAcA;AAAA,EACnC;AACA;;ACvBAG,GAAA,aAAqBC;AACrBD,GAAA,cAAsBE;AACtBF,GAAA,gBAAwBG;AAExB,IAAIC,IAAS,CAAA,GACTC,IAAY,CAAA,GACZC,KAAM,OAAO,aAAe,MAAc,aAAa,OAEvDC,KAAO;AACX,SAASzM,IAAI,GAAGF,KAAM2M,GAAK,QAAQzM,IAAIF,IAAK,EAAEE;AAC5C,EAAAsM,EAAOtM,CAAC,IAAIyM,GAAKzM,CAAC,GAClBuM,EAAUE,GAAK,WAAWzM,CAAC,CAAC,IAAIA;AAKlCuM,EAAU,EAAiB,IAAI;AAC/BA,EAAU,EAAiB,IAAI;AAE/B,SAASG,GAASC,GAAK;AACrB,MAAI7M,IAAM6M,EAAI;AAEd,MAAI7M,IAAM,IAAI;AACZ,UAAM,IAAI,MAAM,gDAAgD;AAKlE,MAAI8M,IAAWD,EAAI,QAAQ,GAAG;AAC9B,EAAIC,MAAa,OAAIA,IAAW9M;AAEhC,MAAI+M,IAAkBD,MAAa9M,IAC/B,IACA,IAAK8M,IAAW;AAEpB,SAAO,CAACA,GAAUC,CAAe;AACnC;AAGA,SAASV,GAAYQ,GAAK;AACxB,MAAIG,IAAOJ,GAAQC,CAAG,GAClBC,IAAWE,EAAK,CAAC,GACjBD,IAAkBC,EAAK,CAAC;AAC5B,UAASF,IAAWC,KAAmB,IAAI,IAAKA;AAClD;AAEA,SAASE,GAAaJ,GAAKC,GAAUC,GAAiB;AACpD,UAASD,IAAWC,KAAmB,IAAI,IAAKA;AAClD;AAEA,SAAST,GAAaO,GAAK;AACzB,MAAIK,GACAF,IAAOJ,GAAQC,CAAG,GAClBC,IAAWE,EAAK,CAAC,GACjBD,IAAkBC,EAAK,CAAC,GAExBG,IAAM,IAAIT,GAAIO,GAAYJ,GAAKC,GAAUC,CAAe,CAAC,GAEzDK,IAAU,GAGVpN,IAAM+M,IAAkB,IACxBD,IAAW,IACXA,GAEA5M;AACJ,OAAKA,IAAI,GAAGA,IAAIF,GAAKE,KAAK;AACxB,IAAAgN,IACGT,EAAUI,EAAI,WAAW3M,CAAC,CAAC,KAAK,KAChCuM,EAAUI,EAAI,WAAW3M,IAAI,CAAC,CAAC,KAAK,KACpCuM,EAAUI,EAAI,WAAW3M,IAAI,CAAC,CAAC,KAAK,IACrCuM,EAAUI,EAAI,WAAW3M,IAAI,CAAC,CAAC,GACjCiN,EAAIC,GAAS,IAAKF,KAAO,KAAM,KAC/BC,EAAIC,GAAS,IAAKF,KAAO,IAAK,KAC9BC,EAAIC,GAAS,IAAIF,IAAM;AAGzB,SAAIH,MAAoB,MACtBG,IACGT,EAAUI,EAAI,WAAW3M,CAAC,CAAC,KAAK,IAChCuM,EAAUI,EAAI,WAAW3M,IAAI,CAAC,CAAC,KAAK,GACvCiN,EAAIC,GAAS,IAAIF,IAAM,MAGrBH,MAAoB,MACtBG,IACGT,EAAUI,EAAI,WAAW3M,CAAC,CAAC,KAAK,KAChCuM,EAAUI,EAAI,WAAW3M,IAAI,CAAC,CAAC,KAAK,IACpCuM,EAAUI,EAAI,WAAW3M,IAAI,CAAC,CAAC,KAAK,GACvCiN,EAAIC,GAAS,IAAKF,KAAO,IAAK,KAC9BC,EAAIC,GAAS,IAAIF,IAAM,MAGlBC;AACT;AAEA,SAASE,GAAiBC,GAAK;AAC7B,SAAOd,EAAOc,KAAO,KAAK,EAAI,IAC5Bd,EAAOc,KAAO,KAAK,EAAI,IACvBd,EAAOc,KAAO,IAAI,EAAI,IACtBd,EAAOc,IAAM,EAAI;AACrB;AAEA,SAASC,GAAaC,GAAOxD,GAAOC,GAAK;AAGvC,WAFIiD,GACAO,IAAS,CAAA,GACJvN,IAAI8J,GAAO9J,IAAI+J,GAAK/J,KAAK;AAChC,IAAAgN,KACIM,EAAMtN,CAAC,KAAK,KAAM,aAClBsN,EAAMtN,IAAI,CAAC,KAAK,IAAK,UACtBsN,EAAMtN,IAAI,CAAC,IAAI,MAClBuN,EAAO,KAAKJ,GAAgBH,CAAG,CAAC;AAElC,SAAOO,EAAO,KAAK,EAAE;AACvB;AAEA,SAASlB,GAAeiB,GAAO;AAQ7B,WAPIN,GACAlN,IAAMwN,EAAM,QACZE,IAAa1N,IAAM,GACnB8D,IAAQ,CAAA,GACR6J,IAAiB,OAGZzN,IAAI,GAAG0N,IAAO5N,IAAM0N,GAAYxN,IAAI0N,GAAM1N,KAAKyN;AACtD,IAAA7J,EAAM,KAAKyJ,GAAYC,GAAOtN,GAAIA,IAAIyN,IAAkBC,IAAOA,IAAQ1N,IAAIyN,CAAe,CAAC;AAI7F,SAAID,MAAe,KACjBR,IAAMM,EAAMxN,IAAM,CAAC,GACnB8D,EAAM;AAAA,IACJ0I,EAAOU,KAAO,CAAC,IACfV,EAAQU,KAAO,IAAK,EAAI,IACxB;AAAA,EACN,KACaQ,MAAe,MACxBR,KAAOM,EAAMxN,IAAM,CAAC,KAAK,KAAKwN,EAAMxN,IAAM,CAAC,GAC3C8D,EAAM;AAAA,IACJ0I,EAAOU,KAAO,EAAE,IAChBV,EAAQU,KAAO,IAAK,EAAI,IACxBV,EAAQU,KAAO,IAAK,EAAI,IACxB;AAAA,EACN,IAGSpJ,EAAM,KAAK,EAAE;AACtB;;;ACpJA+J,GAAA,OAAe,SAAUvI,GAAQgD,GAAQwF,GAAMC,GAAMC,GAAQ;AAC3D,MAAIC,GAAGC,GACHC,IAAQH,IAAS,IAAKD,IAAO,GAC7BK,KAAQ,KAAKD,KAAQ,GACrBE,IAAQD,KAAQ,GAChBE,IAAQ,IACRpO,IAAI4N,IAAQE,IAAS,IAAK,GAC1BO,IAAIT,IAAO,KAAK,GAChBtI,IAAIF,EAAOgD,IAASpI,CAAC;AAOzB,OALAA,KAAKqO,GAELN,IAAIzI,KAAM,KAAM,CAAC8I,KAAU,GAC3B9I,MAAO,CAAC8I,GACRA,KAASH,GACFG,IAAQ,GAAGL,IAAKA,IAAI,MAAO3I,EAAOgD,IAASpI,CAAC,GAAGA,KAAKqO,GAAGD,KAAS;AAAG;AAK1E,OAHAJ,IAAID,KAAM,KAAM,CAACK,KAAU,GAC3BL,MAAO,CAACK,GACRA,KAASP,GACFO,IAAQ,GAAGJ,IAAKA,IAAI,MAAO5I,EAAOgD,IAASpI,CAAC,GAAGA,KAAKqO,GAAGD,KAAS;AAAG;AAE1E,MAAIL,MAAM;AACR,IAAAA,IAAI,IAAII;AAAA,OACH;AAAA,QAAIJ,MAAMG;AACf,aAAOF,IAAI,OAAQ1I,IAAI,KAAK,KAAK;AAEjC,IAAA0I,IAAIA,IAAI,KAAK,IAAI,GAAGH,CAAI,GACxBE,IAAIA,IAAII;AAAA;AAEV,UAAQ7I,IAAI,KAAK,KAAK0I,IAAI,KAAK,IAAI,GAAGD,IAAIF,CAAI;AAChD;AAEAF,GAAA,QAAgB,SAAUvI,GAAQZ,GAAO4D,GAAQwF,GAAMC,GAAMC,GAAQ;AACnE,MAAIC,GAAGC,GAAGM,GACNL,IAAQH,IAAS,IAAKD,IAAO,GAC7BK,KAAQ,KAAKD,KAAQ,GACrBE,IAAQD,KAAQ,GAChBK,IAAMV,MAAS,KAAK,KAAK,IAAI,GAAG,GAAG,IAAI,KAAK,IAAI,GAAG,GAAG,IAAI,GAC1D7N,IAAI4N,IAAO,IAAKE,IAAS,GACzBO,IAAIT,IAAO,IAAI,IACftI,IAAId,IAAQ,KAAMA,MAAU,KAAK,IAAIA,IAAQ,IAAK,IAAI;AAmC1D,OAjCAA,IAAQ,KAAK,IAAIA,CAAK,GAElB,MAAMA,CAAK,KAAKA,MAAU,SAC5BwJ,IAAI,MAAMxJ,CAAK,IAAI,IAAI,GACvBuJ,IAAIG,MAEJH,IAAI,KAAK,MAAM,KAAK,IAAIvJ,CAAK,IAAI,KAAK,GAAG,GACrCA,KAAS8J,IAAI,KAAK,IAAI,GAAG,CAACP,CAAC,KAAK,MAClCA,KACAO,KAAK,IAEHP,IAAII,KAAS,IACf3J,KAAS+J,IAAKD,IAEd9J,KAAS+J,IAAK,KAAK,IAAI,GAAG,IAAIJ,CAAK,GAEjC3J,IAAQ8J,KAAK,MACfP,KACAO,KAAK,IAGHP,IAAII,KAASD,KACfF,IAAI,GACJD,IAAIG,KACKH,IAAII,KAAS,KACtBH,KAAMxJ,IAAQ8J,IAAK,KAAK,KAAK,IAAI,GAAGT,CAAI,GACxCE,IAAIA,IAAII,MAERH,IAAIxJ,IAAQ,KAAK,IAAI,GAAG2J,IAAQ,CAAC,IAAI,KAAK,IAAI,GAAGN,CAAI,GACrDE,IAAI,KAIDF,KAAQ,GAAGzI,EAAOgD,IAASpI,CAAC,IAAIgO,IAAI,KAAMhO,KAAKqO,GAAGL,KAAK,KAAKH,KAAQ;AAAG;AAI9E,OAFAE,IAAKA,KAAKF,IAAQG,GAClBC,KAAQJ,GACDI,IAAO,GAAG7I,EAAOgD,IAASpI,CAAC,IAAI+N,IAAI,KAAM/N,KAAKqO,GAAGN,KAAK,KAAKE,KAAQ;AAAG;AAE7E,EAAA7I,EAAOgD,IAASpI,IAAIqO,CAAC,KAAK/I,IAAI;AAChC;;;;;;;;AC1EA,MAAI1F,IAAS4O,IACTb,IAAUc,IACVC,IACD,OAAO,UAAW,cAAc,OAAO,OAAO,OAAW,aACtD,OAAO,IAAO,4BAA4B,IAC1C;AAENC,EAAAA,EAAA,SAAiBC,GACjBD,EAAA,aAAqBE,GACrBF,EAAA,oBAA4B;AAE5B,MAAIG,IAAe;AACnBH,EAAAA,EAAA,aAAqBG,GAgBrBF,EAAO,sBAAsBG,EAAiB,GAE1C,CAACH,EAAO,uBAAuB,OAAO,UAAY,OAClD,OAAO,QAAQ,SAAU,cAC3B,QAAQ;AAAA,IACN;AAAA;AAKJ,WAASG,IAAqB;AAE5B,QAAI;AACF,UAAI9B,IAAM,IAAI,WAAW,CAAC,GACtB+B,IAAQ,EAAE,KAAK,WAAY;AAAE,eAAO;AAAA,MAAE,EAAE;AAC5C,oBAAO,eAAeA,GAAO,WAAW,SAAS,GACjD,OAAO,eAAe/B,GAAK+B,CAAK,GACzB/B,EAAI,UAAU;AAAA,IACzB,QAAc;AACV,aAAO;AAAA,IACX;AAAA,EACA;AAEA,SAAO,eAAe2B,EAAO,WAAW,UAAU;AAAA,IAChD,YAAY;AAAA,IACZ,KAAK,WAAY;AACf,UAAKA,EAAO,SAAS,IAAI;AACzB,eAAO,KAAK;AAAA,IAChB;AAAA,EACA,CAAC,GAED,OAAO,eAAeA,EAAO,WAAW,UAAU;AAAA,IAChD,YAAY;AAAA,IACZ,KAAK,WAAY;AACf,UAAKA,EAAO,SAAS,IAAI;AACzB,eAAO,KAAK;AAAA,IAChB;AAAA,EACA,CAAC;AAED,WAASK,EAAcxJ,GAAQ;AAC7B,QAAIA,IAASqJ;AACX,YAAM,IAAI,WAAW,gBAAgBrJ,IAAS,gCAAgC;AAGhF,QAAIyJ,IAAM,IAAI,WAAWzJ,CAAM;AAC/B,kBAAO,eAAeyJ,GAAKN,EAAO,SAAS,GACpCM;AAAA,EACT;AAYA,WAASN,EAAQO,GAAKC,GAAkB3J,GAAQ;AAE9C,QAAI,OAAO0J,KAAQ,UAAU;AAC3B,UAAI,OAAOC,KAAqB;AAC9B,cAAM,IAAI;AAAA,UACR;AAAA;AAGJ,aAAOC,EAAYF,CAAG;AAAA,IAC1B;AACE,WAAOG,EAAKH,GAAKC,GAAkB3J,CAAM;AAAA,EAC3C;AAEA,EAAAmJ,EAAO,WAAW;AAElB,WAASU,EAAM9K,GAAO4K,GAAkB3J,GAAQ;AAC9C,QAAI,OAAOjB,KAAU;AACnB,aAAO+K,EAAW/K,GAAO4K,CAAgB;AAG3C,QAAI,YAAY,OAAO5K,CAAK;AAC1B,aAAOgL,EAAchL,CAAK;AAG5B,QAAIA,KAAS;AACX,YAAM,IAAI;AAAA,QACR,oHAC0C,OAAOA;AAAA;AASrD,QALIiL,EAAWjL,GAAO,WAAW,KAC5BA,KAASiL,EAAWjL,EAAM,QAAQ,WAAW,KAI9C,OAAO,oBAAsB,QAC5BiL,EAAWjL,GAAO,iBAAiB,KACnCA,KAASiL,EAAWjL,EAAM,QAAQ,iBAAiB;AACtD,aAAOkL,EAAgBlL,GAAO4K,GAAkB3J,CAAM;AAGxD,QAAI,OAAOjB,KAAU;AACnB,YAAM,IAAI;AAAA,QACR;AAAA;AAIJ,QAAImL,IAAUnL,EAAM,WAAWA,EAAM,QAAO;AAC5C,QAAImL,KAAW,QAAQA,MAAYnL;AACjC,aAAOoK,EAAO,KAAKe,GAASP,GAAkB3J,CAAM;AAGtD,QAAIpC,IAAIuM,EAAWpL,CAAK;AACxB,QAAInB,EAAG,QAAOA;AAEd,QAAI,OAAO,SAAW,OAAe,OAAO,eAAe,QACvD,OAAOmB,EAAM,OAAO,WAAW,KAAM;AACvC,aAAOoK,EAAO;AAAA,QACZpK,EAAM,OAAO,WAAW,EAAE,QAAQ;AAAA,QAAG4K;AAAA,QAAkB3J;AAAA;AAI3D,UAAM,IAAI;AAAA,MACR,oHAC0C,OAAOjB;AAAA;EAErD;AAUA,EAAAoK,EAAO,OAAO,SAAUpK,GAAO4K,GAAkB3J,GAAQ;AACvD,WAAO6J,EAAK9K,GAAO4K,GAAkB3J,CAAM;AAAA,EAC7C,GAIA,OAAO,eAAemJ,EAAO,WAAW,WAAW,SAAS,GAC5D,OAAO,eAAeA,GAAQ,UAAU;AAExC,WAASiB,EAAY/E,GAAM;AACzB,QAAI,OAAOA,KAAS;AAClB,YAAM,IAAI,UAAU,wCAAwC;AACvD,QAAIA,IAAO;AAChB,YAAM,IAAI,WAAW,gBAAgBA,IAAO,gCAAgC;AAAA,EAEhF;AAEA,WAASgF,EAAOhF,GAAMiF,GAAMC,GAAU;AAEpC,WADAH,EAAW/E,CAAI,GACXA,KAAQ,IACHmE,EAAanE,CAAI,IAEtBiF,MAAS,SAIJ,OAAOC,KAAa,WACvBf,EAAanE,CAAI,EAAE,KAAKiF,GAAMC,CAAQ,IACtCf,EAAanE,CAAI,EAAE,KAAKiF,CAAI,IAE3Bd,EAAanE,CAAI;AAAA,EAC1B;AAMA,EAAA8D,EAAO,QAAQ,SAAU9D,GAAMiF,GAAMC,GAAU;AAC7C,WAAOF,EAAMhF,GAAMiF,GAAMC,CAAQ;AAAA,EACnC;AAEA,WAASX,EAAavE,GAAM;AAC1B,WAAA+E,EAAW/E,CAAI,GACRmE,EAAanE,IAAO,IAAI,IAAImF,EAAQnF,CAAI,IAAI,CAAC;AAAA,EACtD;AAKA,EAAA8D,EAAO,cAAc,SAAU9D,GAAM;AACnC,WAAOuE,EAAYvE,CAAI;AAAA,EACzB,GAIA8D,EAAO,kBAAkB,SAAU9D,GAAM;AACvC,WAAOuE,EAAYvE,CAAI;AAAA,EACzB;AAEA,WAASyE,EAAYW,GAAQF,GAAU;AAKrC,SAJI,OAAOA,KAAa,YAAYA,MAAa,QAC/CA,IAAW,SAGT,CAACpB,EAAO,WAAWoB,CAAQ;AAC7B,YAAM,IAAI,UAAU,uBAAuBA,CAAQ;AAGrD,QAAIvK,IAAS0G,EAAW+D,GAAQF,CAAQ,IAAI,GACxCd,IAAMD,EAAaxJ,CAAM,GAEzB0K,IAASjB,EAAI,MAAMgB,GAAQF,CAAQ;AAEvC,WAAIG,MAAW1K,MAIbyJ,IAAMA,EAAI,MAAM,GAAGiB,CAAM,IAGpBjB;AAAA,EACT;AAEA,WAASkB,EAAeC,GAAO;AAG7B,aAFI5K,IAAS4K,EAAM,SAAS,IAAI,IAAIJ,EAAQI,EAAM,MAAM,IAAI,GACxDnB,IAAMD,EAAaxJ,CAAM,GACpBzF,IAAI,GAAGA,IAAIyF,GAAQzF,KAAK;AAC/B,MAAAkP,EAAIlP,CAAC,IAAIqQ,EAAMrQ,CAAC,IAAI;AAEtB,WAAOkP;AAAA,EACT;AAEA,WAASM,EAAec,GAAW;AACjC,QAAIb,EAAWa,GAAW,UAAU,GAAG;AACrC,UAAIC,IAAO,IAAI,WAAWD,CAAS;AACnC,aAAOZ,EAAgBa,EAAK,QAAQA,EAAK,YAAYA,EAAK,UAAU;AAAA,IACxE;AACE,WAAOH,EAAcE,CAAS;AAAA,EAChC;AAEA,WAASZ,EAAiBW,GAAOG,GAAY/K,GAAQ;AACnD,QAAI+K,IAAa,KAAKH,EAAM,aAAaG;AACvC,YAAM,IAAI,WAAW,sCAAsC;AAG7D,QAAIH,EAAM,aAAaG,KAAc/K,KAAU;AAC7C,YAAM,IAAI,WAAW,sCAAsC;AAG7D,QAAIyJ;AACJ,WAAIsB,MAAe,UAAa/K,MAAW,SACzCyJ,IAAM,IAAI,WAAWmB,CAAK,IACjB5K,MAAW,SACpByJ,IAAM,IAAI,WAAWmB,GAAOG,CAAU,IAEtCtB,IAAM,IAAI,WAAWmB,GAAOG,GAAY/K,CAAM,GAIhD,OAAO,eAAeyJ,GAAKN,EAAO,SAAS,GAEpCM;AAAA,EACT;AAEA,WAASU,EAAYpH,GAAK;AACxB,QAAIoG,EAAO,SAASpG,CAAG,GAAG;AACxB,UAAI1I,IAAMmQ,EAAQzH,EAAI,MAAM,IAAI,GAC5B0G,IAAMD,EAAanP,CAAG;AAE1B,aAAIoP,EAAI,WAAW,KAInB1G,EAAI,KAAK0G,GAAK,GAAG,GAAGpP,CAAG,GAChBoP;AAAA,IACX;AAEE,QAAI1G,EAAI,WAAW;AACjB,aAAI,OAAOA,EAAI,UAAW,YAAYiI,GAAYjI,EAAI,MAAM,IACnDyG,EAAa,CAAC,IAEhBmB,EAAc5H,CAAG;AAG1B,QAAIA,EAAI,SAAS,YAAY,MAAM,QAAQA,EAAI,IAAI;AACjD,aAAO4H,EAAc5H,EAAI,IAAI;AAAA,EAEjC;AAEA,WAASyH,EAASxK,GAAQ;AAGxB,QAAIA,KAAUqJ;AACZ,YAAM,IAAI,WAAW,4DACaA,EAAa,SAAS,EAAE,IAAI,QAAQ;AAExE,WAAOrJ,IAAS;AAAA,EAClB;AAEA,WAASoJ,EAAYpJ,GAAQ;AAC3B,WAAI,CAACA,KAAUA,MACbA,IAAS,IAEJmJ,EAAO,MAAM,CAACnJ,CAAM;AAAA,EAC7B;AAEA,EAAAmJ,EAAO,WAAW,SAAmBvL,GAAG;AACtC,WAAOA,KAAK,QAAQA,EAAE,cAAc,MAClCA,MAAMuL,EAAO;AAAA,EACjB,GAEAA,EAAO,UAAU,SAAkBxL,GAAGC,GAAG;AAGvC,QAFIoM,EAAWrM,GAAG,UAAU,MAAGA,IAAIwL,EAAO,KAAKxL,GAAGA,EAAE,QAAQA,EAAE,UAAU,IACpEqM,EAAWpM,GAAG,UAAU,MAAGA,IAAIuL,EAAO,KAAKvL,GAAGA,EAAE,QAAQA,EAAE,UAAU,IACpE,CAACuL,EAAO,SAASxL,CAAC,KAAK,CAACwL,EAAO,SAASvL,CAAC;AAC3C,YAAM,IAAI;AAAA,QACR;AAAA;AAIJ,QAAID,MAAMC,EAAG,QAAO;AAKpB,aAHI4F,IAAI7F,EAAE,QACNsN,IAAIrN,EAAE,QAEDrD,IAAI,GAAGF,IAAM,KAAK,IAAImJ,GAAGyH,CAAC,GAAG1Q,IAAIF,GAAK,EAAEE;AAC/C,UAAIoD,EAAEpD,CAAC,MAAMqD,EAAErD,CAAC,GAAG;AACjB,QAAAiJ,IAAI7F,EAAEpD,CAAC,GACP0Q,IAAIrN,EAAErD,CAAC;AACP;AAAA,MACN;AAGE,WAAIiJ,IAAIyH,IAAU,KACdA,IAAIzH,IAAU,IACX;AAAA,EACT,GAEA2F,EAAO,aAAa,SAAqBoB,GAAU;AACjD,YAAQ,OAAOA,CAAQ,EAAE,YAAW,GAAE;AAAA,MACpC,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK;AACH,eAAO;AAAA,MACT;AACE,eAAO;AAAA;EAEb,GAEApB,EAAO,SAAS,SAAiB+B,GAAMlL,GAAQ;AAC7C,QAAI,CAAC,MAAM,QAAQkL,CAAI;AACrB,YAAM,IAAI,UAAU,6CAA6C;AAGnE,QAAIA,EAAK,WAAW;AAClB,aAAO/B,EAAO,MAAM,CAAC;AAGvB,QAAI5O;AACJ,QAAIyF,MAAW;AAEb,WADAA,IAAS,GACJzF,IAAI,GAAGA,IAAI2Q,EAAK,QAAQ,EAAE3Q;AAC7B,QAAAyF,KAAUkL,EAAK3Q,CAAC,EAAE;AAItB,QAAIoF,IAASwJ,EAAO,YAAYnJ,CAAM,GAClCmL,IAAM;AACV,SAAK5Q,IAAI,GAAGA,IAAI2Q,EAAK,QAAQ,EAAE3Q,GAAG;AAChC,UAAIkP,IAAMyB,EAAK3Q,CAAC;AAChB,UAAIyP,EAAWP,GAAK,UAAU;AAC5B,QAAI0B,IAAM1B,EAAI,SAAS9J,EAAO,SAC5BwJ,EAAO,KAAKM,CAAG,EAAE,KAAK9J,GAAQwL,CAAG,IAEjC,WAAW,UAAU,IAAI;AAAA,UACvBxL;AAAA,UACA8J;AAAA,UACA0B;AAAA;eAGMhC,EAAO,SAASM,CAAG;AAG7B,QAAAA,EAAI,KAAK9J,GAAQwL,CAAG;AAAA;AAFpB,cAAM,IAAI,UAAU,6CAA6C;AAInE,MAAAA,KAAO1B,EAAI;AAAA,IACf;AACE,WAAO9J;AAAA,EACT;AAEA,WAAS+G,EAAY+D,GAAQF,GAAU;AACrC,QAAIpB,EAAO,SAASsB,CAAM;AACxB,aAAOA,EAAO;AAEhB,QAAI,YAAY,OAAOA,CAAM,KAAKT,EAAWS,GAAQ,WAAW;AAC9D,aAAOA,EAAO;AAEhB,QAAI,OAAOA,KAAW;AACpB,YAAM,IAAI;AAAA,QACR,6FACmB,OAAOA;AAAA;AAI9B,QAAIpQ,IAAMoQ,EAAO,QACbW,IAAa,UAAU,SAAS,KAAK,UAAU,CAAC,MAAM;AAC1D,QAAI,CAACA,KAAa/Q,MAAQ,EAAG,QAAO;AAIpC,aADIgR,IAAc;AAEhB,cAAQd,GAAQ;AAAA,QACd,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACH,iBAAOlQ;AAAA,QACT,KAAK;AAAA,QACL,KAAK;AACH,iBAAOiR,GAAYb,CAAM,EAAE;AAAA,QAC7B,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACH,iBAAOpQ,IAAM;AAAA,QACf,KAAK;AACH,iBAAOA,MAAQ;AAAA,QACjB,KAAK;AACH,iBAAOkR,GAAcd,CAAM,EAAE;AAAA,QAC/B;AACE,cAAIY;AACF,mBAAOD,IAAY,KAAKE,GAAYb,CAAM,EAAE;AAE9C,UAAAF,KAAY,KAAKA,GAAU,YAAW,GACtCc,IAAc;AAAA;EAGtB;AACA,EAAAlC,EAAO,aAAazC;AAEpB,WAAS8E,EAAcjB,GAAUlG,GAAOC,GAAK;AAC3C,QAAI+G,IAAc;AA8BlB,SArBIhH,MAAU,UAAaA,IAAQ,OACjCA,IAAQ,IAINA,IAAQ,KAAK,YAIbC,MAAQ,UAAaA,IAAM,KAAK,YAClCA,IAAM,KAAK,SAGTA,KAAO,OAKXA,OAAS,GACTD,OAAW,GAEPC,KAAOD;AACT,aAAO;AAKT,SAFKkG,MAAUA,IAAW;AAGxB,cAAQA,GAAQ;AAAA,QACd,KAAK;AACH,iBAAOkB,GAAS,MAAMpH,GAAOC,CAAG;AAAA,QAElC,KAAK;AAAA,QACL,KAAK;AACH,iBAAOoH,GAAU,MAAMrH,GAAOC,CAAG;AAAA,QAEnC,KAAK;AACH,iBAAOqH,GAAW,MAAMtH,GAAOC,CAAG;AAAA,QAEpC,KAAK;AAAA,QACL,KAAK;AACH,iBAAOsH,GAAY,MAAMvH,GAAOC,CAAG;AAAA,QAErC,KAAK;AACH,iBAAOuH,GAAY,MAAMxH,GAAOC,CAAG;AAAA,QAErC,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACH,iBAAOwH,GAAa,MAAMzH,GAAOC,CAAG;AAAA,QAEtC;AACE,cAAI+G,EAAa,OAAM,IAAI,UAAU,uBAAuBd,CAAQ;AACpE,UAAAA,KAAYA,IAAW,IAAI,YAAW,GACtCc,IAAc;AAAA;EAGtB;AAQA,EAAAlC,EAAO,UAAU,YAAY;AAE7B,WAAS4C,EAAMnO,GAAGyB,GAAGkJ,GAAG;AACtB,QAAIhO,IAAIqD,EAAEyB,CAAC;AACX,IAAAzB,EAAEyB,CAAC,IAAIzB,EAAE2K,CAAC,GACV3K,EAAE2K,CAAC,IAAIhO;AAAA,EACT;AAEA,EAAA4O,EAAO,UAAU,SAAS,WAAmB;AAC3C,QAAI9O,IAAM,KAAK;AACf,QAAIA,IAAM,MAAM;AACd,YAAM,IAAI,WAAW,2CAA2C;AAElE,aAASE,IAAI,GAAGA,IAAIF,GAAKE,KAAK;AAC5B,MAAAwR,EAAK,MAAMxR,GAAGA,IAAI,CAAC;AAErB,WAAO;AAAA,EACT,GAEA4O,EAAO,UAAU,SAAS,WAAmB;AAC3C,QAAI9O,IAAM,KAAK;AACf,QAAIA,IAAM,MAAM;AACd,YAAM,IAAI,WAAW,2CAA2C;AAElE,aAASE,IAAI,GAAGA,IAAIF,GAAKE,KAAK;AAC5B,MAAAwR,EAAK,MAAMxR,GAAGA,IAAI,CAAC,GACnBwR,EAAK,MAAMxR,IAAI,GAAGA,IAAI,CAAC;AAEzB,WAAO;AAAA,EACT,GAEA4O,EAAO,UAAU,SAAS,WAAmB;AAC3C,QAAI9O,IAAM,KAAK;AACf,QAAIA,IAAM,MAAM;AACd,YAAM,IAAI,WAAW,2CAA2C;AAElE,aAASE,IAAI,GAAGA,IAAIF,GAAKE,KAAK;AAC5B,MAAAwR,EAAK,MAAMxR,GAAGA,IAAI,CAAC,GACnBwR,EAAK,MAAMxR,IAAI,GAAGA,IAAI,CAAC,GACvBwR,EAAK,MAAMxR,IAAI,GAAGA,IAAI,CAAC,GACvBwR,EAAK,MAAMxR,IAAI,GAAGA,IAAI,CAAC;AAEzB,WAAO;AAAA,EACT,GAEA4O,EAAO,UAAU,WAAW,WAAqB;AAC/C,QAAInJ,IAAS,KAAK;AAClB,WAAIA,MAAW,IAAU,KACrB,UAAU,WAAW,IAAU0L,GAAU,MAAM,GAAG1L,CAAM,IACrDwL,EAAa,MAAM,MAAM,SAAS;AAAA,EAC3C,GAEArC,EAAO,UAAU,iBAAiBA,EAAO,UAAU,UAEnDA,EAAO,UAAU,SAAS,SAAiBvL,GAAG;AAC5C,QAAI,CAACuL,EAAO,SAASvL,CAAC,EAAG,OAAM,IAAI,UAAU,2BAA2B;AACxE,WAAI,SAASA,IAAU,KAChBuL,EAAO,QAAQ,MAAMvL,CAAC,MAAM;AAAA,EACrC,GAEAuL,EAAO,UAAU,UAAU,WAAoB;AAC7C,QAAI3G,IAAM,IACNwJ,IAAM9C,EAAQ;AAClB,WAAA1G,IAAM,KAAK,SAAS,OAAO,GAAGwJ,CAAG,EAAE,QAAQ,WAAW,KAAK,EAAE,KAAI,GAC7D,KAAK,SAASA,MAAKxJ,KAAO,UACvB,aAAaA,IAAM;AAAA,EAC5B,GACIyG,MACFE,EAAO,UAAUF,CAAmB,IAAIE,EAAO,UAAU,UAG3DA,EAAO,UAAU,UAAU,SAAkBvE,GAAQP,GAAOC,GAAK2H,GAAWC,GAAS;AAInF,QAHIlC,EAAWpF,GAAQ,UAAU,MAC/BA,IAASuE,EAAO,KAAKvE,GAAQA,EAAO,QAAQA,EAAO,UAAU,IAE3D,CAACuE,EAAO,SAASvE,CAAM;AACzB,YAAM,IAAI;AAAA,QACR,mFACoB,OAAOA;AAAA;AAiB/B,QAbIP,MAAU,WACZA,IAAQ,IAENC,MAAQ,WACVA,IAAMM,IAASA,EAAO,SAAS,IAE7BqH,MAAc,WAChBA,IAAY,IAEVC,MAAY,WACdA,IAAU,KAAK,SAGb7H,IAAQ,KAAKC,IAAMM,EAAO,UAAUqH,IAAY,KAAKC,IAAU,KAAK;AACtE,YAAM,IAAI,WAAW,oBAAoB;AAG3C,QAAID,KAAaC,KAAW7H,KAASC;AACnC,aAAO;AAET,QAAI2H,KAAaC;AACf,aAAO;AAET,QAAI7H,KAASC;AACX,aAAO;AAQT,QALAD,OAAW,GACXC,OAAS,GACT2H,OAAe,GACfC,OAAa,GAET,SAAStH,EAAQ,QAAO;AAS5B,aAPIpB,IAAI0I,IAAUD,GACdhB,IAAI3G,IAAMD,GACVhK,IAAM,KAAK,IAAImJ,GAAGyH,CAAC,GAEnBkB,IAAW,KAAK,MAAMF,GAAWC,CAAO,GACxCE,IAAaxH,EAAO,MAAMP,GAAOC,CAAG,GAE/B/J,IAAI,GAAGA,IAAIF,GAAK,EAAEE;AACzB,UAAI4R,EAAS5R,CAAC,MAAM6R,EAAW7R,CAAC,GAAG;AACjC,QAAAiJ,IAAI2I,EAAS5R,CAAC,GACd0Q,IAAImB,EAAW7R,CAAC;AAChB;AAAA,MACN;AAGE,WAAIiJ,IAAIyH,IAAU,KACdA,IAAIzH,IAAU,IACX;AAAA,EACT;AAWA,WAAS6I,GAAsB1M,GAAQ9B,GAAKkN,GAAYR,GAAU1Q,GAAK;AAErE,QAAI8F,EAAO,WAAW,EAAG,QAAO;AAmBhC,QAhBI,OAAOoL,KAAe,YACxBR,IAAWQ,GACXA,IAAa,KACJA,IAAa,aACtBA,IAAa,aACJA,IAAa,gBACtBA,IAAa,cAEfA,IAAa,CAACA,GACVC,GAAYD,CAAU,MAExBA,IAAalR,IAAM,IAAK8F,EAAO,SAAS,IAItCoL,IAAa,MAAGA,IAAapL,EAAO,SAASoL,IAC7CA,KAAcpL,EAAO,QAAQ;AAC/B,UAAI9F,EAAK,QAAO;AACX,MAAAkR,IAAapL,EAAO,SAAS;AAAA,IACtC,WAAaoL,IAAa;AACtB,UAAIlR,EAAK,CAAAkR,IAAa;AAAA,UACjB,QAAO;AASd,QALI,OAAOlN,KAAQ,aACjBA,IAAMsL,EAAO,KAAKtL,GAAK0M,CAAQ,IAI7BpB,EAAO,SAAStL,CAAG;AAErB,aAAIA,EAAI,WAAW,IACV,KAEFyO,GAAa3M,GAAQ9B,GAAKkN,GAAYR,GAAU1Q,CAAG;AACrD,QAAI,OAAOgE,KAAQ;AAExB,aADAA,IAAMA,IAAM,KACR,OAAO,WAAW,UAAU,WAAY,aACtChE,IACK,WAAW,UAAU,QAAQ,KAAK8F,GAAQ9B,GAAKkN,CAAU,IAEzD,WAAW,UAAU,YAAY,KAAKpL,GAAQ9B,GAAKkN,CAAU,IAGjEuB,GAAa3M,GAAQ,CAAC9B,CAAG,GAAGkN,GAAYR,GAAU1Q,CAAG;AAG9D,UAAM,IAAI,UAAU,sCAAsC;AAAA,EAC5D;AAEA,WAASyS,GAAc9E,GAAK3J,GAAKkN,GAAYR,GAAU1Q,GAAK;AAC1D,QAAI0S,IAAY,GACZC,IAAYhF,EAAI,QAChBiF,IAAY5O,EAAI;AAEpB,QAAI0M,MAAa,WACfA,IAAW,OAAOA,CAAQ,EAAE,YAAW,GACnCA,MAAa,UAAUA,MAAa,WACpCA,MAAa,aAAaA,MAAa,aAAY;AACrD,UAAI/C,EAAI,SAAS,KAAK3J,EAAI,SAAS;AACjC,eAAO;AAET,MAAA0O,IAAY,GACZC,KAAa,GACbC,KAAa,GACb1B,KAAc;AAAA,IACpB;AAGE,aAAS2B,EAAMjD,IAAKlP,IAAG;AACrB,aAAIgS,MAAc,IACT9C,GAAIlP,EAAC,IAELkP,GAAI,aAAalP,KAAIgS,CAAS;AAAA,IAE3C;AAEE,QAAIhS;AACJ,QAAIV,GAAK;AACP,UAAI8S,IAAa;AACjB,WAAKpS,IAAIwQ,GAAYxQ,IAAIiS,GAAWjS;AAClC,YAAImS,EAAKlF,GAAKjN,CAAC,MAAMmS,EAAK7O,GAAK8O,MAAe,KAAK,IAAIpS,IAAIoS,CAAU;AAEnE,cADIA,MAAe,OAAIA,IAAapS,IAChCA,IAAIoS,IAAa,MAAMF,EAAW,QAAOE,IAAaJ;AAAA;AAE1D,UAAII,MAAe,OAAIpS,KAAKA,IAAIoS,IAChCA,IAAa;AAAA,IAGrB;AAEI,WADI5B,IAAa0B,IAAYD,MAAWzB,IAAayB,IAAYC,IAC5DlS,IAAIwQ,GAAYxQ,KAAK,GAAGA,KAAK;AAEhC,iBADIqS,IAAQ,IACHC,KAAI,GAAGA,KAAIJ,GAAWI;AAC7B,cAAIH,EAAKlF,GAAKjN,IAAIsS,EAAC,MAAMH,EAAK7O,GAAKgP,EAAC,GAAG;AACrC,YAAAD,IAAQ;AACR;AAAA,UACV;AAEM,YAAIA,EAAO,QAAOrS;AAAA,MACxB;AAGE,WAAO;AAAA,EACT;AAEA,EAAA4O,EAAO,UAAU,WAAW,SAAmBtL,GAAKkN,GAAYR,GAAU;AACxE,WAAO,KAAK,QAAQ1M,GAAKkN,GAAYR,CAAQ,MAAM;AAAA,EACrD,GAEApB,EAAO,UAAU,UAAU,SAAkBtL,GAAKkN,GAAYR,GAAU;AACtE,WAAO8B,GAAqB,MAAMxO,GAAKkN,GAAYR,GAAU,EAAI;AAAA,EACnE,GAEApB,EAAO,UAAU,cAAc,SAAsBtL,GAAKkN,GAAYR,GAAU;AAC9E,WAAO8B,GAAqB,MAAMxO,GAAKkN,GAAYR,GAAU,EAAK;AAAA,EACpE;AAEA,WAASuC,GAAUrD,GAAKgB,GAAQ9H,GAAQ3C,GAAQ;AAC9C,IAAA2C,IAAS,OAAOA,CAAM,KAAK;AAC3B,QAAIoK,IAAYtD,EAAI,SAAS9G;AAC7B,IAAK3C,KAGHA,IAAS,OAAOA,CAAM,GAClBA,IAAS+M,MACX/M,IAAS+M,MAJX/M,IAAS+M;AAQX,QAAIC,IAASvC,EAAO;AAEpB,IAAIzK,IAASgN,IAAS,MACpBhN,IAASgN,IAAS;AAEpB,aAASzS,IAAI,GAAGA,IAAIyF,GAAQ,EAAEzF,GAAG;AAC/B,UAAI0S,IAAS,SAASxC,EAAO,OAAOlQ,IAAI,GAAG,CAAC,GAAG,EAAE;AACjD,UAAIyQ,GAAYiC,CAAM,EAAG,QAAO1S;AAChC,MAAAkP,EAAI9G,IAASpI,CAAC,IAAI0S;AAAA,IACtB;AACE,WAAO1S;AAAA,EACT;AAEA,WAAS2S,GAAWzD,GAAKgB,GAAQ9H,GAAQ3C,GAAQ;AAC/C,WAAOmN,GAAW7B,GAAYb,GAAQhB,EAAI,SAAS9G,CAAM,GAAG8G,GAAK9G,GAAQ3C,CAAM;AAAA,EACjF;AAEA,WAASoN,GAAY3D,GAAKgB,GAAQ9H,GAAQ3C,GAAQ;AAChD,WAAOmN,GAAWE,GAAa5C,CAAM,GAAGhB,GAAK9G,GAAQ3C,CAAM;AAAA,EAC7D;AAEA,WAASsN,GAAa7D,GAAKgB,GAAQ9H,GAAQ3C,GAAQ;AACjD,WAAOmN,GAAW5B,GAAcd,CAAM,GAAGhB,GAAK9G,GAAQ3C,CAAM;AAAA,EAC9D;AAEA,WAASuN,GAAW9D,GAAKgB,GAAQ9H,GAAQ3C,GAAQ;AAC/C,WAAOmN,GAAWK,GAAe/C,GAAQhB,EAAI,SAAS9G,CAAM,GAAG8G,GAAK9G,GAAQ3C,CAAM;AAAA,EACpF;AAEA,EAAAmJ,EAAO,UAAU,QAAQ,SAAgBsB,GAAQ9H,GAAQ3C,GAAQuK,GAAU;AAEzE,QAAI5H,MAAW;AACb,MAAA4H,IAAW,QACXvK,IAAS,KAAK,QACd2C,IAAS;AAAA,aAEA3C,MAAW,UAAa,OAAO2C,KAAW;AACnD,MAAA4H,IAAW5H,GACX3C,IAAS,KAAK,QACd2C,IAAS;AAAA,aAEA,SAASA,CAAM;AACxB,MAAAA,IAASA,MAAW,GAChB,SAAS3C,CAAM,KACjBA,IAASA,MAAW,GAChBuK,MAAa,WAAWA,IAAW,YAEvCA,IAAWvK,GACXA,IAAS;AAAA;AAGX,YAAM,IAAI;AAAA,QACR;AAAA;AAIJ,QAAI+M,IAAY,KAAK,SAASpK;AAG9B,SAFI3C,MAAW,UAAaA,IAAS+M,OAAW/M,IAAS+M,IAEpDtC,EAAO,SAAS,MAAMzK,IAAS,KAAK2C,IAAS,MAAOA,IAAS,KAAK;AACrE,YAAM,IAAI,WAAW,wCAAwC;AAG/D,IAAK4H,MAAUA,IAAW;AAG1B,aADIc,IAAc;AAEhB,cAAQd,GAAQ;AAAA,QACd,KAAK;AACH,iBAAOuC,GAAS,MAAMrC,GAAQ9H,GAAQ3C,CAAM;AAAA,QAE9C,KAAK;AAAA,QACL,KAAK;AACH,iBAAOkN,GAAU,MAAMzC,GAAQ9H,GAAQ3C,CAAM;AAAA,QAE/C,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACH,iBAAOoN,GAAW,MAAM3C,GAAQ9H,GAAQ3C,CAAM;AAAA,QAEhD,KAAK;AAEH,iBAAOsN,GAAY,MAAM7C,GAAQ9H,GAAQ3C,CAAM;AAAA,QAEjD,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACH,iBAAOuN,GAAU,MAAM9C,GAAQ9H,GAAQ3C,CAAM;AAAA,QAE/C;AACE,cAAIqL,EAAa,OAAM,IAAI,UAAU,uBAAuBd,CAAQ;AACpE,UAAAA,KAAY,KAAKA,GAAU,YAAW,GACtCc,IAAc;AAAA;EAGtB,GAEAlC,EAAO,UAAU,SAAS,WAAmB;AAC3C,WAAO;AAAA,MACL,MAAM;AAAA,MACN,MAAM,MAAM,UAAU,MAAM,KAAK,KAAK,QAAQ,MAAM,CAAC;AAAA;EAEzD;AAEA,WAAS0C,GAAapC,GAAKpF,GAAOC,GAAK;AACrC,WAAID,MAAU,KAAKC,MAAQmF,EAAI,SACtBtP,EAAO,cAAcsP,CAAG,IAExBtP,EAAO,cAAcsP,EAAI,MAAMpF,GAAOC,CAAG,CAAC;AAAA,EAErD;AAEA,WAASoH,GAAWjC,GAAKpF,GAAOC,GAAK;AACnC,IAAAA,IAAM,KAAK,IAAImF,EAAI,QAAQnF,CAAG;AAI9B,aAHImJ,IAAM,CAAA,GAENlT,IAAI8J,GACD9J,IAAI+J,KAAK;AACd,UAAIoJ,IAAYjE,EAAIlP,CAAC,GACjBoT,IAAY,MACZC,IAAoBF,IAAY,MAChC,IACCA,IAAY,MACT,IACCA,IAAY,MACT,IACA;AAEZ,UAAInT,IAAIqT,KAAoBtJ,GAAK;AAC/B,YAAIuJ,GAAYC,GAAWC,GAAYC;AAEvC,gBAAQJ,GAAgB;AAAA,UACtB,KAAK;AACH,YAAIF,IAAY,QACdC,IAAYD;AAEd;AAAA,UACF,KAAK;AACH,YAAAG,IAAapE,EAAIlP,IAAI,CAAC,IACjBsT,IAAa,SAAU,QAC1BG,KAAiBN,IAAY,OAAS,IAAOG,IAAa,IACtDG,IAAgB,QAClBL,IAAYK;AAGhB;AAAA,UACF,KAAK;AACH,YAAAH,IAAapE,EAAIlP,IAAI,CAAC,GACtBuT,IAAYrE,EAAIlP,IAAI,CAAC,IAChBsT,IAAa,SAAU,QAASC,IAAY,SAAU,QACzDE,KAAiBN,IAAY,OAAQ,MAAOG,IAAa,OAAS,IAAOC,IAAY,IACjFE,IAAgB,SAAUA,IAAgB,SAAUA,IAAgB,WACtEL,IAAYK;AAGhB;AAAA,UACF,KAAK;AACH,YAAAH,IAAapE,EAAIlP,IAAI,CAAC,GACtBuT,IAAYrE,EAAIlP,IAAI,CAAC,GACrBwT,IAAatE,EAAIlP,IAAI,CAAC,IACjBsT,IAAa,SAAU,QAASC,IAAY,SAAU,QAASC,IAAa,SAAU,QACzFC,KAAiBN,IAAY,OAAQ,MAAQG,IAAa,OAAS,MAAOC,IAAY,OAAS,IAAOC,IAAa,IAC/GC,IAAgB,SAAUA,IAAgB,YAC5CL,IAAYK;AAAA;MAI1B;AAEI,MAAIL,MAAc,QAGhBA,IAAY,OACZC,IAAmB,KACVD,IAAY,UAErBA,KAAa,OACbF,EAAI,KAAKE,MAAc,KAAK,OAAQ,KAAM,GAC1CA,IAAY,QAASA,IAAY,OAGnCF,EAAI,KAAKE,CAAS,GAClBpT,KAAKqT;AAAA,IACT;AAEE,WAAOK,GAAsBR,CAAG;AAAA,EAClC;AAKA,MAAIS,KAAuB;AAE3B,WAASD,GAAuBE,GAAY;AAC1C,QAAI9T,IAAM8T,EAAW;AACrB,QAAI9T,KAAO6T;AACT,aAAO,OAAO,aAAa,MAAM,QAAQC,CAAU;AAMrD,aAFIV,IAAM,IACNlT,IAAI,GACDA,IAAIF;AACT,MAAAoT,KAAO,OAAO,aAAa;AAAA,QACzB;AAAA,QACAU,EAAW,MAAM5T,GAAGA,KAAK2T,EAAoB;AAAA;AAGjD,WAAOT;AAAA,EACT;AAEA,WAAS9B,GAAYlC,GAAKpF,GAAOC,GAAK;AACpC,QAAI8J,IAAM;AACV,IAAA9J,IAAM,KAAK,IAAImF,EAAI,QAAQnF,CAAG;AAE9B,aAAS/J,IAAI8J,GAAO9J,IAAI+J,GAAK,EAAE/J;AAC7B,MAAA6T,KAAO,OAAO,aAAa3E,EAAIlP,CAAC,IAAI,GAAI;AAE1C,WAAO6T;AAAA,EACT;AAEA,WAASxC,GAAanC,GAAKpF,GAAOC,GAAK;AACrC,QAAI8J,IAAM;AACV,IAAA9J,IAAM,KAAK,IAAImF,EAAI,QAAQnF,CAAG;AAE9B,aAAS/J,IAAI8J,GAAO9J,IAAI+J,GAAK,EAAE/J;AAC7B,MAAA6T,KAAO,OAAO,aAAa3E,EAAIlP,CAAC,CAAC;AAEnC,WAAO6T;AAAA,EACT;AAEA,WAAS3C,GAAUhC,GAAKpF,GAAOC,GAAK;AAClC,QAAIjK,IAAMoP,EAAI;AAEd,KAAI,CAACpF,KAASA,IAAQ,OAAGA,IAAQ,KAC7B,CAACC,KAAOA,IAAM,KAAKA,IAAMjK,OAAKiK,IAAMjK;AAGxC,aADIgU,IAAM,IACD9T,IAAI8J,GAAO9J,IAAI+J,GAAK,EAAE/J;AAC7B,MAAA8T,KAAOC,GAAoB7E,EAAIlP,CAAC,CAAC;AAEnC,WAAO8T;AAAA,EACT;AAEA,WAASvC,GAAcrC,GAAKpF,GAAOC,GAAK;AAItC,aAHIhK,IAAQmP,EAAI,MAAMpF,GAAOC,CAAG,GAC5BmJ,IAAM,IAEDlT,IAAI,GAAGA,IAAID,EAAM,SAAS,GAAGC,KAAK;AACzC,MAAAkT,KAAO,OAAO,aAAanT,EAAMC,CAAC,IAAKD,EAAMC,IAAI,CAAC,IAAI,GAAI;AAE5D,WAAOkT;AAAA,EACT;AAEA,EAAAtE,EAAO,UAAU,QAAQ,SAAgB9E,GAAOC,GAAK;AACnD,QAAIjK,IAAM,KAAK;AACf,IAAAgK,IAAQ,CAAC,CAACA,GACVC,IAAMA,MAAQ,SAAYjK,IAAM,CAAC,CAACiK,GAE9BD,IAAQ,KACVA,KAAShK,GACLgK,IAAQ,MAAGA,IAAQ,MACdA,IAAQhK,MACjBgK,IAAQhK,IAGNiK,IAAM,KACRA,KAAOjK,GACHiK,IAAM,MAAGA,IAAM,MACVA,IAAMjK,MACfiK,IAAMjK,IAGJiK,IAAMD,MAAOC,IAAMD;AAEvB,QAAIkK,IAAS,KAAK,SAASlK,GAAOC,CAAG;AAErC,kBAAO,eAAeiK,GAAQpF,EAAO,SAAS,GAEvCoF;AAAA,EACT;AAKA,WAASC,EAAa7L,GAAQ8L,GAAKzO,GAAQ;AACzC,QAAK2C,IAAS,MAAO,KAAKA,IAAS,EAAG,OAAM,IAAI,WAAW,oBAAoB;AAC/E,QAAIA,IAAS8L,IAAMzO,EAAQ,OAAM,IAAI,WAAW,uCAAuC;AAAA,EACzF;AAEA,EAAAmJ,EAAO,UAAU,aACjBA,EAAO,UAAU,aAAa,SAAqBxG,GAAQ+D,GAAYgI,GAAU;AAC/E,IAAA/L,IAASA,MAAW,GACpB+D,IAAaA,MAAe,GACvBgI,KAAUF,EAAY7L,GAAQ+D,GAAY,KAAK,MAAM;AAK1D,aAHI7I,IAAM,KAAK8E,CAAM,GACjBgM,IAAM,GACNpU,IAAI,GACD,EAAEA,IAAImM,MAAeiI,KAAO;AACjC,MAAA9Q,KAAO,KAAK8E,IAASpI,CAAC,IAAIoU;AAG5B,WAAO9Q;AAAA,EACT,GAEAsL,EAAO,UAAU,aACjBA,EAAO,UAAU,aAAa,SAAqBxG,GAAQ+D,GAAYgI,GAAU;AAC/E,IAAA/L,IAASA,MAAW,GACpB+D,IAAaA,MAAe,GACvBgI,KACHF,EAAY7L,GAAQ+D,GAAY,KAAK,MAAM;AAK7C,aAFI7I,IAAM,KAAK8E,IAAS,EAAE+D,CAAU,GAChCiI,IAAM,GACHjI,IAAa,MAAMiI,KAAO;AAC/B,MAAA9Q,KAAO,KAAK8E,IAAS,EAAE+D,CAAU,IAAIiI;AAGvC,WAAO9Q;AAAA,EACT,GAEAsL,EAAO,UAAU,YACjBA,EAAO,UAAU,YAAY,SAAoBxG,GAAQ+L,GAAU;AACjE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GAC1C,KAAKA,CAAM;AAAA,EACpB,GAEAwG,EAAO,UAAU,eACjBA,EAAO,UAAU,eAAe,SAAuBxG,GAAQ+L,GAAU;AACvE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GAC1C,KAAKA,CAAM,IAAK,KAAKA,IAAS,CAAC,KAAK;AAAA,EAC7C,GAEAwG,EAAO,UAAU,eACjBA,EAAO,UAAU,eAAe,SAAuBxG,GAAQ+L,GAAU;AACvE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GACzC,KAAKA,CAAM,KAAK,IAAK,KAAKA,IAAS,CAAC;AAAA,EAC9C,GAEAwG,EAAO,UAAU,eACjBA,EAAO,UAAU,eAAe,SAAuBxG,GAAQ+L,GAAU;AACvE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,IAExC,KAAKA,CAAM,IACf,KAAKA,IAAS,CAAC,KAAK,IACpB,KAAKA,IAAS,CAAC,KAAK,MACpB,KAAKA,IAAS,CAAC,IAAI;AAAA,EAC1B,GAEAwG,EAAO,UAAU,eACjBA,EAAO,UAAU,eAAe,SAAuBxG,GAAQ+L,GAAU;AACvE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GAEzC,KAAKA,CAAM,IAAI,YACnB,KAAKA,IAAS,CAAC,KAAK,KACrB,KAAKA,IAAS,CAAC,KAAK,IACrB,KAAKA,IAAS,CAAC;AAAA,EACnB,GAEAwG,EAAO,UAAU,YAAY,SAAoBxG,GAAQ+D,GAAYgI,GAAU;AAC7E,IAAA/L,IAASA,MAAW,GACpB+D,IAAaA,MAAe,GACvBgI,KAAUF,EAAY7L,GAAQ+D,GAAY,KAAK,MAAM;AAK1D,aAHI7I,IAAM,KAAK8E,CAAM,GACjBgM,IAAM,GACNpU,IAAI,GACD,EAAEA,IAAImM,MAAeiI,KAAO;AACjC,MAAA9Q,KAAO,KAAK8E,IAASpI,CAAC,IAAIoU;AAE5B,WAAAA,KAAO,KAEH9Q,KAAO8Q,MAAK9Q,KAAO,KAAK,IAAI,GAAG,IAAI6I,CAAU,IAE1C7I;AAAA,EACT,GAEAsL,EAAO,UAAU,YAAY,SAAoBxG,GAAQ+D,GAAYgI,GAAU;AAC7E,IAAA/L,IAASA,MAAW,GACpB+D,IAAaA,MAAe,GACvBgI,KAAUF,EAAY7L,GAAQ+D,GAAY,KAAK,MAAM;AAK1D,aAHInM,IAAImM,GACJiI,IAAM,GACN9Q,IAAM,KAAK8E,IAAS,EAAEpI,CAAC,GACpBA,IAAI,MAAMoU,KAAO;AACtB,MAAA9Q,KAAO,KAAK8E,IAAS,EAAEpI,CAAC,IAAIoU;AAE9B,WAAAA,KAAO,KAEH9Q,KAAO8Q,MAAK9Q,KAAO,KAAK,IAAI,GAAG,IAAI6I,CAAU,IAE1C7I;AAAA,EACT,GAEAsL,EAAO,UAAU,WAAW,SAAmBxG,GAAQ+L,GAAU;AAG/D,WAFA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GAC3C,KAAKA,CAAM,IAAI,OACZ,MAAO,KAAKA,CAAM,IAAI,KAAK,KADA,KAAKA,CAAM;AAAA,EAEjD,GAEAwG,EAAO,UAAU,cAAc,SAAsBxG,GAAQ+L,GAAU;AACrE,IAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM;AACjD,QAAI9E,IAAM,KAAK8E,CAAM,IAAK,KAAKA,IAAS,CAAC,KAAK;AAC9C,WAAQ9E,IAAM,QAAUA,IAAM,aAAaA;AAAA,EAC7C,GAEAsL,EAAO,UAAU,cAAc,SAAsBxG,GAAQ+L,GAAU;AACrE,IAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM;AACjD,QAAI9E,IAAM,KAAK8E,IAAS,CAAC,IAAK,KAAKA,CAAM,KAAK;AAC9C,WAAQ9E,IAAM,QAAUA,IAAM,aAAaA;AAAA,EAC7C,GAEAsL,EAAO,UAAU,cAAc,SAAsBxG,GAAQ+L,GAAU;AACrE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GAEzC,KAAKA,CAAM,IAChB,KAAKA,IAAS,CAAC,KAAK,IACpB,KAAKA,IAAS,CAAC,KAAK,KACpB,KAAKA,IAAS,CAAC,KAAK;AAAA,EACzB,GAEAwG,EAAO,UAAU,cAAc,SAAsBxG,GAAQ+L,GAAU;AACrE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GAEzC,KAAKA,CAAM,KAAK,KACrB,KAAKA,IAAS,CAAC,KAAK,KACpB,KAAKA,IAAS,CAAC,KAAK,IACpB,KAAKA,IAAS,CAAC;AAAA,EACpB,GAEAwG,EAAO,UAAU,cAAc,SAAsBxG,GAAQ+L,GAAU;AACrE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GAC1CuF,EAAQ,KAAK,MAAMvF,GAAQ,IAAM,IAAI,CAAC;AAAA,EAC/C,GAEAwG,EAAO,UAAU,cAAc,SAAsBxG,GAAQ+L,GAAU;AACrE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GAC1CuF,EAAQ,KAAK,MAAMvF,GAAQ,IAAO,IAAI,CAAC;AAAA,EAChD,GAEAwG,EAAO,UAAU,eAAe,SAAuBxG,GAAQ+L,GAAU;AACvE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GAC1CuF,EAAQ,KAAK,MAAMvF,GAAQ,IAAM,IAAI,CAAC;AAAA,EAC/C,GAEAwG,EAAO,UAAU,eAAe,SAAuBxG,GAAQ+L,GAAU;AACvE,WAAA/L,IAASA,MAAW,GACf+L,KAAUF,EAAY7L,GAAQ,GAAG,KAAK,MAAM,GAC1CuF,EAAQ,KAAK,MAAMvF,GAAQ,IAAO,IAAI,CAAC;AAAA,EAChD;AAEA,WAASiM,EAAUnF,GAAK1K,GAAO4D,GAAQ8L,GAAKzC,GAAK6C,GAAK;AACpD,QAAI,CAAC1F,EAAO,SAASM,CAAG,EAAG,OAAM,IAAI,UAAU,6CAA6C;AAC5F,QAAI1K,IAAQiN,KAAOjN,IAAQ8P,EAAK,OAAM,IAAI,WAAW,mCAAmC;AACxF,QAAIlM,IAAS8L,IAAMhF,EAAI,OAAQ,OAAM,IAAI,WAAW,oBAAoB;AAAA,EAC1E;AAEA,EAAAN,EAAO,UAAU,cACjBA,EAAO,UAAU,cAAc,SAAsBpK,GAAO4D,GAAQ+D,GAAYgI,GAAU;AAIxF,QAHA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACpB+D,IAAaA,MAAe,GACxB,CAACgI,GAAU;AACb,UAAII,IAAW,KAAK,IAAI,GAAG,IAAIpI,CAAU,IAAI;AAC7C,MAAAkI,EAAS,MAAM7P,GAAO4D,GAAQ+D,GAAYoI,GAAU,CAAC;AAAA,IACzD;AAEE,QAAIH,IAAM,GACNpU,IAAI;AAER,SADA,KAAKoI,CAAM,IAAI5D,IAAQ,KAChB,EAAExE,IAAImM,MAAeiI,KAAO;AACjC,WAAKhM,IAASpI,CAAC,IAAKwE,IAAQ4P,IAAO;AAGrC,WAAOhM,IAAS+D;AAAA,EAClB,GAEAyC,EAAO,UAAU,cACjBA,EAAO,UAAU,cAAc,SAAsBpK,GAAO4D,GAAQ+D,GAAYgI,GAAU;AAIxF,QAHA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACpB+D,IAAaA,MAAe,GACxB,CAACgI,GAAU;AACb,UAAII,IAAW,KAAK,IAAI,GAAG,IAAIpI,CAAU,IAAI;AAC7C,MAAAkI,EAAS,MAAM7P,GAAO4D,GAAQ+D,GAAYoI,GAAU,CAAC;AAAA,IACzD;AAEE,QAAIvU,IAAImM,IAAa,GACjBiI,IAAM;AAEV,SADA,KAAKhM,IAASpI,CAAC,IAAIwE,IAAQ,KACpB,EAAExE,KAAK,MAAMoU,KAAO;AACzB,WAAKhM,IAASpI,CAAC,IAAKwE,IAAQ4P,IAAO;AAGrC,WAAOhM,IAAS+D;AAAA,EAClB,GAEAyC,EAAO,UAAU,aACjBA,EAAO,UAAU,aAAa,SAAqBpK,GAAO4D,GAAQ+L,GAAU;AAC1E,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KAAUE,EAAS,MAAM7P,GAAO4D,GAAQ,GAAG,KAAM,CAAC,GACvD,KAAKA,CAAM,IAAK5D,IAAQ,KACjB4D,IAAS;AAAA,EAClB,GAEAwG,EAAO,UAAU,gBACjBA,EAAO,UAAU,gBAAgB,SAAwBpK,GAAO4D,GAAQ+L,GAAU;AAChF,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KAAUE,EAAS,MAAM7P,GAAO4D,GAAQ,GAAG,OAAQ,CAAC,GACzD,KAAKA,CAAM,IAAK5D,IAAQ,KACxB,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,GACvB4D,IAAS;AAAA,EAClB,GAEAwG,EAAO,UAAU,gBACjBA,EAAO,UAAU,gBAAgB,SAAwBpK,GAAO4D,GAAQ+L,GAAU;AAChF,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KAAUE,EAAS,MAAM7P,GAAO4D,GAAQ,GAAG,OAAQ,CAAC,GACzD,KAAKA,CAAM,IAAK5D,MAAU,GAC1B,KAAK4D,IAAS,CAAC,IAAK5D,IAAQ,KACrB4D,IAAS;AAAA,EAClB,GAEAwG,EAAO,UAAU,gBACjBA,EAAO,UAAU,gBAAgB,SAAwBpK,GAAO4D,GAAQ+L,GAAU;AAChF,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KAAUE,EAAS,MAAM7P,GAAO4D,GAAQ,GAAG,YAAY,CAAC,GAC7D,KAAKA,IAAS,CAAC,IAAK5D,MAAU,IAC9B,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,IAC9B,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,GAC9B,KAAK4D,CAAM,IAAK5D,IAAQ,KACjB4D,IAAS;AAAA,EAClB,GAEAwG,EAAO,UAAU,gBACjBA,EAAO,UAAU,gBAAgB,SAAwBpK,GAAO4D,GAAQ+L,GAAU;AAChF,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KAAUE,EAAS,MAAM7P,GAAO4D,GAAQ,GAAG,YAAY,CAAC,GAC7D,KAAKA,CAAM,IAAK5D,MAAU,IAC1B,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,IAC9B,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,GAC9B,KAAK4D,IAAS,CAAC,IAAK5D,IAAQ,KACrB4D,IAAS;AAAA,EAClB,GAEAwG,EAAO,UAAU,aAAa,SAAqBpK,GAAO4D,GAAQ+D,GAAYgI,GAAU;AAGtF,QAFA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GAChB,CAAC+L,GAAU;AACb,UAAIK,IAAQ,KAAK,IAAI,GAAI,IAAIrI,IAAc,CAAC;AAE5C,MAAAkI,EAAS,MAAM7P,GAAO4D,GAAQ+D,GAAYqI,IAAQ,GAAG,CAACA,CAAK;AAAA,IAC/D;AAEE,QAAIxU,IAAI,GACJoU,IAAM,GACNK,IAAM;AAEV,SADA,KAAKrM,CAAM,IAAI5D,IAAQ,KAChB,EAAExE,IAAImM,MAAeiI,KAAO;AACjC,MAAI5P,IAAQ,KAAKiQ,MAAQ,KAAK,KAAKrM,IAASpI,IAAI,CAAC,MAAM,MACrDyU,IAAM,IAER,KAAKrM,IAASpI,CAAC,KAAMwE,IAAQ4P,KAAQ,KAAKK,IAAM;AAGlD,WAAOrM,IAAS+D;AAAA,EAClB,GAEAyC,EAAO,UAAU,aAAa,SAAqBpK,GAAO4D,GAAQ+D,GAAYgI,GAAU;AAGtF,QAFA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GAChB,CAAC+L,GAAU;AACb,UAAIK,IAAQ,KAAK,IAAI,GAAI,IAAIrI,IAAc,CAAC;AAE5C,MAAAkI,EAAS,MAAM7P,GAAO4D,GAAQ+D,GAAYqI,IAAQ,GAAG,CAACA,CAAK;AAAA,IAC/D;AAEE,QAAIxU,IAAImM,IAAa,GACjBiI,IAAM,GACNK,IAAM;AAEV,SADA,KAAKrM,IAASpI,CAAC,IAAIwE,IAAQ,KACpB,EAAExE,KAAK,MAAMoU,KAAO;AACzB,MAAI5P,IAAQ,KAAKiQ,MAAQ,KAAK,KAAKrM,IAASpI,IAAI,CAAC,MAAM,MACrDyU,IAAM,IAER,KAAKrM,IAASpI,CAAC,KAAMwE,IAAQ4P,KAAQ,KAAKK,IAAM;AAGlD,WAAOrM,IAAS+D;AAAA,EAClB,GAEAyC,EAAO,UAAU,YAAY,SAAoBpK,GAAO4D,GAAQ+L,GAAU;AACxE,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KAAUE,EAAS,MAAM7P,GAAO4D,GAAQ,GAAG,KAAM,IAAK,GACvD5D,IAAQ,MAAGA,IAAQ,MAAOA,IAAQ,IACtC,KAAK4D,CAAM,IAAK5D,IAAQ,KACjB4D,IAAS;AAAA,EAClB,GAEAwG,EAAO,UAAU,eAAe,SAAuBpK,GAAO4D,GAAQ+L,GAAU;AAC9E,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KAAUE,EAAS,MAAM7P,GAAO4D,GAAQ,GAAG,OAAQ,MAAO,GAC/D,KAAKA,CAAM,IAAK5D,IAAQ,KACxB,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,GACvB4D,IAAS;AAAA,EAClB,GAEAwG,EAAO,UAAU,eAAe,SAAuBpK,GAAO4D,GAAQ+L,GAAU;AAC9E,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KAAUE,EAAS,MAAM7P,GAAO4D,GAAQ,GAAG,OAAQ,MAAO,GAC/D,KAAKA,CAAM,IAAK5D,MAAU,GAC1B,KAAK4D,IAAS,CAAC,IAAK5D,IAAQ,KACrB4D,IAAS;AAAA,EAClB,GAEAwG,EAAO,UAAU,eAAe,SAAuBpK,GAAO4D,GAAQ+L,GAAU;AAC9E,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KAAUE,EAAS,MAAM7P,GAAO4D,GAAQ,GAAG,YAAY,WAAW,GACvE,KAAKA,CAAM,IAAK5D,IAAQ,KACxB,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,GAC9B,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,IAC9B,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,IACvB4D,IAAS;AAAA,EAClB,GAEAwG,EAAO,UAAU,eAAe,SAAuBpK,GAAO4D,GAAQ+L,GAAU;AAC9E,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KAAUE,EAAS,MAAM7P,GAAO4D,GAAQ,GAAG,YAAY,WAAW,GACnE5D,IAAQ,MAAGA,IAAQ,aAAaA,IAAQ,IAC5C,KAAK4D,CAAM,IAAK5D,MAAU,IAC1B,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,IAC9B,KAAK4D,IAAS,CAAC,IAAK5D,MAAU,GAC9B,KAAK4D,IAAS,CAAC,IAAK5D,IAAQ,KACrB4D,IAAS;AAAA,EAClB;AAEA,WAASsM,GAAcxF,GAAK1K,GAAO4D,GAAQ8L,GAAKzC,GAAK6C,GAAK;AACxD,QAAIlM,IAAS8L,IAAMhF,EAAI,OAAQ,OAAM,IAAI,WAAW,oBAAoB;AACxE,QAAI9G,IAAS,EAAG,OAAM,IAAI,WAAW,oBAAoB;AAAA,EAC3D;AAEA,WAASuM,GAAYzF,GAAK1K,GAAO4D,GAAQwM,GAAcT,GAAU;AAC/D,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KACHO,GAAaxF,GAAK1K,GAAO4D,GAAQ,CAAkD,GAErFuF,EAAQ,MAAMuB,GAAK1K,GAAO4D,GAAQwM,GAAc,IAAI,CAAC,GAC9CxM,IAAS;AAAA,EAClB;AAEA,EAAAwG,EAAO,UAAU,eAAe,SAAuBpK,GAAO4D,GAAQ+L,GAAU;AAC9E,WAAOQ,GAAW,MAAMnQ,GAAO4D,GAAQ,IAAM+L,CAAQ;AAAA,EACvD,GAEAvF,EAAO,UAAU,eAAe,SAAuBpK,GAAO4D,GAAQ+L,GAAU;AAC9E,WAAOQ,GAAW,MAAMnQ,GAAO4D,GAAQ,IAAO+L,CAAQ;AAAA,EACxD;AAEA,WAASU,GAAa3F,GAAK1K,GAAO4D,GAAQwM,GAAcT,GAAU;AAChE,WAAA3P,IAAQ,CAACA,GACT4D,IAASA,MAAW,GACf+L,KACHO,GAAaxF,GAAK1K,GAAO4D,GAAQ,CAAoD,GAEvFuF,EAAQ,MAAMuB,GAAK1K,GAAO4D,GAAQwM,GAAc,IAAI,CAAC,GAC9CxM,IAAS;AAAA,EAClB;AAEA,EAAAwG,EAAO,UAAU,gBAAgB,SAAwBpK,GAAO4D,GAAQ+L,GAAU;AAChF,WAAOU,GAAY,MAAMrQ,GAAO4D,GAAQ,IAAM+L,CAAQ;AAAA,EACxD,GAEAvF,EAAO,UAAU,gBAAgB,SAAwBpK,GAAO4D,GAAQ+L,GAAU;AAChF,WAAOU,GAAY,MAAMrQ,GAAO4D,GAAQ,IAAO+L,CAAQ;AAAA,EACzD,GAGAvF,EAAO,UAAU,OAAO,SAAevE,GAAQyK,GAAahL,GAAOC,GAAK;AACtE,QAAI,CAAC6E,EAAO,SAASvE,CAAM,EAAG,OAAM,IAAI,UAAU,6BAA6B;AAS/E,QARKP,MAAOA,IAAQ,IAChB,CAACC,KAAOA,MAAQ,MAAGA,IAAM,KAAK,SAC9B+K,KAAezK,EAAO,WAAQyK,IAAczK,EAAO,SAClDyK,MAAaA,IAAc,IAC5B/K,IAAM,KAAKA,IAAMD,MAAOC,IAAMD,IAG9BC,MAAQD,KACRO,EAAO,WAAW,KAAK,KAAK,WAAW,EAAG,QAAO;AAGrD,QAAIyK,IAAc;AAChB,YAAM,IAAI,WAAW,2BAA2B;AAElD,QAAIhL,IAAQ,KAAKA,KAAS,KAAK,OAAQ,OAAM,IAAI,WAAW,oBAAoB;AAChF,QAAIC,IAAM,EAAG,OAAM,IAAI,WAAW,yBAAyB;AAG3D,IAAIA,IAAM,KAAK,WAAQA,IAAM,KAAK,SAC9BM,EAAO,SAASyK,IAAc/K,IAAMD,MACtCC,IAAMM,EAAO,SAASyK,IAAchL;AAGtC,QAAIhK,IAAMiK,IAAMD;AAEhB,WAAI,SAASO,KAAU,OAAO,WAAW,UAAU,cAAe,aAEhE,KAAK,WAAWyK,GAAahL,GAAOC,CAAG,IAEvC,WAAW,UAAU,IAAI;AAAA,MACvBM;AAAA,MACA,KAAK,SAASP,GAAOC,CAAG;AAAA,MACxB+K;AAAA,OAIGhV;AAAA,EACT,GAMA8O,EAAO,UAAU,OAAO,SAAetL,GAAKwG,GAAOC,GAAKiG,GAAU;AAEhE,QAAI,OAAO1M,KAAQ,UAAU;AAS3B,UARI,OAAOwG,KAAU,YACnBkG,IAAWlG,GACXA,IAAQ,GACRC,IAAM,KAAK,UACF,OAAOA,KAAQ,aACxBiG,IAAWjG,GACXA,IAAM,KAAK,SAETiG,MAAa,UAAa,OAAOA,KAAa;AAChD,cAAM,IAAI,UAAU,2BAA2B;AAEjD,UAAI,OAAOA,KAAa,YAAY,CAACpB,EAAO,WAAWoB,CAAQ;AAC7D,cAAM,IAAI,UAAU,uBAAuBA,CAAQ;AAErD,UAAI1M,EAAI,WAAW,GAAG;AACpB,YAAImJ,IAAOnJ,EAAI,WAAW,CAAC;AAC3B,SAAK0M,MAAa,UAAUvD,IAAO,OAC/BuD,MAAa,cAEf1M,IAAMmJ;AAAA,MAEd;AAAA,IACA,MAAS,CAAI,OAAOnJ,KAAQ,WACxBA,IAAMA,IAAM,MACH,OAAOA,KAAQ,cACxBA,IAAM,OAAOA,CAAG;AAIlB,QAAIwG,IAAQ,KAAK,KAAK,SAASA,KAAS,KAAK,SAASC;AACpD,YAAM,IAAI,WAAW,oBAAoB;AAG3C,QAAIA,KAAOD;AACT,aAAO;AAGT,IAAAA,IAAQA,MAAU,GAClBC,IAAMA,MAAQ,SAAY,KAAK,SAASA,MAAQ,GAE3CzG,MAAKA,IAAM;AAEhB,QAAItD;AACJ,QAAI,OAAOsD,KAAQ;AACjB,WAAKtD,IAAI8J,GAAO9J,IAAI+J,GAAK,EAAE/J;AACzB,aAAKA,CAAC,IAAIsD;AAAA,SAEP;AACL,UAAIvD,IAAQ6O,EAAO,SAAStL,CAAG,IAC3BA,IACAsL,EAAO,KAAKtL,GAAK0M,CAAQ,GACzBlQ,IAAMC,EAAM;AAChB,UAAID,MAAQ;AACV,cAAM,IAAI,UAAU,gBAAgBwD,IAClC,mCAAmC;AAEvC,WAAKtD,IAAI,GAAGA,IAAI+J,IAAMD,GAAO,EAAE9J;AAC7B,aAAKA,IAAI8J,CAAK,IAAI/J,EAAMC,IAAIF,CAAG;AAAA,IAErC;AAEE,WAAO;AAAA,EACT;AAKA,MAAIiV,KAAoB;AAExB,WAASC,GAAa/M,GAAK;AAMzB,QAJAA,IAAMA,EAAI,MAAM,GAAG,EAAE,CAAC,GAEtBA,IAAMA,EAAI,KAAI,EAAG,QAAQ8M,IAAmB,EAAE,GAE1C9M,EAAI,SAAS,EAAG,QAAO;AAE3B,WAAOA,EAAI,SAAS,MAAM;AACxB,MAAAA,IAAMA,IAAM;AAEd,WAAOA;AAAA,EACT;AAEA,WAAS8I,GAAab,GAAQ+E,GAAO;AACnC,IAAAA,IAAQA,KAAS;AAMjB,aALI7B,GACA3N,IAASyK,EAAO,QAChBgF,IAAgB,MAChBnV,IAAQ,CAAA,GAEHC,IAAI,GAAGA,IAAIyF,GAAQ,EAAEzF,GAAG;AAI/B,UAHAoT,IAAYlD,EAAO,WAAWlQ,CAAC,GAG3BoT,IAAY,SAAUA,IAAY,OAAQ;AAE5C,YAAI,CAAC8B,GAAe;AAElB,cAAI9B,IAAY,OAAQ;AAEtB,aAAK6B,KAAS,KAAK,MAAIlV,EAAM,KAAK,KAAM,KAAM,GAAI;AAClD;AAAA,UACV,WAAmBC,IAAI,MAAMyF,GAAQ;AAE3B,aAAKwP,KAAS,KAAK,MAAIlV,EAAM,KAAK,KAAM,KAAM,GAAI;AAClD;AAAA,UACV;AAGQ,UAAAmV,IAAgB9B;AAEhB;AAAA,QACR;AAGM,YAAIA,IAAY,OAAQ;AACtB,WAAK6B,KAAS,KAAK,MAAIlV,EAAM,KAAK,KAAM,KAAM,GAAI,GAClDmV,IAAgB9B;AAChB;AAAA,QACR;AAGM,QAAAA,KAAa8B,IAAgB,SAAU,KAAK9B,IAAY,SAAU;AAAA,MACxE,MAAW,CAAI8B,MAEJD,KAAS,KAAK,MAAIlV,EAAM,KAAK,KAAM,KAAM,GAAI;AAMpD,UAHAmV,IAAgB,MAGZ9B,IAAY,KAAM;AACpB,aAAK6B,KAAS,KAAK,EAAG;AACtB,QAAAlV,EAAM,KAAKqT,CAAS;AAAA,MAC1B,WAAeA,IAAY,MAAO;AAC5B,aAAK6B,KAAS,KAAK,EAAG;AACtB,QAAAlV,EAAM;AAAA,UACJqT,KAAa,IAAM;AAAA,UACnBA,IAAY,KAAO;AAAA;MAE3B,WAAeA,IAAY,OAAS;AAC9B,aAAK6B,KAAS,KAAK,EAAG;AACtB,QAAAlV,EAAM;AAAA,UACJqT,KAAa,KAAM;AAAA,UACnBA,KAAa,IAAM,KAAO;AAAA,UAC1BA,IAAY,KAAO;AAAA;MAE3B,WAAeA,IAAY,SAAU;AAC/B,aAAK6B,KAAS,KAAK,EAAG;AACtB,QAAAlV,EAAM;AAAA,UACJqT,KAAa,KAAO;AAAA,UACpBA,KAAa,KAAM,KAAO;AAAA,UAC1BA,KAAa,IAAM,KAAO;AAAA,UAC1BA,IAAY,KAAO;AAAA;MAE3B;AACM,cAAM,IAAI,MAAM,oBAAoB;AAAA,IAE1C;AAEE,WAAOrT;AAAA,EACT;AAEA,WAAS+S,GAAc7K,GAAK;AAE1B,aADIkN,IAAY,CAAA,GACPnV,IAAI,GAAGA,IAAIiI,EAAI,QAAQ,EAAEjI;AAEhC,MAAAmV,EAAU,KAAKlN,EAAI,WAAWjI,CAAC,IAAI,GAAI;AAEzC,WAAOmV;AAAA,EACT;AAEA,WAASlC,GAAgBhL,GAAKgN,GAAO;AAGnC,aAFI3G,GAAG8G,GAAIC,GACPF,IAAY,CAAA,GACPnV,IAAI,GAAGA,IAAIiI,EAAI,UACjB,GAAAgN,KAAS,KAAK,IADW,EAAEjV;AAGhC,MAAAsO,IAAIrG,EAAI,WAAWjI,CAAC,GACpBoV,IAAK9G,KAAK,GACV+G,IAAK/G,IAAI,KACT6G,EAAU,KAAKE,CAAE,GACjBF,EAAU,KAAKC,CAAE;AAGnB,WAAOD;AAAA,EACT;AAEA,WAASnE,GAAe/I,GAAK;AAC3B,WAAOrI,EAAO,YAAYoV,GAAY/M,CAAG,CAAC;AAAA,EAC5C;AAEA,WAAS2K,GAAY0C,GAAKC,GAAKnN,GAAQ3C,GAAQ;AAC7C,aAASzF,IAAI,GAAGA,IAAIyF,KACb,EAAAzF,IAAIoI,KAAUmN,EAAI,UAAYvV,KAAKsV,EAAI,SADlB,EAAEtV;AAE5B,MAAAuV,EAAIvV,IAAIoI,CAAM,IAAIkN,EAAItV,CAAC;AAEzB,WAAOA;AAAA,EACT;AAKA,WAASyP,EAAYjH,GAAK1B,GAAM;AAC9B,WAAO0B,aAAe1B,KACnB0B,KAAO,QAAQA,EAAI,eAAe,QAAQA,EAAI,YAAY,QAAQ,QACjEA,EAAI,YAAY,SAAS1B,EAAK;AAAA,EACpC;AACA,WAAS2J,GAAajI,GAAK;AAEzB,WAAOA,MAAQA;AAAA,EACjB;AAIA,MAAIuL,KAAuB,WAAY;AAGrC,aAFIyB,IAAW,oBACXC,IAAQ,IAAI,MAAM,GAAG,GAChBzV,IAAI,GAAGA,IAAI,IAAI,EAAEA;AAExB,eADI0V,IAAM1V,IAAI,IACLsS,IAAI,GAAGA,IAAI,IAAI,EAAEA;AACxB,QAAAmD,EAAMC,IAAMpD,CAAC,IAAIkD,EAASxV,CAAC,IAAIwV,EAASlD,CAAC;AAG7C,WAAOmD;AAAA,EACT,EAAC;;;;ACtxDD,MAAIrQ,IAASoJ,IACTI,IAASxJ,EAAO;AAGpB,WAASuQ,EAAWL,GAAKC,GAAK;AAC5B,aAAS5M,KAAO2M;AACd,MAAAC,EAAI5M,CAAG,IAAI2M,EAAI3M,CAAG;AAAA,EAEtB;AACA,EAAIiG,EAAO,QAAQA,EAAO,SAASA,EAAO,eAAeA,EAAO,kBAC9DgH,YAAiBxQ,KAGjBuQ,EAAUvQ,GAAQuJ,CAAO,GACzBA,WAAiBkH;AAGnB,WAASA,EAAY1G,GAAKC,GAAkB3J,GAAQ;AAClD,WAAOmJ,EAAOO,GAAKC,GAAkB3J,CAAM;AAAA,EAC7C;AAEA,EAAAoQ,EAAW,YAAY,OAAO,OAAOjH,EAAO,SAAS,GAGrD+G,EAAU/G,GAAQiH,CAAU,GAE5BA,EAAW,OAAO,SAAU1G,GAAKC,GAAkB3J,GAAQ;AACzD,QAAI,OAAO0J,KAAQ;AACjB,YAAM,IAAI,UAAU,+BAA+B;AAErD,WAAOP,EAAOO,GAAKC,GAAkB3J,CAAM;AAAA,EAC7C,GAEAoQ,EAAW,QAAQ,SAAU/K,GAAMiF,GAAMC,GAAU;AACjD,QAAI,OAAOlF,KAAS;AAClB,YAAM,IAAI,UAAU,2BAA2B;AAEjD,QAAIoE,IAAMN,EAAO9D,CAAI;AACrB,WAAIiF,MAAS,SACP,OAAOC,KAAa,WACtBd,EAAI,KAAKa,GAAMC,CAAQ,IAEvBd,EAAI,KAAKa,CAAI,IAGfb,EAAI,KAAK,CAAC,GAELA;AAAA,EACT,GAEA2G,EAAW,cAAc,SAAU/K,GAAM;AACvC,QAAI,OAAOA,KAAS;AAClB,YAAM,IAAI,UAAU,2BAA2B;AAEjD,WAAO8D,EAAO9D,CAAI;AAAA,EACpB,GAEA+K,EAAW,kBAAkB,SAAU/K,GAAM;AAC3C,QAAI,OAAOA,KAAS;AAClB,YAAM,IAAI,UAAU,2BAA2B;AAEjD,WAAO1F,EAAO,WAAW0F,CAAI;AAAA,EAC/B;;qBChEIgL,KAAW,CAAA,EAAG,UAElBC,KAAiB,MAAM,WAAW,SAAU9I,GAAK;AAC/C,SAAO6I,GAAS,KAAK7I,CAAG,KAAK;AAC/B,GCDAnG,KAAiB,WCAjBkP,KAAiB,QCAjBC,KAAiB,OCAjBC,KAAiB,WCAjBC,KAAiB,YCAjBvX,KAAiB,gBCAjBwX,KAAiB,aCAjBC,KAAiB,UCAjBC,KAAiB,KAAK,KCAtBC,KAAiB,KAAK,OCAtB9E,KAAiB,KAAK,KCAtB6C,KAAiB,KAAK,KCAtBkC,KAAiB,KAAK,KCAtBC,KAAiB,KAAK,OCAtBC,KAAiB,OAAO,SAAS,SAAetT,GAAG;AAClD,SAAOA,MAAMA;AACd,GCHIuT,KAASnI,IAGb9G,KAAiB,SAAckP,GAAQ;AACtC,SAAID,GAAOC,CAAM,KAAKA,MAAW,IACzBA,IAEDA,IAAS,IAAI,KAAK;AAC1B,GCPAC,KAAiB,OAAO,0BCApBC,KAAQtI;AAEZ,IAAIsI;AACH,MAAI;AACHA,IAAAA,GAAM,CAAA,GAAI,QAAQ;AAAA,EACpB,QAAa;AAEXA,IAAAA,KAAQ;AAAA,EACV;AAGA,IAAAC,KAAiBD,ICXbE,KAAkB,OAAO,kBAAkB;AAC/C,IAAIA;AACH,MAAI;AACHA,IAAAA,GAAgB,CAAA,GAAI,KAAK,EAAE,OAAO,EAAC,CAAE;AAAA,EACvC,QAAa;AAEXA,IAAAA,KAAkB;AAAA,EACpB;AAGA,IAAAC,KAAiBD;;wBCTjBE,KAAiB,WAAsB;AACtC,QAAI,OAAO,UAAW,cAAc,OAAO,OAAO,yBAA0B;AAAc,aAAO;AACjG,QAAI,OAAO,OAAO,YAAa;AAAY,aAAO;AAGlD,QAAI1O,IAAM,CAAA,GACN2O,IAAM,OAAO,MAAM,GACnBC,IAAS,OAAOD,CAAG;AAIvB,QAHI,OAAOA,KAAQ,YAEf,OAAO,UAAU,SAAS,KAAKA,CAAG,MAAM,qBACxC,OAAO,UAAU,SAAS,KAAKC,CAAM,MAAM;AAAqB,aAAO;AAU3E,QAAIC,IAAS;AACb,IAAA7O,EAAI2O,CAAG,IAAIE;AACX,aAASC,KAAK9O;AAAO,aAAO;AAG5B,QAFI,OAAO,OAAO,QAAS,cAAc,OAAO,KAAKA,CAAG,EAAE,WAAW,KAEjE,OAAO,OAAO,uBAAwB,cAAc,OAAO,oBAAoBA,CAAG,EAAE,WAAW;AAAK,aAAO;AAE/G,QAAI+O,IAAO,OAAO,sBAAsB/O,CAAG;AAG3C,QAFI+O,EAAK,WAAW,KAAKA,EAAK,CAAC,MAAMJ,KAEjC,CAAC,OAAO,UAAU,qBAAqB,KAAK3O,GAAK2O,CAAG;AAAK,aAAO;AAEpE,QAAI,OAAO,OAAO,4BAA6B,YAAY;AAE1D,UAAIK;AAAA;AAAA,QAAgD,OAAO,yBAAyBhP,GAAK2O,CAAG;AAAA;AAC5F,UAAIK,EAAW,UAAUH,KAAUG,EAAW,eAAe;AAAQ,eAAO;AAAA,IAC9E;AAEC,WAAO;AAAA,EACR;;;;;;AC1CA,MAAIC,IAAa,OAAO,SAAW,OAAe,QAC9CC,IAAgBlJ,GAAA;AAGpBmJ,SAAAA,KAAiB,WAA4B;AAI5C,WAHI,OAAOF,KAAe,cACtB,OAAO,UAAW,cAClB,OAAOA,EAAW,KAAK,KAAM,YAC7B,OAAO,OAAO,KAAK,KAAM,WAAmB,KAEzCC,EAAa;AAAA,EACrB;;;;wBCVAE,KAAkB,OAAO,UAAY,OAAe,QAAQ,kBAAmB;;;;;;ACD/E,MAAIC,IAAUrJ;AAGd,SAAAsJ,KAAiBD,EAAQ,kBAAkB;;ACD3C,IAAIE,KAAgB,mDAChBC,KAAQ,OAAO,UAAU,UACzBvG,KAAM,KAAK,KACXwG,KAAW,qBAEXC,KAAW,SAAkB9U,GAAGC,GAAG;AAGnC,WAFI4J,IAAM,CAAA,GAEDjN,IAAI,GAAGA,IAAIoD,EAAE,QAAQpD,KAAK;AAC/B,IAAAiN,EAAIjN,CAAC,IAAIoD,EAAEpD,CAAC;AAEhB,WAASsS,IAAI,GAAGA,IAAIjP,EAAE,QAAQiP,KAAK;AAC/B,IAAArF,EAAIqF,IAAIlP,EAAE,MAAM,IAAIC,EAAEiP,CAAC;AAG3B,SAAOrF;AACX,GAEIkL,KAAQ,SAAeC,GAAShQ,GAAQ;AAExC,WADI6E,IAAM,CAAA,GACDjN,IAAIoI,GAAakK,IAAI,GAAGtS,IAAIoY,EAAQ,QAAQpY,KAAK,GAAGsS,KAAK;AAC9D,IAAArF,EAAIqF,CAAC,IAAI8F,EAAQpY,CAAC;AAEtB,SAAOiN;AACX,GAEIoL,KAAQ,SAAUpL,GAAKqL,GAAQ;AAE/B,WADIrQ,IAAM,IACDjI,IAAI,GAAGA,IAAIiN,EAAI,QAAQjN,KAAK;AACjC,IAAAiI,KAAOgF,EAAIjN,CAAC,GACRA,IAAI,IAAIiN,EAAI,WACZhF,KAAOqQ;AAGf,SAAOrQ;AACX,GAEAsQ,KAAiB,SAAcC,GAAM;AACjC,MAAInO,IAAS;AACb,MAAI,OAAOA,KAAW,cAAc2N,GAAM,MAAM3N,CAAM,MAAM4N;AACxD,UAAM,IAAI,UAAUF,KAAgB1N,CAAM;AAyB9C,WAvBIoO,IAAON,GAAM,WAAW,CAAC,GAEzBO,GACAC,IAAS,WAAY;AACrB,QAAI,gBAAgBD,GAAO;AACvB,UAAIpa,IAAS+L,EAAO;AAAA,QAChB;AAAA,QACA6N,GAASO,GAAM,SAAS;AAAA,MACxC;AACY,aAAI,OAAOna,CAAM,MAAMA,IACZA,IAEJ;AAAA,IACnB;AACQ,WAAO+L,EAAO;AAAA,MACVmO;AAAA,MACAN,GAASO,GAAM,SAAS;AAAA,IACpC;AAAA,EAEA,GAEQG,IAAcnH,GAAI,GAAGpH,EAAO,SAASoO,EAAK,MAAM,GAChDI,IAAY,CAAA,GACP7Y,IAAI,GAAGA,IAAI4Y,GAAa5Y;AAC7B,IAAA6Y,EAAU7Y,CAAC,IAAI,MAAMA;AAKzB,MAFA0Y,IAAQ,SAAS,UAAU,sBAAsBL,GAAMQ,GAAW,GAAG,IAAI,2CAA2C,EAAEF,CAAM,GAExHtO,EAAO,WAAW;AAClB,QAAIyO,IAAQ,WAAiB;AAAA;AAC7B,IAAAA,EAAM,YAAYzO,EAAO,WACzBqO,EAAM,YAAY,IAAII,EAAK,GAC3BA,EAAM,YAAY;AAAA,EAC1B;AAEI,SAAOJ;AACX,GCjFIH,KAAiB/J,IAErBuK,KAAiB,SAAS,UAAU,QAAQR,ICD5CS,KAAiB,SAAS,UAAU,MCApCC,KAAiB,SAAS,UAAU,OCApCC,KAAiB,OAAO,UAAY,OAAe,WAAW,QAAQ,OCDlEC,KAAO3K,IAEP4K,KAAS3K,IACT4K,KAAQC,IACRC,KAAgBC,IAGpBC,KAAiBF,MAAiBJ,GAAK,KAAKE,IAAOD,EAAM,GCPrDD,KAAO3K,IACPkL,KAAajL,IAEb4K,KAAQC,IACRK,KAAeH,IAGnBI,KAAiB,SAAuBnB,GAAM;AAC7C,MAAIA,EAAK,SAAS,KAAK,OAAOA,EAAK,CAAC,KAAM;AACzC,UAAM,IAAIiB,GAAW,wBAAwB;AAE9C,SAAOC,GAAaR,IAAME,IAAOZ,CAAI;AACtC;;;;ACZA,MAAIoB,IAAWrL,IACXqI,IAAOpI,IAEPqL;AACJ,MAAI;AAEH,IAAAA;AAAA,IAA0E,CAAA,EAAI,cAAc,MAAM;AAAA,EACnG,SAAS/L,GAAG;AACX,QAAI,CAACA,KAAK,OAAOA,KAAM,YAAY,EAAE,UAAUA,MAAMA,EAAE,SAAS;AAC/D,YAAMA;AAAA,EAER;AAGA,MAAIgM,IAAO,CAAC,CAACD,KAAoBjD,KAAQA;AAAA,IAAK,OAAO;AAAA;AAAA,IAAyD;AAAA,EAAW,GAErHgB,IAAU,QACVmC,IAAkBnC,EAAQ;AAG9B,SAAAoC,KAAiBF,KAAQ,OAAOA,EAAK,OAAQ,aAC1CF,EAAS,CAACE,EAAK,GAAG,CAAC,IACnB,OAAOC,KAAoB;AAAA;AAAA,IACK,SAAmBxV,GAAO;AAE1D,aAAOwV,EAAgBxV,KAAS,OAAOA,IAAQqT,EAAQrT,CAAK,CAAC;AAAA,IAChE;AAAA,MACI;;;;;;AC3BJ,MAAI0V,IAAkB1L,GAAA,GAClB2L,IAAmB1L,GAAA,GAEnB2L,IAAiBd,GAAA;AAGrBe,SAAAA,KAAiBH,IACd,SAAkBI,GAAG;AAEtB,WAAOJ,EAAgBI,CAAC;AAAA,EAC1B,IACGH,IACC,SAAkBG,GAAG;AACtB,QAAI,CAACA,KAAM,OAAOA,KAAM,YAAY,OAAOA,KAAM;AAChD,YAAM,IAAI,UAAU,yBAAyB;AAG9C,WAAOH,EAAiBG,CAAC;AAAA,EAC5B,IACIF,IACC,SAAkBE,GAAG;AAEtB,WAAOF,EAAeE,CAAC;AAAA,EAC3B,IACK;;;;;;ACxBL,MAAIC,IAAO,SAAS,UAAU,MAC1BC,IAAU,OAAO,UAAU,gBAC3BrB,IAAO3K;AAGX,SAAAiM,KAAiBtB,EAAK,KAAKoB,GAAMC,CAAO;;ACLxC,IAAIE,GAEA7C,KAAUrJ,IAEVmM,KAASlM,IACTmM,KAAatB,IACbuB,KAAcrB,IACdsB,KAAkBC,IAClBC,KAAeC,IACfvB,KAAawB,IACbC,KAAYC,IAEZ9E,KAAM+E,IACN9E,KAAQ+E,IACR7J,KAAM8J,IACNjH,KAAMkH,IACNhF,KAAMiF,IACNhF,KAAQiF,IACRhU,KAAOiU,IAEPC,KAAY,UAGZC,KAAwB,SAAUC,GAAkB;AACvD,MAAI;AACH,WAAOF,GAAU,2BAA2BE,IAAmB,gBAAgB,EAAC;AAAA,EAClF,QAAa;AAAA,EAAA;AACb,GAEIhF,KAAQiF,IACR/E,KAAkBgF,IAElBC,KAAiB,WAAY;AAChC,QAAM,IAAIvC,GAAU;AACrB,GACIwC,KAAiBpF,KACjB,WAAY;AACd,MAAI;AAEH,qBAAU,QACHmF;AAAA,EACV,QAAyB;AACtB,QAAI;AAEH,aAAOnF,GAAM,WAAW,QAAQ,EAAE;AAAA,IACtC,QAAwB;AACpB,aAAOmF;AAAA,IACX;AAAA,EACA;AACA,EAAE,IACCA,IAECtE,IAAawE,GAAA,EAAsB,GAEnC9B,IAAW+B,GAAA,GACXC,KAAaC,GAAA,GACbC,KAAcC,GAAA,GAEdpD,KAASqD,IACTpD,KAAQqD,IAERC,KAAY,CAAA,GAEZC,KAAa,OAAO,aAAe,OAAe,CAACvC,IAAWK,IAAYL,EAAS,UAAU,GAE7FwC,IAAa;AAAA,EAChB,WAAW;AAAA,EACX,oBAAoB,OAAO,iBAAmB,MAAcnC,IAAY;AAAA,EACxE,WAAW;AAAA,EACX,iBAAiB,OAAO,cAAgB,MAAcA,IAAY;AAAA,EAClE,4BAA4B/C,KAAc0C,IAAWA,EAAS,CAAA,EAAG,OAAO,QAAQ,EAAC,CAAE,IAAIK;AAAAA,EACvF,oCAAoCA;AAAAA,EACpC,mBAAmBiC;AAAA,EACnB,oBAAoBA;AAAA,EACpB,4BAA4BA;AAAA,EAC5B,4BAA4BA;AAAA,EAC5B,aAAa,OAAO,UAAY,MAAcjC,IAAY;AAAA,EAC1D,YAAY,OAAO,SAAW,MAAcA,IAAY;AAAA,EACxD,mBAAmB,OAAO,gBAAkB,MAAcA,IAAY;AAAA,EACtE,oBAAoB,OAAO,iBAAmB,MAAcA,IAAY;AAAA,EACxE,aAAa;AAAA,EACb,cAAc,OAAO,WAAa,MAAcA,IAAY;AAAA,EAC5D,UAAU;AAAA,EACV,eAAe;AAAA,EACf,wBAAwB;AAAA,EACxB,eAAe;AAAA,EACf,wBAAwB;AAAA,EACxB,WAAWC;AAAA,EACX,UAAU;AAAA;AAAA,EACV,eAAeC;AAAA,EACf,kBAAkB,OAAO,eAAiB,MAAcF,IAAY;AAAA,EACpE,kBAAkB,OAAO,eAAiB,MAAcA,IAAY;AAAA,EACpE,kBAAkB,OAAO,eAAiB,MAAcA,IAAY;AAAA,EACpE,0BAA0B,OAAO,uBAAyB,MAAcA,IAAY;AAAA,EACpF,cAAckB;AAAA,EACd,uBAAuBe;AAAA,EACvB,eAAe,OAAO,YAAc,MAAcjC,IAAY;AAAA,EAC9D,gBAAgB,OAAO,aAAe,MAAcA,IAAY;AAAA,EAChE,gBAAgB,OAAO,aAAe,MAAcA,IAAY;AAAA,EAChE,cAAc;AAAA,EACd,WAAW;AAAA,EACX,uBAAuB/C,KAAc0C,IAAWA,EAASA,EAAS,GAAG,OAAO,QAAQ,GAAG,CAAC,IAAIK;AAAAA,EAC5F,UAAU,OAAO,QAAS,WAAW,OAAOA;AAAAA,EAC5C,SAAS,OAAO,MAAQ,MAAcA,IAAY;AAAA,EAClD,0BAA0B,OAAO,MAAQ,OAAe,CAAC/C,KAAc,CAAC0C,IAAWK,IAAYL,GAAS,oBAAI,IAAG,GAAG,OAAO,QAAQ,EAAC,CAAE;AAAA,EACpI,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,YAAYxC;AAAA,EACZ,qCAAqCf;AAAA,EACrC,gBAAgB;AAAA,EAChB,cAAc;AAAA,EACd,aAAa,OAAO,UAAY,MAAc4D,IAAY;AAAA,EAC1D,WAAW,OAAO,QAAU,MAAcA,IAAY;AAAA,EACtD,gBAAgBG;AAAA,EAChB,oBAAoBC;AAAA,EACpB,aAAa,OAAO,UAAY,MAAcJ,IAAY;AAAA,EAC1D,YAAY;AAAA,EACZ,SAAS,OAAO,MAAQ,MAAcA,IAAY;AAAA,EAClD,0BAA0B,OAAO,MAAQ,OAAe,CAAC/C,KAAc,CAAC0C,IAAWK,IAAYL,GAAS,oBAAI,IAAG,GAAG,OAAO,QAAQ,EAAC,CAAE;AAAA,EACpI,uBAAuB,OAAO,oBAAsB,MAAcK,IAAY;AAAA,EAC9E,YAAY;AAAA,EACZ,6BAA6B/C,KAAc0C,IAAWA,EAAS,GAAG,OAAO,QAAQ,EAAC,CAAE,IAAIK;AAAAA,EACxF,YAAY/C,IAAa,SAAS+C;AAAAA,EAClC,iBAAiBM;AAAA,EACjB,oBAAoBkB;AAAA,EACpB,gBAAgBU;AAAA,EAChB,eAAelD;AAAAA,EACf,gBAAgB,OAAO,aAAe,MAAcgB,IAAY;AAAA,EAChE,uBAAuB,OAAO,oBAAsB,MAAcA,IAAY;AAAA,EAC9E,iBAAiB,OAAO,cAAgB,MAAcA,IAAY;AAAA,EAClE,iBAAiB,OAAO,cAAgB,MAAcA,IAAY;AAAA,EAClE,cAAcS;AAAA,EACd,aAAa,OAAO,UAAY,MAAcT,IAAY;AAAA,EAC1D,aAAa,OAAO,UAAY,MAAcA,IAAY;AAAA,EAC1D,aAAa,OAAO,UAAY,MAAcA,IAAY;AAAA,EAE1D,6BAA6BrB;AAAA,EAC7B,8BAA8BD;AAAA,EAC9B,2BAA2BpC;AAAA,EAC3B,2BAA2BqF;AAAA,EAC3B,cAAc/F;AAAA,EACd,gBAAgBC;AAAA,EAChB,cAAc9E;AAAA,EACd,cAAc6C;AAAA,EACd,cAAckC;AAAA,EACd,gBAAgBC;AAAA,EAChB,eAAe/O;AAAA,EACf,4BAA4B6U;AAC7B;AAEA,IAAIlC;AACH,MAAI;AACH,SAAK;AAAA,EACP,SAAUtM,GAAG;AAEX,QAAI+O,KAAazC,EAASA,EAAStM,CAAC,CAAC;AACrC,IAAA8O,EAAW,mBAAmB,IAAIC;AAAA,EACpC;AAGA,IAAIC,KAAS,SAASA,EAAOzY,GAAM;AAClC,MAAIE;AACJ,MAAIF,MAAS;AACZ,IAAAE,IAAQqX,GAAsB,sBAAsB;AAAA,WAC1CvX,MAAS;AACnB,IAAAE,IAAQqX,GAAsB,iBAAiB;AAAA,WACrCvX,MAAS;AACnB,IAAAE,IAAQqX,GAAsB,uBAAuB;AAAA,WAC3CvX,MAAS,oBAAoB;AACvC,QAAI0Y,IAAKD,EAAO,0BAA0B;AAC1C,IAAIC,MACHxY,IAAQwY,EAAG;AAAA,EAEd,WAAY1Y,MAAS,4BAA4B;AAC/C,QAAI2Y,IAAMF,EAAO,kBAAkB;AACnC,IAAIE,KAAO5C,MACV7V,IAAQ6V,EAAS4C,EAAI,SAAS;AAAA,EAEjC;AAEC,SAAAJ,EAAWvY,CAAI,IAAIE,GAEZA;AACR,GAEI0Y,KAAiB;AAAA,EACpB,WAAW;AAAA,EACX,0BAA0B,CAAC,eAAe,WAAW;AAAA,EACrD,oBAAoB,CAAC,SAAS,WAAW;AAAA,EACzC,wBAAwB,CAAC,SAAS,aAAa,SAAS;AAAA,EACxD,wBAAwB,CAAC,SAAS,aAAa,SAAS;AAAA,EACxD,qBAAqB,CAAC,SAAS,aAAa,MAAM;AAAA,EAClD,uBAAuB,CAAC,SAAS,aAAa,QAAQ;AAAA,EACtD,4BAA4B,CAAC,iBAAiB,WAAW;AAAA,EACzD,oBAAoB,CAAC,0BAA0B,WAAW;AAAA,EAC1D,6BAA6B,CAAC,0BAA0B,aAAa,WAAW;AAAA,EAChF,sBAAsB,CAAC,WAAW,WAAW;AAAA,EAC7C,uBAAuB,CAAC,YAAY,WAAW;AAAA,EAC/C,mBAAmB,CAAC,QAAQ,WAAW;AAAA,EACvC,oBAAoB,CAAC,SAAS,WAAW;AAAA,EACzC,wBAAwB,CAAC,aAAa,WAAW;AAAA,EACjD,2BAA2B,CAAC,gBAAgB,WAAW;AAAA,EACvD,2BAA2B,CAAC,gBAAgB,WAAW;AAAA,EACvD,uBAAuB,CAAC,YAAY,WAAW;AAAA,EAC/C,eAAe,CAAC,qBAAqB,WAAW;AAAA,EAChD,wBAAwB,CAAC,qBAAqB,aAAa,WAAW;AAAA,EACtE,wBAAwB,CAAC,aAAa,WAAW;AAAA,EACjD,yBAAyB,CAAC,cAAc,WAAW;AAAA,EACnD,yBAAyB,CAAC,cAAc,WAAW;AAAA,EACnD,eAAe,CAAC,QAAQ,OAAO;AAAA,EAC/B,mBAAmB,CAAC,QAAQ,WAAW;AAAA,EACvC,kBAAkB,CAAC,OAAO,WAAW;AAAA,EACrC,qBAAqB,CAAC,UAAU,WAAW;AAAA,EAC3C,qBAAqB,CAAC,UAAU,WAAW;AAAA,EAC3C,uBAAuB,CAAC,UAAU,aAAa,UAAU;AAAA,EACzD,sBAAsB,CAAC,UAAU,aAAa,SAAS;AAAA,EACvD,sBAAsB,CAAC,WAAW,WAAW;AAAA,EAC7C,uBAAuB,CAAC,WAAW,aAAa,MAAM;AAAA,EACtD,iBAAiB,CAAC,WAAW,KAAK;AAAA,EAClC,oBAAoB,CAAC,WAAW,QAAQ;AAAA,EACxC,qBAAqB,CAAC,WAAW,SAAS;AAAA,EAC1C,yBAAyB,CAAC,cAAc,WAAW;AAAA,EACnD,6BAA6B,CAAC,kBAAkB,WAAW;AAAA,EAC3D,qBAAqB,CAAC,UAAU,WAAW;AAAA,EAC3C,kBAAkB,CAAC,OAAO,WAAW;AAAA,EACrC,gCAAgC,CAAC,qBAAqB,WAAW;AAAA,EACjE,qBAAqB,CAAC,UAAU,WAAW;AAAA,EAC3C,qBAAqB,CAAC,UAAU,WAAW;AAAA,EAC3C,0BAA0B,CAAC,eAAe,WAAW;AAAA,EACrD,yBAAyB,CAAC,cAAc,WAAW;AAAA,EACnD,wBAAwB,CAAC,aAAa,WAAW;AAAA,EACjD,yBAAyB,CAAC,cAAc,WAAW;AAAA,EACnD,gCAAgC,CAAC,qBAAqB,WAAW;AAAA,EACjE,0BAA0B,CAAC,eAAe,WAAW;AAAA,EACrD,0BAA0B,CAAC,eAAe,WAAW;AAAA,EACrD,uBAAuB,CAAC,YAAY,WAAW;AAAA,EAC/C,sBAAsB,CAAC,WAAW,WAAW;AAAA,EAC7C,sBAAsB,CAAC,WAAW,WAAW;AAC9C,GAEI/D,KAAOgE,IACPC,KAASC,GAAA,GACTC,KAAUnE,GAAK,KAAKE,IAAO,MAAM,UAAU,MAAM,GACjDkE,KAAepE,GAAK,KAAKC,IAAQ,MAAM,UAAU,MAAM,GACvDoE,KAAWrE,GAAK,KAAKE,IAAO,OAAO,UAAU,OAAO,GACpDoE,KAAYtE,GAAK,KAAKE,IAAO,OAAO,UAAU,KAAK,GACnDqE,KAAQvE,GAAK,KAAKE,IAAO,OAAO,UAAU,IAAI,GAG9CsE,KAAa,sGACbC,KAAe,YACfC,KAAe,SAAsB3N,GAAQ;AAChD,MAAI4N,IAAQL,GAAUvN,GAAQ,GAAG,CAAC,GAC9B6N,IAAON,GAAUvN,GAAQ,EAAE;AAC/B,MAAI4N,MAAU,OAAOC,MAAS;AAC7B,UAAM,IAAI/C,GAAa,gDAAgD;AACjE,MAAI+C,MAAS,OAAOD,MAAU;AACpC,UAAM,IAAI9C,GAAa,gDAAgD;AAExE,MAAI1c,IAAS,CAAA;AACb,SAAAkf,GAAStN,GAAQyN,IAAY,SAAUK,GAAOpH,GAAQqH,GAAOC,GAAW;AACvE,IAAA5f,EAAOA,EAAO,MAAM,IAAI2f,IAAQT,GAASU,GAAWN,IAAc,IAAI,IAAIhH,KAAUoH;AAAA,EACtF,CAAE,GACM1f;AACR,GAGI6f,KAAmB,SAA0B7Z,GAAM8Z,GAAc;AACpE,MAAIC,IAAgB/Z,GAChBga;AAMJ,MALIlB,GAAOF,IAAgBmB,CAAa,MACvCC,IAAQpB,GAAemB,CAAa,GACpCA,IAAgB,MAAMC,EAAM,CAAC,IAAI,MAG9BlB,GAAOP,GAAYwB,CAAa,GAAG;AACtC,QAAI7Z,IAAQqY,EAAWwB,CAAa;AAIpC,QAHI7Z,MAAUmY,OACbnY,IAAQuY,GAAOsB,CAAa,IAEzB,OAAO7Z,IAAU,OAAe,CAAC4Z;AACpC,YAAM,IAAI1E,GAAW,eAAepV,IAAO,sDAAsD;AAGlG,WAAO;AAAA,MACN,OAAOga;AAAA,MACP,MAAMD;AAAA,MACN,OAAO7Z;AAAA,IACV;AAAA,EACA;AAEC,QAAM,IAAIwW,GAAa,eAAe1W,IAAO,kBAAkB;AAChE,GAEAia,KAAiB,SAAsBja,GAAM8Z,GAAc;AAC1D,MAAI,OAAO9Z,KAAS,YAAYA,EAAK,WAAW;AAC/C,UAAM,IAAIoV,GAAW,2CAA2C;AAEjE,MAAI,UAAU,SAAS,KAAK,OAAO0E,KAAiB;AACnD,UAAM,IAAI1E,GAAW,2CAA2C;AAGjE,MAAIgE,GAAM,eAAepZ,CAAI,MAAM;AAClC,UAAM,IAAI0W,GAAa,oFAAoF;AAE5G,MAAIpX,IAAQia,GAAavZ,CAAI,GACzBka,IAAoB5a,EAAM,SAAS,IAAIA,EAAM,CAAC,IAAI,IAElD6a,IAAYN,GAAiB,MAAMK,IAAoB,KAAKJ,CAAY,GACxEM,IAAoBD,EAAU,MAC9Bja,IAAQia,EAAU,OAClBE,IAAqB,IAErBL,IAAQG,EAAU;AACtB,EAAIH,MACHE,IAAoBF,EAAM,CAAC,GAC3Bf,GAAa3Z,GAAO0Z,GAAQ,CAAC,GAAG,CAAC,GAAGgB,CAAK,CAAC;AAG3C,WAASte,IAAI,GAAG4e,IAAQ,IAAM5e,IAAI4D,EAAM,QAAQ5D,KAAK,GAAG;AACvD,QAAI+D,IAAOH,EAAM5D,CAAC,GACd8d,IAAQL,GAAU1Z,GAAM,GAAG,CAAC,GAC5Bga,IAAON,GAAU1Z,GAAM,EAAE;AAC7B,SAEG+Z,MAAU,OAAOA,MAAU,OAAOA,MAAU,OACzCC,MAAS,OAAOA,MAAS,OAAOA,MAAS,QAE3CD,MAAUC;AAEb,YAAM,IAAI/C,GAAa,sDAAsD;AAS9E,SAPIjX,MAAS,iBAAiB,CAAC6a,OAC9BD,IAAqB,KAGtBH,KAAqB,MAAMza,GAC3B2a,IAAoB,MAAMF,IAAoB,KAE1CpB,GAAOP,GAAY6B,CAAiB;AACvC,MAAAla,IAAQqY,EAAW6B,CAAiB;AAAA,aAC1Bla,KAAS,MAAM;AACzB,UAAI,EAAET,KAAQS,IAAQ;AACrB,YAAI,CAAC4Z;AACJ,gBAAM,IAAI1E,GAAW,wBAAwBpV,IAAO,6CAA6C;AAElG;AAAA,MACJ;AACG,UAAIwS,MAAU9W,IAAI,KAAM4D,EAAM,QAAQ;AACrC,YAAImW,IAAOjD,GAAMtS,GAAOT,CAAI;AAC5B,QAAA6a,IAAQ,CAAC,CAAC7E,GASN6E,KAAS,SAAS7E,KAAQ,EAAE,mBAAmBA,EAAK,OACvDvV,IAAQuV,EAAK,MAEbvV,IAAQA,EAAMT,CAAI;AAAA,MAEvB;AACI,QAAA6a,IAAQxB,GAAO5Y,GAAOT,CAAI,GAC1BS,IAAQA,EAAMT,CAAI;AAGnB,MAAI6a,KAAS,CAACD,MACb9B,EAAW6B,CAAiB,IAAIla;AAAA,IAEpC;AAAA,EACA;AACC,SAAOA;AACR,GCvXIqa,KAAerQ,IAEfsQ,KAAgBrQ,IAGhBsQ,KAAWD,GAAc,CAACD,GAAa,4BAA4B,CAAC,CAAC,GAGzEG,KAAiB,SAA4B1a,GAAM8Z,GAAc;AAGhE,MAAIK;AAAA;AAAA,IAA2EI,GAAava,GAAM,CAAC,CAAC8Z,CAAY;AAAA;AAChH,SAAI,OAAOK,KAAc,cAAcM,GAASza,GAAM,aAAa,IAAI,KAC/Dwa;AAAA;AAAA,IAAoC,CAACL,CAAS;AAAA,EAAC,IAEhDA;AACR;;;;AChBA,MAAIQ,IAAU,SAAS,UAAU,UAC7B/F,IAAe,OAAO,WAAY,YAAY,YAAY,QAAQ,QAAQ,OAC1EgG,GACAC;AACJ,MAAI,OAAOjG,KAAiB,cAAc,OAAO,OAAO,kBAAmB;AAC1E,QAAI;AACH,MAAAgG,IAAe,OAAO,eAAe,CAAA,GAAI,UAAU;AAAA,QAClD,KAAK,WAAY;AAChB,gBAAMC;AAAA,QACV;AAAA,MACA,CAAG,GACDA,IAAmB,CAAA,GAEnBjG,EAAa,WAAY;AAAE,cAAM;AAAA,MAAG,GAAI,MAAMgG,CAAY;AAAA,IAC5D,SAAU5H,GAAG;AACX,MAAIA,MAAM6H,MACTjG,IAAe;AAAA,IAElB;AAAA;AAEC,IAAAA,IAAe;AAGhB,MAAIkG,IAAmB,eACnBC,IAAe,SAA4B7a,GAAO;AACrD,QAAI;AACH,UAAI8a,IAAQL,EAAQ,KAAKza,CAAK;AAC9B,aAAO4a,EAAiB,KAAKE,CAAK;AAAA,IACpC,QAAa;AACX,aAAO;AAAA,IACT;AAAA,EACA,GAEIC,IAAoB,SAA0B/a,GAAO;AACxD,QAAI;AACH,aAAI6a,EAAa7a,CAAK,IAAY,MAClCya,EAAQ,KAAKza,CAAK,GACX;AAAA,IACT,QAAa;AACX,aAAO;AAAA,IACT;AAAA,EACA,GACIwT,IAAQ,OAAO,UAAU,UACzBwH,IAAc,mBACdC,IAAU,qBACVC,IAAW,8BACXC,IAAW,8BACXC,IAAY,oCACZC,IAAY,2BACZC,IAAiB,OAAO,UAAW,cAAc,CAAC,CAAC,OAAO,aAE1DC,IAAS,EAAE,KAAK,CAAA,CAAA,IAEhBC,IAAQ,WAA4B;AAAE,WAAO;AAAA,EAAM;AACvD,MAAI,OAAO,YAAa,UAAU;AAEjC,QAAIC,IAAM,SAAS;AACnB,IAAIjI,EAAM,KAAKiI,CAAG,MAAMjI,EAAM,KAAK,SAAS,GAAG,MAC9CgI,IAAQ,SAA0Bxb,GAAO;AAGxC,WAAKub,KAAU,CAACvb,OAAW,OAAOA,IAAU,OAAe,OAAOA,KAAU;AAC3E,YAAI;AACH,cAAIyD,IAAM+P,EAAM,KAAKxT,CAAK;AAC1B,kBACCyD,MAAQ0X,KACL1X,MAAQ2X,KACR3X,MAAQ4X,KACR5X,MAAQuX,MACPhb,EAAM,EAAE,KAAK;AAAA,QACvB,QAAgB;AAAA,QAAA;AAEb,aAAO;AAAA,IACV;AAAA,EAEA;AAEA,SAAA0b,KAAiBhH,IACd,SAAoB1U,GAAO;AAC5B,QAAIwb,EAAMxb,CAAK;AAAK,aAAO;AAE3B,QADI,CAACA,KACD,OAAOA,KAAU,cAAc,OAAOA,KAAU;AAAY,aAAO;AACvE,QAAI;AACH,MAAA0U,EAAa1U,GAAO,MAAM0a,CAAY;AAAA,IACzC,SAAWnR,GAAG;AACX,UAAIA,MAAMoR;AAAoB,eAAO;AAAA,IACxC;AACE,WAAO,CAACE,EAAa7a,CAAK,KAAK+a,EAAkB/a,CAAK;AAAA,EACxD,IACG,SAAoBA,GAAO;AAC5B,QAAIwb,EAAMxb,CAAK;AAAK,aAAO;AAE3B,QADI,CAACA,KACD,OAAOA,KAAU,cAAc,OAAOA,KAAU;AAAY,aAAO;AACvE,QAAIsb;AAAkB,aAAOP,EAAkB/a,CAAK;AACpD,QAAI6a,EAAa7a,CAAK;AAAK,aAAO;AAClC,QAAI2b,IAAWnI,EAAM,KAAKxT,CAAK;AAC/B,WAAI2b,MAAaV,KAAWU,MAAaT,KAAY,CAAE,iBAAkB,KAAKS,CAAQ,IAAY,KAC3FZ,EAAkB/a,CAAK;AAAA,EAChC;;;;;;AClGA,MAAI0b,IAAa1R,GAAA,GAEbwJ,IAAQ,OAAO,UAAU,UACzBoI,IAAiB,OAAO,UAAU,gBAGlCC,IAAe,SAAsBhQ,GAAOiQ,GAAUC,GAAU;AAChE,aAASvgB,IAAI,GAAGF,IAAMuQ,EAAM,QAAQrQ,IAAIF,GAAKE;AACzC,MAAIogB,EAAe,KAAK/P,GAAOrQ,CAAC,MACxBugB,KAAY,OACZD,EAASjQ,EAAMrQ,CAAC,GAAGA,GAAGqQ,CAAK,IAE3BiQ,EAAS,KAAKC,GAAUlQ,EAAMrQ,CAAC,GAAGA,GAAGqQ,CAAK;AAAA,EAI1D,GAGImQ,IAAgB,SAAuBtQ,GAAQoQ,GAAUC,GAAU;AACnE,aAASvgB,IAAI,GAAGF,IAAMoQ,EAAO,QAAQlQ,IAAIF,GAAKE;AAE1C,MAAIugB,KAAY,OACZD,EAASpQ,EAAO,OAAOlQ,CAAC,GAAGA,GAAGkQ,CAAM,IAEpCoQ,EAAS,KAAKC,GAAUrQ,EAAO,OAAOlQ,CAAC,GAAGA,GAAGkQ,CAAM;AAAA,EAG/D,GAGIuQ,IAAgB,SAAuBjX,GAAQ8W,GAAUC,GAAU;AACnE,aAASG,KAAKlX;AACV,MAAI4W,EAAe,KAAK5W,GAAQkX,CAAC,MACzBH,KAAY,OACZD,EAAS9W,EAAOkX,CAAC,GAAGA,GAAGlX,CAAM,IAE7B8W,EAAS,KAAKC,GAAU/W,EAAOkX,CAAC,GAAGA,GAAGlX,CAAM;AAAA,EAI5D;AAGA,WAASmX,EAAQ1X,GAAG;AAChB,WAAO+O,EAAM,KAAK/O,CAAC,MAAM;AAAA,EAC7B;AAGA,SAAA2X,KAAiB,SAAiBjQ,GAAM2P,GAAUO,GAAS;AACvD,QAAI,CAACX,EAAWI,CAAQ;AACpB,YAAM,IAAI,UAAU,6BAA6B;AAGrD,QAAIC;AACJ,IAAI,UAAU,UAAU,MACpBA,IAAWM,IAGXF,EAAQhQ,CAAI,IACZ0P,EAAa1P,GAAM2P,GAAUC,CAAQ,IAC9B,OAAO5P,KAAS,WACvB6P,EAAc7P,GAAM2P,GAAUC,CAAQ,IAEtCE,EAAc9P,GAAM2P,GAAUC,CAAQ;AAAA,EAE9C;;;;wBCjEAO,KAAiB;AAAA,IAChB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA;;;;;;ACbD,MAAIC,IAAgBvS,GAAA,GAEhBwS,IAAI,OAAO,aAAe,MAAcC,KAAS;AAGrD,SAAAC,KAAiB,WAAgC;AAEhD,aAD2DpN,IAAM,CAAA,GACxD9T,IAAI,GAAGA,IAAI+gB,EAAc,QAAQ/gB;AACzC,MAAI,OAAOghB,EAAED,EAAc/gB,CAAC,CAAC,KAAM,eAElC8T,EAAIA,EAAI,MAAM,IAAIiN,EAAc/gB,CAAC;AAGnC,WAAO8T;AAAA,EACR;;;;;;ACdA,MAAIkD,IAAkBxI,IAElBwM,IAAevM,IACfiL,IAAaJ,IAEbvC,IAAOyC;AAGX,SAAA2H,KAAiB,SAChB3Y,GACA4Y,GACA5c,GACC;AACD,QAAI,CAACgE,KAAQ,OAAOA,KAAQ,YAAY,OAAOA,KAAQ;AACtD,YAAM,IAAIkR,EAAW,wCAAwC;AAE9D,QAAI,OAAO0H,KAAa,YAAY,OAAOA,KAAa;AACvD,YAAM,IAAI1H,EAAW,0CAA0C;AAEhE,QAAI,UAAU,SAAS,KAAK,OAAO,UAAU,CAAC,KAAM,aAAa,UAAU,CAAC,MAAM;AACjF,YAAM,IAAIA,EAAW,yDAAyD;AAE/E,QAAI,UAAU,SAAS,KAAK,OAAO,UAAU,CAAC,KAAM,aAAa,UAAU,CAAC,MAAM;AACjF,YAAM,IAAIA,EAAW,uDAAuD;AAE7E,QAAI,UAAU,SAAS,KAAK,OAAO,UAAU,CAAC,KAAM,aAAa,UAAU,CAAC,MAAM;AACjF,YAAM,IAAIA,EAAW,2DAA2D;AAEjF,QAAI,UAAU,SAAS,KAAK,OAAO,UAAU,CAAC,KAAM;AACnD,YAAM,IAAIA,EAAW,yCAAyC;AAG/D,QAAI2H,IAAgB,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI,MACtDC,IAAc,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI,MACpDC,IAAkB,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI,MACxDC,IAAQ,UAAU,SAAS,IAAI,UAAU,CAAC,IAAI,IAG9CzH,IAAO,CAAC,CAAChD,KAAQA,EAAKvO,GAAK4Y,CAAQ;AAEvC,QAAIpK;AACH,MAAAA,EAAgBxO,GAAK4Y,GAAU;AAAA,QAC9B,cAAcG,MAAoB,QAAQxH,IAAOA,EAAK,eAAe,CAACwH;AAAA,QACtE,YAAYF,MAAkB,QAAQtH,IAAOA,EAAK,aAAa,CAACsH;AAAA,QAChE,OAAO7c;AAAA,QACP,UAAU8c,MAAgB,QAAQvH,IAAOA,EAAK,WAAW,CAACuH;AAAA,MAC7D,CAAG;AAAA,aACSE,KAAU,CAACH,KAAiB,CAACC,KAAe,CAACC;AAEvD,MAAA/Y,EAAI4Y,CAAQ,IAAI5c;AAAA;AAEhB,YAAM,IAAIwW,EAAa,6GAA6G;AAAA,EAEtI;;;;;;ACrDA,MAAIhE,IAAkBxI,IAElBiT,IAAyB,WAAkC;AAC9D,WAAO,CAAC,CAACzK;AAAA,EACV;AAEA,SAAAyK,EAAuB,0BAA0B,WAAmC;AAEnF,QAAI,CAACzK;AACJ,aAAO;AAER,QAAI;AACH,aAAOA,EAAgB,CAAA,GAAI,UAAU,EAAE,OAAO,EAAC,CAAE,EAAE,WAAW;AAAA,IAChE,QAAa;AAEX,aAAO;AAAA,IACT;AAAA,EACA,GAEA0K,KAAiBD;;;;;;ACnBjB,MAAI5C,IAAerQ,IACfmT,IAASlT,GAAA,GACTmT,IAAiBtI,KAAmC,GACpDzC,IAAO2C,IAEPE,IAAaqB,IACb8G,IAAShD,EAAa,cAAc;AAGxC,SAAAiD,KAAiB,SAA2B9E,GAAIvX,GAAQ;AACvD,QAAI,OAAOuX,KAAO;AACjB,YAAM,IAAItD,EAAW,wBAAwB;AAE9C,QAAI,OAAOjU,KAAW,YAAYA,IAAS,KAAKA,IAAS,cAAcoc,EAAOpc,CAAM,MAAMA;AACzF,YAAM,IAAIiU,EAAW,4CAA4C;AAGlE,QAAI8H,IAAQ,UAAU,SAAS,KAAK,CAAC,CAAC,UAAU,CAAC,GAE7CO,IAA+B,IAC/BC,IAA2B;AAC/B,QAAI,YAAYhF,KAAMnG,GAAM;AAC3B,UAAIkD,IAAOlD,EAAKmG,GAAI,QAAQ;AAC5B,MAAIjD,KAAQ,CAACA,EAAK,iBACjBgI,IAA+B,KAE5BhI,KAAQ,CAACA,EAAK,aACjBiI,IAA2B;AAAA,IAE9B;AAEC,YAAID,KAAgCC,KAA4B,CAACR,OAC5DI,IACHD;AAAA;AAAA,MAA6C3E;AAAA,MAAK;AAAA,MAAUvX;AAAA,MAAQ;AAAA,MAAM;AAAA,IAAI,IAE9Ekc;AAAA;AAAA,MAA6C3E;AAAA,MAAK;AAAA,MAAUvX;AAAA,IAAM,IAG7DuX;AAAA,EACR;;;;;;ACvCA,MAAI7D,IAAO3K,IACP4K,IAAS3K,IACTgL,IAAcH;AAGlB,SAAA2I,KAAiB,WAAqB;AACrC,WAAOxI,EAAYN,GAAMC,GAAQ,SAAS;AAAA,EAC3C;;;;;ACPA,QAAI0I,IAAoBtT,GAAA,GAEpBwI,IAAkBvI,IAElBqQ,IAAgBxF,IAChB2I,IAAYzI,GAAA;AAEhB,IAAA5D,EAAA,UAAiB,SAAkBsM,GAAkB;AACpD,UAAIC,IAAOrD,EAAc,SAAS,GAC9BsD,IAAiBF,EAAiB,UAAU,UAAU,SAAS;AACnE,aAAOJ;AAAA,QACNK;AAAA,QACA,KAAKC,IAAiB,IAAIA,IAAiB;AAAA,QAC3C;AAAA,MACF;AAAA,IACA,GAEIpL,IACHA,EAAgBpB,EAAO,SAAS,SAAS,EAAE,OAAOqM,GAAW,IAE7DrM,EAAA,QAAA,QAAuBqM;AAAA;;;;;;ACpBxB,MAAItK,IAAanJ,GAAA;AAGjB,SAAA0I,KAAiB,WAA+B;AAC/C,WAAOS,EAAU,KAAM,CAAC,CAAC,OAAO;AAAA,EACjC;;;;;;ACLA,MAAIiJ,IAAUpS,GAAA,GACV0S,IAAuBzS,GAAA,GACvBoL,IAAWP,GAAA,GACX0F,IAAYxF,IACZ3C,IAAOkE,IACPV,IAAWY,GAAA,GAEXoH,IAAYrD,EAAU,2BAA2B,GACjDc,IAAiB5E,KAAgC,GAEjD8F,IAAI,OAAO,aAAe,MAAcC,KAAS,YACjDqB,IAAcpB,EAAoB,GAElCqB,IAASvD,EAAU,wBAAwB,GAG3CD,IAAWC,EAAU,2BAA2B,EAAI,KAAK,SAAiB3O,GAAO7L,GAAO;AAC3F,aAASxE,IAAI,GAAGA,IAAIqQ,EAAM,QAAQrQ,KAAK;AACtC,UAAIqQ,EAAMrQ,CAAC,MAAMwE;AAChB,eAAOxE;AAGT,WAAO;AAAA,EACR,GAIIwiB,IAAQ,EAAE,WAAW,KAAI;AAC7B,EAAI1C,KAAkBjJ,KAAQwD,IAC7BuG,EAAQ0B,GAAa,SAAUG,GAAY;AAC1C,QAAIxV,IAAM,IAAI+T,EAAEyB,CAAU,EAAC;AAC3B,QAAI,OAAO,eAAexV,KAAOoN,GAAU;AAC1C,UAAIrL,IAAQqL,EAASpN,CAAG,GAEpBuK,IAAaX,EAAK7H,GAAO,OAAO,WAAW;AAC/C,UAAI,CAACwI,KAAcxI,GAAO;AACzB,YAAI0T,IAAarI,EAASrL,CAAK;AAE/B,QAAAwI,IAAaX,EAAK6L,GAAY,OAAO,WAAW;AAAA,MACpD;AAEG,MAAAF,EAAM,MAAMC,CAAU,IAAI5I,EAASrC,EAAW,GAAG;AAAA,IACpD;AAAA,EACA,CAAE,IAEDoJ,EAAQ0B,GAAa,SAAUG,GAAY;AAC1C,QAAIxV,IAAM,IAAI+T,EAAEyB,CAAU,EAAC,GACvBzF,IAAK/P,EAAI,SAASA,EAAI;AAC1B,IAAI+P,MACHwF;AAAA;AAAA,MACkD,MAAMC;AAAA;;IAGvD5I,EAASmD,CAAE;AAAA,EAGf,CAAE;AAIF,MAAI2F,IAAiB,SAA2Bne,GAAO;AACF,QAAI6N,IAAQ;AAChE,WAAAuO;AAAA;AAAA,MACmE4B;AAAA;AAAA,MAElE,SAAUI,GAAQH,GAAY;AAC7B,YAAI,CAACpQ;AACJ,cAAI;AAEH,YAAI,MAAMuQ,EAAOpe,CAAK,MAAMie,MAC3BpQ;AAAA,YAAmDkQ,EAAOE,GAAY,CAAC;AAAA,UAE7E,QAAgB;AAAA,UAAA;AAAA,MAEhB;AAAA,IACA,GACQpQ;AAAA,EACR,GAGIwQ,IAAY,SAAsBre,GAAO;AACG,QAAI6N,IAAQ;AAC3D,WAAAuO;AAAA;AAAA,MACkE4B;AAAA;AAAA,MACgB,SAAUI,GAAQte,GAAM;AACxG,YAAI,CAAC+N;AACJ,cAAI;AAEH,YAAAuQ,EAAOpe,CAAK,GACZ6N;AAAA,YAAmDkQ,EAAOje,GAAM,CAAC;AAAA,UACtE,QAAgB;AAAA,UAAA;AAAA,MAEhB;AAAA,IACA,GACQ+N;AAAA,EACR;AAGA,SAAAyQ,KAAiB,SAAyBte,GAAO;AAChD,QAAI,CAACA,KAAS,OAAOA,KAAU;AAAY,aAAO;AAClD,QAAI,CAACsb,GAAgB;AAEpB,UAAIvX,IAAMga,EAAOF,EAAU7d,CAAK,GAAG,GAAG,EAAE;AACxC,aAAIua,EAASuD,GAAa/Z,CAAG,IAAI,KACzBA,IAEJA,MAAQ,WACJ,KAGDsa,EAAUre,CAAK;AAAA,IACxB;AACC,WAAKqS,IACE8L,EAAene,CAAK,IADP;AAAA,EAErB;;;;;;AClHA,MAAIse,IAAkBtU,GAAA;AAGtBuU,SAAAA,KAAiB,SAAsBve,GAAO;AAC7C,WAAO,CAAC,CAACse,EAAgBte,CAAK;AAAA,EAC/B;;ACLA,IAAIkV,KAAalL,IAEbwQ,KAAYvQ,IAGZuU,KAAoBhE,GAAU,+BAA+B,EAAI,GAEjE+D,KAAezJ,GAAA,GAInB2J,KAAiBD,MAAqB,SAA0B/Z,GAAG;AAClE,MAAI,CAAC8Z,GAAa9Z,CAAC;AAClB,UAAM,IAAIyQ,GAAW,mBAAmB;AAEzC,SAAOzQ,EAAE;AACV,GChBI2F,IAASJ,GAAuB,QAChCmS,KAAUlS,IACVwU,KAAmB3J,IAEnB4J,KAAS,YAAY,UAAU,SAAgB1a,GAAK;AACvD,MAAI;AACH,WAAAya,GAAiBza,CAAG,GACb;AAAA,EACT,QAAa;AACX,WAAO;AAAA,EACT;AACA,GAEI2a,KAAgB,OAAO,aAAe,KACtCC,KAAiB,OAAO,cAAgB,OACxC,OAAO,aAAe,KACtBC,KAAqBD,OAAmBxU,EAAO,qBAAqB,cAAcA,EAAO,sBAE7F0U,KAAiB,SAAkBC,GAAMvT,GAAU;AAClD,MAAIpB,EAAO,SAAS2U,CAAI;AACvB,WAAIA,EAAK,eAAe,EAAE,cAAcA,KAEhC3U,EAAO,KAAK2U,CAAI,IAEjBA;AAGR,MAAI,OAAOA,KAAS;AACnB,WAAO3U,EAAO,KAAK2U,GAAMvT,CAAQ;AAOlC,MAAIoT,MAAkBF,GAAOK,CAAI,GAAG;AAEnC,QAAIA,EAAK,eAAe;AACvB,aAAO3U,EAAO,MAAM,CAAC;AAItB,QAAIyU,IAAoB;AACvB,UAAInQ,IAAMtE,EAAO,KAAK2U,EAAK,QAAQA,EAAK,YAAYA,EAAK,UAAU;AAKnE,UAAIrQ,EAAI,eAAeqQ,EAAK;AAC3B,eAAOrQ;AAAA,IAEX;AAGE,QAAI5F,IAAQiW,aAAgB,aAAaA,IAAO,IAAI,WAAWA,EAAK,QAAQA,EAAK,YAAYA,EAAK,UAAU,GACxGjlB,IAASsQ,EAAO,KAAKtB,CAAK;AAM9B,QAAIhP,EAAO,WAAWilB,EAAK;AAC1B,aAAOjlB;AAAA,EAEV;AAMC,MAAI6kB,MAAiBI,aAAgB;AACpC,WAAO3U,EAAO,KAAK2U,CAAI;AAGxB,MAAIC,IAAQ7C,GAAQ4C,CAAI;AACxB,MAAIC;AACH,aAASxjB,IAAI,GAAGA,IAAIujB,EAAK,QAAQvjB,KAAK,GAAG;AACxC,UAAIiJ,IAAIsa,EAAKvjB,CAAC;AACd,UACC,OAAOiJ,KAAM,YACVA,IAAI,KACJA,IAAI,OACJ,CAAC,CAACA,MAAMA;AAEX,cAAM,IAAI,WAAW,iDAAiD;AAAA,IAE1E;AAQC,MACCua,KACC5U,EAAO,SAAS2U,CAAI,KACjBA,EAAK,eACL,OAAOA,EAAK,YAAY,YAAa,cACrCA,EAAK,YAAY,SAASA,CAAI;AAGlC,WAAO3U,EAAO,KAAK2U,CAAI;AAGxB,QAAM,IAAI,UAAU,wFAAwF;AAC7G,GC1GI3U,KAASJ,GAAuB,QAChC8U,KAAW7U;AAGf,SAASgV,GAAKC,GAAWC,GAAW;AACnC,OAAK,SAAS/U,GAAO,MAAM8U,CAAS,GACpC,KAAK,aAAaC,GAClB,KAAK,aAAaD,GAClB,KAAK,OAAO;AACb;AAEAD,GAAK,UAAU,SAAS,SAAUF,GAAM3Z,GAAK;AAE5C,EAAA2Z,IAAOD,GAASC,GAAM3Z,KAAO,MAAM;AAOnC,WALIga,IAAQ,KAAK,QACbF,IAAY,KAAK,YACjBje,IAAS8d,EAAK,QACdM,IAAQ,KAAK,MAERzb,IAAS,GAAGA,IAAS3C,KAAS;AAItC,aAHIqe,IAAWD,IAAQH,GACnBK,IAAY,KAAK,IAAIte,IAAS2C,GAAQsb,IAAYI,CAAQ,GAErD9jB,IAAI,GAAGA,IAAI+jB,GAAW/jB;AAC9B,MAAA4jB,EAAME,IAAW9jB,CAAC,IAAIujB,EAAKnb,IAASpI,CAAC;AAGtC,IAAA6jB,KAASE,GACT3b,KAAU2b,GAELF,IAAQH,MAAe,KAC3B,KAAK,QAAQE,CAAK;AAAA,EAErB;AAEC,cAAK,QAAQne,GACN;AACR;AAEAge,GAAK,UAAU,SAAS,SAAU7Z,GAAK;AACtC,MAAIoa,IAAM,KAAK,OAAO,KAAK;AAE3B,OAAK,OAAOA,CAAG,IAAI,KAMnB,KAAK,OAAO,KAAK,GAAGA,IAAM,CAAC,GAEvBA,KAAO,KAAK,eACf,KAAK,QAAQ,KAAK,MAAM,GACxB,KAAK,OAAO,KAAK,CAAC;AAGnB,MAAIC,IAAO,KAAK,OAAO;AAGvB,MAAIA,KAAQ;AACX,SAAK,OAAO,cAAcA,GAAM,KAAK,aAAa,CAAC;AAAA,OAG7C;AACN,QAAIC,KAAWD,IAAO,gBAAgB,GAClCE,KAAYF,IAAOC,KAAW;AAElC,SAAK,OAAO,cAAcC,GAAU,KAAK,aAAa,CAAC,GACvD,KAAK,OAAO,cAAcD,GAAS,KAAK,aAAa,CAAC;AAAA,EACxD;AAEC,OAAK,QAAQ,KAAK,MAAM;AACxB,MAAIE,IAAO,KAAK,MAAK;AAErB,SAAOxa,IAAMwa,EAAK,SAASxa,CAAG,IAAIwa;AACnC;AAEAX,GAAK,UAAU,UAAU,WAAY;AACpC,QAAM,IAAI,MAAM,yCAAyC;AAC1D;AAEA,IAAAW,KAAiBX,ICxEbY,KAAW7V,IACXiV,KAAOhV,IACPG,KAAS0K,GAAuB,QAEhCgL,KAAI;AAAA,EACP;AAAA,EAAY;AAAA,EAAY;AAAA,EAAgB;AACzC,GAEIC,KAAI,IAAI,MAAM,EAAE;AAEpB,SAASC,KAAO;AACf,OAAK,KAAI,GACT,KAAK,KAAKD,IAEVd,GAAK,KAAK,MAAM,IAAI,EAAE;AACvB;AAEAY,GAASG,IAAMf,EAAI;AAEnBe,GAAK,UAAU,OAAO,WAAY;AACjC,cAAK,KAAK,YACV,KAAK,KAAK,YACV,KAAK,KAAK,YACV,KAAK,KAAK,WACV,KAAK,KAAK,YAEH;AACR;AAEA,SAASC,GAAMrX,GAAK;AACnB,SAAQA,KAAO,IAAMA,MAAQ;AAC9B;AAEA,SAASsX,GAAMtX,GAAK;AACnB,SAAQA,KAAO,IAAMA,MAAQ;AAC9B;AAEA,SAASuX,GAAOvX,GAAK;AACpB,SAAQA,KAAO,KAAOA,MAAQ;AAC/B;AAEA,SAASwX,GAAGtf,GAAGjC,GAAGiL,GAAGD,GAAG;AACvB,SAAI/I,MAAM,IACDjC,IAAIiL,IAAM,CAACjL,IAAIgL,IAEpB/I,MAAM,IACDjC,IAAIiL,IAAMjL,IAAIgL,IAAMC,IAAID,IAE1BhL,IAAIiL,IAAID;AAChB;AAEAmW,GAAK,UAAU,UAAU,SAAUK,GAAG;AASrC,WARIC,IAAI,KAAK,IAET1hB,IAAI,KAAK,KAAK,GACdC,IAAI,KAAK,KAAK,GACdiL,IAAI,KAAK,KAAK,GACdD,IAAI,KAAK,KAAK,GACdN,IAAI,KAAK,KAAK,GAET/N,IAAI,GAAGA,IAAI,IAAI,EAAEA;AACzB,IAAA8kB,EAAE9kB,CAAC,IAAI6kB,EAAE,YAAY7kB,IAAI,CAAC;AAE3B,SAAOA,IAAI,IAAI,EAAEA;AAChB,IAAA8kB,EAAE9kB,CAAC,IAAIykB,GAAMK,EAAE9kB,IAAI,CAAC,IAAI8kB,EAAE9kB,IAAI,CAAC,IAAI8kB,EAAE9kB,IAAI,EAAE,IAAI8kB,EAAE9kB,IAAI,EAAE,CAAC;AAGzD,WAASsS,IAAI,GAAGA,IAAI,IAAI,EAAEA,GAAG;AAC5B,QAAIhN,IAAI,CAAC,EAAEgN,IAAI,KACXyS,IAAKL,GAAMthB,CAAC,IAAIwhB,GAAGtf,GAAGjC,GAAGiL,GAAGD,CAAC,IAAIN,IAAI+W,EAAExS,CAAC,IAAIgS,GAAEhf,CAAC,IAAK;AAExD,IAAAyI,IAAIM,GACJA,IAAIC,GACJA,IAAIqW,GAAOthB,CAAC,GACZA,IAAID,GACJA,IAAI2hB;AAAA,EACN;AAEC,OAAK,KAAM3hB,IAAI,KAAK,KAAM,GAC1B,KAAK,KAAMC,IAAI,KAAK,KAAM,GAC1B,KAAK,KAAMiL,IAAI,KAAK,KAAM,GAC1B,KAAK,KAAMD,IAAI,KAAK,KAAM,GAC1B,KAAK,KAAMN,IAAI,KAAK,KAAM;AAC3B;AAEAyW,GAAK,UAAU,QAAQ,WAAY;AAClC,MAAIQ,IAAIpW,GAAO,YAAY,EAAE;AAE7B,SAAAoW,EAAE,aAAa,KAAK,KAAK,GAAG,CAAC,GAC7BA,EAAE,aAAa,KAAK,KAAK,GAAG,CAAC,GAC7BA,EAAE,aAAa,KAAK,KAAK,GAAG,CAAC,GAC7BA,EAAE,aAAa,KAAK,KAAK,GAAG,EAAE,GAC9BA,EAAE,aAAa,KAAK,KAAK,GAAG,EAAE,GAEvBA;AACR;AAEA,IAAAC,KAAiBT;;AC5GV,SAASU,GAAM9f,GAAQ;AAC5B,MAAI+f,IAAM;AACV,aAAWxa,KAAQ,IAAI,WAAWvF,CAAM;AACtC,IAAIuF,IAAO,OAAIwa,KAAO,MACtBA,KAAOxa,EAAK,SAAS,EAAE;AAEzB,SAAOwa;AACT;ACFA,IAAIC,KAAqB;AAElB,eAAeC,GAAOjgB,GAAQ;AACnC,SAAIggB,OAAuB,SACzBA,KAAqB,MAAME,GAAc,IAEpCF,KAAqBG,GAAWngB,CAAM,IAAIogB,GAAWpgB,CAAM;AACpE;AAKA,SAASogB,GAAWpgB,GAAQ;AAC1B,SAAO,IAAIqe,GAAI,EAAG,OAAOre,CAAM,EAAE,OAAO,KAAK;AAC/C;AAEA,eAAemgB,GAAWngB,GAAQ;AAChC,QAAMgf,IAAO,MAAM,OAAO,OAAO,OAAO,SAAShf,CAAM;AACvD,SAAO8f,GAAMd,CAAI;AACnB;AAEA,eAAekB,KAAiB;AAG9B,MAAI;AAEF,QADa,MAAMC,GAAW,IAAI,WAAW,CAAA,CAAE,CAAC,MACnC,2CAA4C,QAAO;AAAA,EAClE,QAAY;AAAA,EAEZ;AACA,SAAO;AACT;AC1BA,SAASE,GAAa9f,GAAQ;AAC5B,QAAM5F,IAAQ,CAAA;AACd,MAAI4K,IAAO,GACP+a,IAAY;AAChB,KAAG;AACD,IAAA/a,IAAOhF,EAAO,UAAS;AAEvB,UAAMggB,IAAYhb,IAAO;AACzB,IAAA5K,EAAM,KAAK4lB,CAAS,GAGpBD,IAAY/a,IAAO;AAAA,EACrB,SAAS+a;AAIT,SAAO3lB,EAAM,OAAO,CAACqD,GAAGC,MAAQD,IAAI,KAAM,IAAKC,GAAG,EAAE;AACtD;AAIA,SAASuiB,GAAkBjgB,GAAQkgB,GAAW;AAC5C,MAAIvnB,IAASunB,GACTnb,IAAQ,GACRC,IAAO;AACX;AACE,IAAAA,IAAOhF,EAAO,UAAS,GACvBrH,MAAWqM,IAAO,QAAeD,GACjCA,KAAS;AAAA,SACFC,IAAO;AAChB,SAAOrM;AACT;AAEO,MAAMwnB,GAAa;AAAA,EACxB,YAAYC,GAAO;AACjB,WAAO,OAAO,MAAMA,CAAK,GACzB,KAAK,cAAc,CAAA;AAAA,EACrB;AAAA,EAEA,aAAa,QAAQ,EAAE,KAAAC,GAAK,qBAAAC,KAAuB;AACjD,UAAMtgB,IAAS,IAAI+D,EAAasc,CAAG;AAGnC,QAFcrgB,EAAO,MAAM,CAAC,EAAE,SAAS,KAAK,MAE9B;AACZ;AAEF,UAAM0F,IAAU1F,EAAO,aAAY;AACnC,QAAI0F,MAAY;AACd,YAAM,IAAItF;AAAA,QACR,0BAA0BsF,CAAO;AAAA,MACzC;AAEI,QAAI2a,EAAI,aAAa,OAAO,OAAO;AACjC,YAAM,IAAIjgB;AAAA,QACR;AAAA,MACR;AAGI,IAAAJ,EAAO,KAAKA,EAAO,KAAI,IAAK,IAAI,GAAG;AAEnC,UAAMmF,IAAOnF,EAAO,aAAY,GAC1BugB,IAAS,CAAA;AACf,aAASlmB,IAAI,GAAGA,IAAI8K,GAAM9K,KAAK;AAC7B,YAAMokB,IAAOze,EAAO,MAAM,EAAE,EAAE,SAAS,KAAK;AAC5C,MAAAugB,EAAOlmB,CAAC,IAAIokB;AAAA,IACd;AACA,IAAAze,EAAO,KAAKA,EAAO,KAAI,IAAK,IAAImF,CAAI;AAGpC,UAAMqb,IAAU,oBAAI,IAAG;AACvB,aAASnmB,IAAI,GAAGA,IAAI8K,GAAM9K;AACxB,MAAAmmB,EAAQ,IAAID,EAAOlmB,CAAC,GAAG2F,EAAO,aAAY,CAAE;AAE9C,UAAMygB,IAAczgB,EAAO,MAAM,EAAE,EAAE,SAAS,KAAK;AACnD,WAAO,IAAImgB,GAAa;AAAA,MACtB,QAAAI;AAAA,MACA,MAAM,CAAA;AAAA,MACN,SAAAC;AAAA,MACA,aAAAC;AAAA,MACA,qBAAAH;AAAA,IACN,CAAK;AAAA,EACH;AAAA,EAEA,aAAa,SAAS,EAAE,MAAAI,GAAM,qBAAAJ,GAAqB,YAAAlnB,EAAU,GAAI;AAC/D,UAAMunB,IAAgB;AAAA,MACpB,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,MACH,GAAG;AAAA,IACT,GACUC,IAAiB,CAAA,GAKjBH,IAAcC,EAAK,MAAM,GAAG,EAAE,SAAS,KAAK,GAE5CH,IAAS,CAAA,GACTM,IAAO,CAAA,GACPL,IAAU,oBAAI,IAAG;AACvB,QAAIM,IAAmB,MACnBC,IAAc;AAElB,UAAMxb,GAAS,CAACmb,CAAI,GAAG,OAAO,EAAE,MAAA9C,GAAM,MAAAzc,GAAM,WAAA0E,GAAW,QAAApD,GAAQ,KAAAgF,QAAU;AACvE,MAAIqZ,MAAqB,SAAMA,IAAmBrZ;AAClD,YAAMuZ,IAAU,KAAK;AAAA,SACjBF,IAAmBrZ,KAAO,MAAOqZ;AAAA,MAC3C;AACM,MAAIE,MAAYD,KACV3nB,KACF,MAAMA,EAAW;AAAA,QACf,OAAO;AAAA,QACP,QAAQ0nB,IAAmBrZ;AAAA,QAC3B,OAAOqZ;AAAA,MACnB,CAAW,GAGLC,IAAcC,GAEd7f,IAAOwf,EAAcxf,CAAI,GAErB,CAAC,UAAU,QAAQ,QAAQ,KAAK,EAAE,SAASA,CAAI,IACjDyf,EAAene,CAAM,IAAI;AAAA,QACvB,MAAAtB;AAAA,QACA,QAAAsB;AAAA,MACV,IACiBtB,MAAS,cAClByf,EAAene,CAAM,IAAI;AAAA,QACvB,MAAAtB;AAAA,QACA,QAAAsB;AAAA,MACV,IACiBtB,MAAS,gBAClByf,EAAene,CAAM,IAAI;AAAA,QACvB,MAAAtB;AAAA,QACA,QAAAsB;AAAA,MACV;AAAA,IAEI,CAAC;AAGD,UAAMwe,IAAc,OAAO,KAAKL,CAAc,EAAE,IAAI,MAAM;AAC1D,eAAW,CAACvmB,GAAG8J,CAAK,KAAK8c,EAAY,QAAO,GAAI;AAC9C,YAAM7c,IACJ/J,IAAI,MAAM4mB,EAAY,SAASP,EAAK,aAAa,KAAKO,EAAY5mB,IAAI,CAAC,GACnE6mB,IAAIN,EAAezc,CAAK,GACxBgd,IAAMC,GAAM,IAAIV,EAAK,MAAMvc,GAAOC,CAAG,CAAC,MAAM;AAClD,MAAA8c,EAAE,MAAM9c,GACR8c,EAAE,MAAMC;AAAA,IACV;AAGA,UAAMjjB,IAAI,IAAIiiB,GAAa;AAAA,MACzB,MAAM,QAAQ,QAAQO,CAAI;AAAA,MAC1B,aAAAD;AAAA,MACA,MAAAI;AAAA,MACA,QAAAN;AAAA,MACA,SAAAC;AAAA,MACA,qBAAAF;AAAA,IACN,CAAK;AAGD,IAAAS,IAAc;AACd,QAAIM,IAAQ;AACZ,UAAMC,IAAiB,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC;AAC1D,aAAS7e,KAAUme,GAAgB;AACjC,MAAAne,IAAS,OAAOA,CAAM;AACtB,YAAMue,IAAU,KAAK,MAAOK,IAAQ,MAAOP,CAAgB;AAC3D,MAAIE,MAAYD,KACV3nB,KACF,MAAMA,EAAW;AAAA,QACf,OAAO;AAAA,QACP,QAAQioB;AAAA,QACR,OAAOP;AAAA,MACnB,CAAW,GAGLO,KACAN,IAAcC;AAEd,YAAME,IAAIN,EAAene,CAAM;AAC/B,UAAI,CAAAye,EAAE;AACN,YAAI;AACF,UAAAhjB,EAAE,YAAY,GACdA,EAAE,oBAAoB;AACtB,gBAAM,EAAE,MAAAiD,GAAM,QAAA0C,MAAW,MAAM3F,EAAE,UAAU,EAAE,OAAOuE,EAAM,CAAE;AAC5D,UAAA6e,EAAepjB,EAAE,SAAS,KAAK;AAC/B,gBAAMkD,IAAM,MAAMse,GAAO9b,GAAU,KAAK,EAAE,MAAAzC,GAAM,QAAA0C,GAAQ,CAAC;AACzD,UAAAqd,EAAE,MAAM9f,GACRmf,EAAO,KAAKnf,CAAG,GACfof,EAAQ,IAAIpf,GAAKqB,CAAM,GACvBoe,EAAKzf,CAAG,IAAI8f,EAAE;AAAA,QAChB,QAAc;AACZ;AAAA,QACF;AAAA,IACF;AAEA,WAAAX,EAAO,KAAI,GACJriB;AAAA,EACT;AAAA,EAEA,MAAM,WAAW;AACf,UAAMmB,IAAU,CAAA,GACVkiB,IAAQ,CAACjf,GAAK+H,MAAa;AAC/B,MAAAhL,EAAQ,KAAK,OAAO,KAAKiD,GAAK+H,CAAQ,CAAC;AAAA,IACzC;AAEA,IAAAkX,EAAM,YAAY,KAAK,GAEvBA,EAAM,YAAY,KAAK;AAEvB,UAAMC,IAAe,IAAIzd,EAAa,OAAO,MAAM,MAAM,CAAC,CAAC;AAC3D,aAAS1J,IAAI,GAAGA,IAAI,KAAKA,KAAK;AAC5B,UAAIgnB,IAAQ;AACZ,iBAAW5C,KAAQ,KAAK;AACtB,QAAI,SAASA,EAAK,MAAM,GAAG,CAAC,GAAG,EAAE,KAAKpkB,KAAGgnB;AAE3C,MAAAG,EAAa,cAAcH,CAAK;AAAA,IAClC;AACA,IAAAhiB,EAAQ,KAAKmiB,EAAa,MAAM;AAEhC,eAAW/C,KAAQ,KAAK;AACtB,MAAA8C,EAAM9C,GAAM,KAAK;AAGnB,UAAMgD,IAAa,IAAI1d,EAAa,OAAO,MAAM,KAAK,OAAO,SAAS,CAAC,CAAC;AACxE,eAAW0a,KAAQ,KAAK;AACtB,MAAAgD,EAAW,cAAc,KAAK,KAAKhD,CAAI,CAAC;AAE1C,IAAApf,EAAQ,KAAKoiB,EAAW,MAAM;AAE9B,UAAMC,IAAgB,IAAI3d,EAAa,OAAO,MAAM,KAAK,OAAO,SAAS,CAAC,CAAC;AAC3E,eAAW0a,KAAQ,KAAK;AACtB,MAAAiD,EAAc,cAAc,KAAK,QAAQ,IAAIjD,CAAI,CAAC;AAEpD,IAAApf,EAAQ,KAAKqiB,EAAc,MAAM,GAEjCH,EAAM,KAAK,aAAa,KAAK;AAE7B,UAAMI,IAAc,OAAO,OAAOtiB,CAAO,GACnC5D,IAAM,MAAMikB,GAAOiC,CAAW,GAC9BC,IAAY,OAAO,MAAM,EAAE;AACjC,WAAAA,EAAU,MAAMnmB,GAAK,KAAK,GACnB,OAAO,OAAO,CAACkmB,GAAaC,CAAS,CAAC;AAAA,EAC/C;AAAA,EAEA,MAAM,KAAK,EAAE,MAAAlB,KAAQ;AACnB,SAAK,OAAOA;AAAA,EACd;AAAA,EAEA,MAAM,SAAS;AACb,SAAK,OAAO;AAAA,EACd;AAAA,EAEA,MAAM,KAAK,EAAE,KAAAtf,KAAO;AAClB,QAAI,CAAC,KAAK,QAAQ,IAAIA,CAAG,GAAG;AAC1B,UAAI,KAAK;AACP,oBAAK,qBACE,KAAK,oBAAoBA,CAAG;AAEnC,YAAM,IAAIhB,EAAc,yBAAyBgB,CAAG,gBAAgB;AAAA,IAExE;AACA,UAAM+C,IAAQ,KAAK,QAAQ,IAAI/C,CAAG;AAClC,WAAO,KAAK,UAAU,EAAE,OAAA+C,EAAK,CAAE;AAAA,EACjC;AAAA,EAEA,MAAM,UAAU,EAAE,OAAAA,KAAS;AACzB,QAAI,KAAK,YAAYA,CAAK;AACxB,aAAO,OAAO,OAAO,CAAA,GAAI,KAAK,YAAYA,CAAK,CAAC;AAElD,SAAK;AACL,UAAM0d,IAAQ;AAAA,MACZ,IAAW;AAAA,MACX,IAAW;AAAA,MACX,IAAW;AAAA,MACX,IAAW;AAAA,MACX,IAAW;AAAA,MACX,KAAW;AAAA,IACjB;AACI,QAAI,CAAC,KAAK;AACR,YAAM,IAAIzhB;AAAA,QACR;AAAA,MACR;AAEI,UAAM0hB,KAAO,MAAM,KAAK,MAAM,MAAM3d,CAAK,GACnCnE,IAAS,IAAI+D,EAAa+d,CAAG,GAC7B9c,IAAOhF,EAAO,UAAS,GAEvB+hB,IAAQ/c,IAAO;AACrB,QAAI7D,IAAO0gB,EAAME,CAAK;AACtB,QAAI5gB,MAAS;AACX,YAAM,IAAIf,EAAc,0BAA0B2hB,EAAM,SAAS,CAAC,CAAC;AAIrE,UAAMC,IAAWhd,IAAO;AACxB,QAAIlF,IAASkiB;AAIb,IADkBhd,IAAO,QAEvBlF,IAASmgB,GAAkBjgB,GAAQgiB,CAAQ;AAE7C,QAAIC,IAAO,MACPpe,IAAS;AAEb,QAAI1C,MAAS,aAAa;AACxB,YAAMsB,IAASqd,GAAa9f,CAAM,GAC5BkiB,IAAa/d,IAAQ1B;AAC1B,OAAC,EAAE,QAAQwf,GAAM,MAAA9gB,EAAI,IAAK,MAAM,KAAK,UAAU,EAAE,OAAO+gB,GAAY;AAAA,IACvE;AACA,QAAI/gB,MAAS,aAAa;AACxB,YAAMC,IAAMpB,EAAO,MAAM,EAAE,EAAE,SAAS,KAAK;AAC1C,OAAC,EAAE,QAAQiiB,GAAM,MAAA9gB,EAAI,IAAK,MAAM,KAAK,KAAK,EAAE,KAAAC,GAAK;AAAA,IACpD;AAEA,UAAM3B,IAASqiB,EAAI,MAAM9hB,EAAO,KAAI,CAAE;AAGtC,QAFA6D,IAAS,OAAO,KAAK,MAAMqC,GAAQzG,CAAM,CAAC,GAEtCoE,EAAO,eAAe/D;AACxB,YAAM,IAAIM;AAAA,QACR,6CAA6CN,CAAM,sBAAsB+D,EAAO,UAAU;AAAA,MAClG;AAEI,WAAIoe,MACFpe,IAAS,OAAO,KAAKQ,GAAWR,GAAQoe,CAAI,CAAC,IAG3C,KAAK,YAAY,MAEnB,KAAK,YAAY9d,CAAK,IAAI,EAAE,MAAAhD,GAAM,QAAA0C,EAAM,IAEnC,EAAE,MAAA1C,GAAM,QAAQ,WAAW,QAAA0C,EAAM;AAAA,EAC1C;AACF;ACxVO,MAAMse,WAAwBjiB,GAAU;AAAA;AAAA;AAAA;AAAA,EAI7C,YAAYrB,GAAO;AACjB,UAAM,6CAA6CA,CAAK,IAAI,GAC5D,KAAK,OAAO,KAAK,OAAOsjB,GAAgB,MACxC,KAAK,OAAO,EAAE,OAAAtjB,EAAK;AAAA,EACrB;AACF;AAEAsjB,GAAgB,OAAO;ACXhB,MAAMC,WAAwBliB,GAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAO7C,YAAYkB,GAAKoJ,GAAQ6X,GAAU/hB,GAAU;AAC3C;AAAA,MACE,UAAUc,CAAG,IACXd,IAAW,MAAMA,CAAQ,KAAK,EACtC,2BAAiC+hB,CAAQ,gBAAgB7X,CAAM;AAAA,IAC/D,GACI,KAAK,OAAO,KAAK,OAAO4X,GAAgB,MACxC,KAAK,OAAO,EAAE,KAAAhhB,GAAK,QAAAoJ,GAAQ,UAAA6X,GAAU,UAAA/hB,EAAQ;AAAA,EAC/C;AACF;AAEA8hB,GAAgB,OAAO;ACNhB,SAASE,GAAczhB,GAAM;AAGlC,MAAIM,IAAON,IAAO,IAAIA,KAAQ,KAAK;AAMnC,EACEM,MAAS,KACTA,MAAS,KACTA,MAAS,MACTA,MAAS,OAETA,IAAO;AAET,MAAIohB,IAAc1hB,IAAO;AAEzB,SAAI0hB,IAAc,KAChBA,IAAc,MAEdA,IAAc,KAGZphB,MAAS,MAAQohB,IAAc,KAC3BphB,KAAQ,MAAMohB;AACxB;ACvCA,MAAMC,IAAa,KAAK;AAExB,SAASC,GACPC,GACAC,GACAC,GACAC,GACA;AACA,MAAIH,MAAiB,UAAaC,MAAqB;AACrD,WAAO,CAACD,GAAcC,CAAgB;AAExC,EAAIC,MAAiB,WACnBA,IAAeC,EAAK,QAAO;AAE7B,QAAMC,IAAU,KAAK,MAAMF,IAAe,GAAI,GACxCG,KAAeH,IAAeE,IAAU,OAAQ;AACtD,SAAO,CAACA,GAASC,CAAW;AAC9B;AAEO,SAASC,GAAe5a,GAAG;AAChC,QAAM,CAAC6a,GAAcC,CAAgB,IAAIT;AAAA,IACvCra,EAAE;AAAA,IACFA,EAAE;AAAA,IACFA,EAAE;AAAA,IACFA,EAAE;AAAA,EACN,GACQ,CAAC+a,GAAcC,CAAgB,IAAIX;AAAA,IACvCra,EAAE;AAAA,IACFA,EAAE;AAAA,IACFA,EAAE;AAAA,IACFA,EAAE;AAAA,EACN;AAEE,SAAO;AAAA,IACL,cAAc6a,IAAeT;AAAA,IAC7B,kBAAkBU,IAAmBV;AAAA,IACrC,cAAcW,IAAeX;AAAA,IAC7B,kBAAkBY,IAAmBZ;AAAA,IACrC,KAAKpa,EAAE,MAAMoa;AAAA,IACb,KAAKpa,EAAE,MAAMoa;AAAA,IACb,MAAMF,GAAcla,EAAE,OAAOoa,CAAU;AAAA,IACvC,KAAKpa,EAAE,MAAMoa;AAAA,IACb,KAAKpa,EAAE,MAAMoa;AAAA;AAAA;AAAA,IAGb,MAAMpa,EAAE,OAAO,KAAKA,EAAE,OAAOoa,IAAa;AAAA,EAC9C;AACA;ACzCA,SAASa,GAAqB/E,GAAM;AAClC,SAAO;AAAA,IACL,aAAa,GAAQA,IAAO;AAAA,IAC5B,UAAU,GAAQA,IAAO;AAAA,IACzB,QAAQA,IAAO,UAAuB;AAAA,IACtC,YAAYA,IAAO;AAAA,EACvB;AACA;AAEA,SAASgF,GAAsB3iB,GAAO;AACpC,QAAMuE,IAAQvE,EAAM;AAEpB,SAAAuE,EAAM,WAAW,IAGjBA,EAAM,aAAa,KAAK,IAAI,OAAO,KAAKvE,EAAM,IAAI,EAAE,QAAQ,IAAK,IAE9DuE,EAAM,cAAc,QAAqB,MACzCA,EAAM,WAAW,QAAqB,OACrCA,EAAM,QAAQ,MAAS,OACxBA,EAAM,aAAa;AAExB;AAEO,MAAMqe,EAAS;AAAA;AAAA;AAAA;AAAA;AAAA,EAKpB,YAAY/hB,GAASgiB,GAAe;AAClC,SAAK,SAAS,IACd,KAAK,iBAAiBA,KAAiB,oBAAI,IAAG,GAC9C,KAAK,WAAWhiB,KAAW,oBAAI,IAAG;AAAA,EACpC;AAAA,EAEA,UAAUb,GAAO;AACf,QAAIA,EAAM,MAAM,UAAU;AACxB,MAAAA,EAAM,SAAS,CAACA,CAAK,GACrB,KAAK,SAAS,IAAIA,EAAM,MAAMA,CAAK,GACnC,KAAK,eAAe,OAAOA,EAAM,IAAI;AAAA,SAChC;AACL,UAAI8iB,IAAgB,KAAK,SAAS,IAAI9iB,EAAM,IAAI;AAChD,MAAK8iB,MACH,KAAK,SAAS,IAAI9iB,EAAM,MAAMA,CAAK,GACnC8iB,IAAgB9iB,IAElB8iB,EAAc,OAAO9iB,EAAM,MAAM,KAAK,IAAIA,GAC1C,KAAK,eAAe,IAAIA,EAAM,IAAI;AAAA,IACpC;AAAA,EACF;AAAA,EAEA,aAAa,KAAKlB,GAAQ;AACxB,QAAI,OAAO,SAASA,CAAM;AACxB,aAAO8jB,EAAS,WAAW9jB,CAAM;AAC5B,QAAIA,MAAW;AACpB,aAAO,IAAI8jB,EAAS,IAAI;AAExB,UAAM,IAAInjB,EAAc,sCAAsC;AAAA,EAElE;AAAA,EAEA,aAAa,WAAWX,GAAQ;AAC9B,QAAIA,EAAO,WAAW;AACpB,YAAM,IAAIW,EAAc,kCAAkC;AAG5D,UAAMxC,IAAQ,IAAI2lB,EAAQ,GACpBvjB,IAAS,IAAI+D,EAAatE,CAAM,GAChCikB,IAAQ1jB,EAAO,SAAS,QAAQ,CAAC;AACvC,QAAI0jB,MAAU;AACZ,YAAM,IAAItjB,EAAc,uCAAuCsjB,CAAK,EAAE;AAIxE,UAAMC,IAAc,MAAMjE,GAAOjgB,EAAO,MAAM,GAAG,GAAG,CAAC,GAC/CmkB,IAAankB,EAAO,MAAM,GAAG,EAAE,SAAS,KAAK;AACnD,QAAImkB,MAAeD;AACjB,YAAM,IAAIvjB;AAAA,QACR,iDAAiDwjB,CAAU,YAAYD,CAAW;AAAA,MAC1F;AAGI,UAAMje,IAAU1F,EAAO,aAAY;AACnC,QAAI0F,MAAY;AACd,YAAM,IAAItF,EAAc,iCAAiCsF,CAAO,EAAE;AAEpE,UAAMme,IAAa7jB,EAAO,aAAY;AACtC,QAAI3F,IAAI;AACR,WAAO,CAAC2F,EAAO,SAAS3F,IAAIwpB,KAAY;AACtC,YAAMljB,IAAQ,CAAA;AACd,MAAAA,EAAM,eAAeX,EAAO,aAAY,GACxCW,EAAM,mBAAmBX,EAAO,aAAY,GAC5CW,EAAM,eAAeX,EAAO,aAAY,GACxCW,EAAM,mBAAmBX,EAAO,aAAY,GAC5CW,EAAM,MAAMX,EAAO,aAAY,GAC/BW,EAAM,MAAMX,EAAO,aAAY,GAC/BW,EAAM,OAAOX,EAAO,aAAY,GAChCW,EAAM,MAAMX,EAAO,aAAY,GAC/BW,EAAM,MAAMX,EAAO,aAAY,GAC/BW,EAAM,OAAOX,EAAO,aAAY,GAChCW,EAAM,MAAMX,EAAO,MAAM,EAAE,EAAE,SAAS,KAAK;AAC3C,YAAMkF,IAAQlF,EAAO,aAAY;AACjC,MAAAW,EAAM,QAAQ0iB,GAAqBne,CAAK;AAExC,YAAM4e,IAAarkB,EAAO,QAAQ,GAAGO,EAAO,SAAS,CAAC,IAAIA,EAAO,KAAI;AACrE,UAAI8jB,IAAa;AACf,cAAM,IAAI1jB,EAAc,yBAAyB0jB,CAAU,EAAE;AAM/D,UAHAnjB,EAAM,OAAOX,EAAO,SAAS,QAAQ8jB,CAAU,GAG3CnjB,EAAM,KAAK,SAAS,MAAM,KAAKA,EAAM,KAAK,SAAS,KAAK;AAC1D,cAAM,IAAIN,GAAoBM,EAAM,IAAI;AAM1C,UAAIojB,IAAU,KAAM/jB,EAAO,KAAI,IAAK,MAAM;AAE1C,WADI+jB,MAAY,MAAGA,IAAU,IACtBA,OAAW;AAChB,cAAM1c,IAAMrH,EAAO,UAAS;AAC5B,YAAIqH,MAAQ;AACV,gBAAM,IAAIjH;AAAA,YACR,yCAAyCiH,CAAG,WAAW1G,EAAM,IAAI;AAAA,UAC7E;AACe,YAAIX,EAAO;AAChB,gBAAM,IAAII,EAAc,wBAAwB;AAAA,MAEpD;AAEA,MAAAO,EAAM,SAAS,CAAA,GAEf/C,EAAM,UAAU+C,CAAK,GAErBtG;AAAA,IACF;AACA,WAAOuD;AAAA,EACT;AAAA,EAEA,IAAI,gBAAgB;AAClB,WAAO,CAAC,GAAG,KAAK,cAAc;AAAA,EAChC;AAAA,EAEA,IAAI,UAAU;AACZ,WAAO,CAAC,GAAG,KAAK,SAAS,OAAM,CAAE,EAAE,KAAK4C,EAAW;AAAA,EACrD;AAAA,EAEA,IAAI,aAAa;AACf,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,cAAc;AAChB,WAAO,CAAC,GAAG,KAAK,OAAO,EAAE,QAAQ,CAAAG,MACxBA,EAAM,OAAO,SAAS,IAAIA,EAAM,OAAO,OAAO,CAAA2C,MAAKA,CAAC,IAAI3C,CAChE;AAAA,EACH;AAAA,EAEA,EAAE,OAAO,QAAQ,IAAI;AACnB,eAAWA,KAAS,KAAK;AACvB,YAAMA;AAAA,EAEV;AAAA,EAEA,OAAO,EAAE,UAAAL,GAAU,OAAA0jB,GAAO,KAAA5iB,GAAK,OAAA6iB,IAAQ,KAAK;AAC1C,IAAKD,MACHA,IAAQ;AAAA,MACN,cAAc;AAAA,MACd,kBAAkB;AAAA,MAClB,cAAc;AAAA,MACd,kBAAkB;AAAA,MAClB,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,MACN,KAAK;AAAA,MACL,KAAK;AAAA,MACL,MAAM;AAAA,IACd,IAEIA,IAAQhB,GAAegB,CAAK;AAC5B,UAAME,IAAY,OAAO,KAAK5jB,CAAQ,GAChCK,IAAQ;AAAA,MACZ,cAAcqjB,EAAM;AAAA,MACpB,kBAAkBA,EAAM;AAAA,MACxB,cAAcA,EAAM;AAAA,MACpB,kBAAkBA,EAAM;AAAA,MACxB,KAAKA,EAAM;AAAA,MACX,KAAKA,EAAM;AAAA;AAAA;AAAA;AAAA,MAIX,MAAMA,EAAM,QAAQ;AAAA,MACpB,KAAKA,EAAM;AAAA,MACX,KAAKA,EAAM;AAAA,MACX,MAAMA,EAAM;AAAA,MACZ,MAAM1jB;AAAA,MACN,KAAKc;AAAA,MACL,OAAO;AAAA,QACL,aAAa;AAAA,QACb,UAAU;AAAA,QACV,OAAA6iB;AAAA,QACA,YAAYC,EAAU,SAAS,OAAQA,EAAU,SAAS;AAAA,MAClE;AAAA,MACM,QAAQ,CAAA;AAAA,IACd;AAEI,SAAK,UAAUvjB,CAAK,GAEpB,KAAK,SAAS;AAAA,EAChB;AAAA,EAEA,OAAO,EAAE,UAAAL,KAAY;AACnB,QAAI,KAAK,SAAS,IAAIA,CAAQ;AAC5B,WAAK,SAAS,OAAOA,CAAQ;AAAA;AAE7B,iBAAW0C,KAAO,KAAK,SAAS,KAAI;AAClC,QAAIA,EAAI,WAAW1C,IAAW,GAAG,KAC/B,KAAK,SAAS,OAAO0C,CAAG;AAK9B,IAAI,KAAK,eAAe,IAAI1C,CAAQ,KAClC,KAAK,eAAe,OAAOA,CAAQ,GAErC,KAAK,SAAS;AAAA,EAChB;AAAA,EAEA,QAAQ;AACN,SAAK,SAAS,MAAK,GACnB,KAAK,SAAS;AAAA,EAChB;AAAA,EAEA,IAAI,EAAE,UAAAA,KAAY;AAChB,WAAO,KAAK,SAAS,IAAIA,CAAQ;AAAA,EACnC;AAAA,EAEA,SAAS;AACP,WAAO,KAAK,QACT,IAAI,CAAAK,MAAS,GAAGA,EAAM,KAAK,SAAS,CAAC,CAAC,IAAIA,EAAM,GAAG,OAAOA,EAAM,IAAI,EAAE,EACtE,KAAK;AAAA,CAAI;AAAA,EACd;AAAA,EAEA,aAAa,eAAeA,GAAO;AACjC,UAAMwjB,IAAQ,OAAO,KAAKxjB,EAAM,IAAI,GAE9Bb,IAAS,KAAK,MAAM,KAAKqkB,EAAM,SAAS,KAAK,CAAC,IAAI,GAClDC,IAAU,OAAO,MAAMtkB,CAAM,GAC7B+E,IAAS,IAAId,EAAaqgB,CAAO,GACjCC,IAAOrB,GAAeriB,CAAK;AACjC,WAAAkE,EAAO,cAAcwf,EAAK,YAAY,GACtCxf,EAAO,cAAcwf,EAAK,gBAAgB,GAC1Cxf,EAAO,cAAcwf,EAAK,YAAY,GACtCxf,EAAO,cAAcwf,EAAK,gBAAgB,GAC1Cxf,EAAO,cAAcwf,EAAK,GAAG,GAC7Bxf,EAAO,cAAcwf,EAAK,GAAG,GAC7Bxf,EAAO,cAAcwf,EAAK,IAAI,GAC9Bxf,EAAO,cAAcwf,EAAK,GAAG,GAC7Bxf,EAAO,cAAcwf,EAAK,GAAG,GAC7Bxf,EAAO,cAAcwf,EAAK,IAAI,GAC9Bxf,EAAO,MAAMlE,EAAM,KAAK,IAAI,KAAK,GACjCkE,EAAO,cAAcye,GAAsB3iB,CAAK,CAAC,GACjDkE,EAAO,MAAMlE,EAAM,MAAMwjB,EAAM,QAAQ,MAAM,GACtCC;AAAA,EACT;AAAA,EAEA,MAAM,WAAW;AACf,UAAME,IAAS,OAAO,MAAM,EAAE,GACxBzf,IAAS,IAAId,EAAaugB,CAAM;AACtC,IAAAzf,EAAO,MAAM,QAAQ,GAAG,MAAM,GAC9BA,EAAO,cAAc,CAAC,GACtBA,EAAO,cAAc,KAAK,YAAY,MAAM;AAE5C,QAAI0f,IAAe,CAAA;AACnB,eAAW5jB,KAAS,KAAK;AAEvB,UADA4jB,EAAa,KAAKhB,EAAS,eAAe5iB,CAAK,CAAC,GAC5CA,EAAM,OAAO,SAAS;AACxB,mBAAWsjB,KAAStjB,EAAM;AACxB,UAAIsjB,KAASA,MAAUtjB,KACrB4jB,EAAa,KAAKhB,EAAS,eAAeU,CAAK,CAAC;AAKxD,IAAAM,IAAe,MAAM,QAAQ,IAAIA,CAAY;AAE7C,UAAMC,IAAO,OAAO,OAAOD,CAAY,GACjCE,IAAO,OAAO,OAAO,CAACH,GAAQE,CAAI,CAAC,GACnCE,IAAM,MAAMhF,GAAO+E,CAAI;AAC7B,WAAO,OAAO,OAAO,CAACA,GAAM,OAAO,KAAKC,GAAK,KAAK,CAAC,CAAC;AAAA,EACtD;AACF;ACzSO,eAAeC,GAAS3lB,GAAU4lB,GAAI;AAC3C,QAAMC,IAAO9lB,GAAYC,CAAQ;AACjC,aAAa;AACX,UAAM,EAAE,OAAAH,GAAO,MAAAO,MAAS,MAAMylB,EAAK,KAAI;AAEvC,QADIhmB,KAAO,MAAM+lB,EAAG/lB,CAAK,GACrBO,EAAM;AAAA,EACZ;AACA,EAAIylB,EAAK,UAAQA,EAAK,OAAM;AAC9B;ACTO,eAAeC,GAAQ9lB,GAAU;AACtC,MAAImG,IAAO;AACX,QAAM9F,IAAU,CAAA;AAEhB,QAAMslB,GAAS3lB,GAAU,CAAAH,MAAS;AAChC,IAAAQ,EAAQ,KAAKR,CAAK,GAClBsG,KAAQtG,EAAM;AAAA,EAChB,CAAC;AACD,QAAMlG,IAAS,IAAI,WAAWwM,CAAI;AAClC,MAAI4f,IAAY;AAChB,aAAWtlB,KAAUJ;AACnB,IAAA1G,EAAO,IAAI8G,GAAQslB,CAAS,GAC5BA,KAAatlB,EAAO;AAEtB,SAAO9G;AACT;ACjBO,MAAMqsB,GAAK;AAAA,EAChB,cAAc;AACZ,SAAK,SAAS,CAAA;AAAA,EAChB;AAAA,EAEA,MAAM/e,GAAO;AACX,QAAI,KAAK;AACP,YAAM,MAAM,yDAAyD;AAEvE,QAAI,KAAK,UAAU;AACjB,YAAMgf,IAAU,KAAK;AACrB,WAAK,WAAW,MAChBA,EAAQ,EAAE,OAAOhf,EAAK,CAAE;AAAA,IAC1B;AACE,WAAK,OAAO,KAAKA,CAAK;AAAA,EAE1B;AAAA,EAEA,MAAM;AAEJ,QADA,KAAK,SAAS,IACV,KAAK,UAAU;AACjB,YAAMgf,IAAU,KAAK;AACrB,WAAK,WAAW,MAChBA,EAAQ,EAAE,MAAM,GAAI,CAAE;AAAA,IACxB;AAAA,EACF;AAAA,EAEA,QAAQhlB,GAAK;AACX,SAAK,QAAQA,GACb,KAAK,IAAG;AAAA,EACV;AAAA,EAEA,MAAM,OAAO;AACX,QAAI,KAAK,OAAO,SAAS;AACvB,aAAO,EAAE,OAAO,KAAK,OAAO,MAAK,EAAE;AAErC,QAAI,KAAK;AACP,aAAO,EAAE,MAAM,GAAI;AAErB,QAAI,KAAK;AACP,YAAM;AAAA,QACJ;AAAA,MACR;AAEI,WAAO,IAAI,QAAQ,CAAAglB,MAAW;AAC5B,WAAK,WAAWA;AAAA,IAClB,CAAC;AAAA,EACH;AACF;ACvBO,MAAMC,GAAY;AAAA,EACvB,OAAO,MAAMC,GAAO;AAClB,UAAM3Y,IAAO5M,EAAW,aAAaulB,CAAK,GAEpCC,IAAc,IAAIJ,GAAI,GACtBK,IAAW,IAAIL,GAAI,GACnBM,IAAW,IAAIN,GAAI,GAEnBO,IAAU,iBAAiB;AAC/B,YAAM1lB,IAAO,MAAM2M,EAAI;AAEvB,UAAI3M,MAAS,KAAM,QAAO0lB,EAAO;AAEjC,UAAI1lB,MAAS,IAAM;AACjB,QAAAulB,EAAY,IAAG,GACfE,EAAS,IAAG,GACZH,EAAM,QAAQE,EAAS,QAAQF,EAAM,KAAK,IAAIE,EAAS,IAAG;AAC1D;AAAA,MACF;AAEA,cAAQxlB,EAAK,CAAC,GAAC;AAAA,QACb,KAAK,GAAG;AAEN,UAAAwlB,EAAS,MAAMxlB,EAAK,MAAM,CAAC,CAAC;AAC5B;AAAA,QACF;AAAA,QACA,KAAK,GAAG;AAEN,UAAAylB,EAAS,MAAMzlB,EAAK,MAAM,CAAC,CAAC;AAC5B;AAAA,QACF;AAAA,QACA,KAAK,GAAG;AAEN,gBAAM2lB,IAAQ3lB,EAAK,MAAM,CAAC;AAC1B,UAAAylB,EAAS,MAAME,CAAK,GACpBJ,EAAY,IAAG,GACfE,EAAS,IAAG,GACZD,EAAS,QAAQ,IAAI,MAAMG,EAAM,SAAS,MAAM,CAAC,CAAC;AAClD;AAAA,QACF;AAAA,QACA;AAEE,UAAAJ,EAAY,MAAMvlB,CAAI;AAAA,MAEhC;AAGM,MAAA0lB,EAAO;AAAA,IACT;AACA,WAAAA,EAAO,GACA;AAAA,MACL,aAAAH;AAAA,MACA,UAAAC;AAAA,MACA,UAAAC;AAAA,IACN;AAAA,EACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoEF;AChJO,eAAeG,GAAwBvmB,GAAQ;AACpD,QAAM,EAAE,aAAAkmB,GAAa,UAAAC,GAAU,UAAAC,EAAQ,IAAKJ,GAAY,MAAMhmB,CAAM,GAC9DwmB,IAAW,CAAA,GACXC,IAAa,CAAA,GACbC,IAAO,CAAA;AACb,MAAIC,IAAM,IACNzmB,IAAO;AACX,SAAO,IAAI,QAAQ,CAAC6lB,GAASa,MAAW;AAEtC,IAAAnB,GAASS,GAAa,CAAAxH,MAAQ;AAC5B,YAAM/d,IAAO+d,EAAK,SAAS,MAAM,EAAE,KAAI;AACvC,UAAI/d,EAAK,WAAW,SAAS,GAAG;AAC9B,cAAMuB,IAAMvB,EAAK,MAAM,GAAG,EAAE,KAAI;AAChC,QAAIuB,EAAI,WAAW,MACjB0kB,EAAO,IAAI3D,GAAgB/gB,CAAG,CAAC,GAEjCskB,EAAS,KAAKtkB,CAAG;AAAA,MACnB,WAAWvB,EAAK,WAAW,WAAW,GAAG;AACvC,cAAMuB,IAAMvB,EAAK,MAAM,GAAG,EAAE,KAAI;AAChC,QAAIuB,EAAI,WAAW,MACjB0kB,EAAO,IAAI3D,GAAgB/gB,CAAG,CAAC,GAEjCukB,EAAW,KAAKvkB,CAAG;AAAA,MACrB,WAAWvB,EAAK,WAAW,KAAK,GAAG;AACjC,cAAM,CAAA,EAAGuB,GAAK2kB,CAAM,IAAIlmB,EAAK,MAAM,GAAG;AACtC,QAAA+lB,EAAK,KAAK,EAAE,KAAAxkB,GAAK,QAAA2kB,EAAM,CAAE,GACpBA,MAAQ3mB,IAAO;AAAA,MACtB,MAAO,CAAIS,EAAK,WAAW,KAAK,KAC9BgmB,IAAM,IACNzmB,IAAO,OAEPA,IAAO,IACPymB,IAAM;AAER,MAAIzmB,MACFF,EAAO,QACH4mB,EAAO5mB,EAAO,KAAK,IACnB+lB,EAAQ,EAAE,UAAAS,GAAU,YAAAC,GAAY,MAAAC,GAAM,KAAAC,GAAK,UAAAR,GAAU,UAAAC,EAAQ,CAAE;AAAA,IAEvE,CAAC,EAAE,QAAQ,MAAM;AACf,MAAKlmB,MACHF,EAAO,QACH4mB,EAAO5mB,EAAO,KAAK,IACnB+lB,EAAQ,EAAE,UAAAS,GAAU,YAAAC,GAAY,MAAAC,GAAM,KAAAC,GAAK,UAAAR,GAAU,UAAAC,EAAQ,CAAE;AAAA,IAEvE,CAAC;AAAA,EACH,CAAC;AACH;ACvBI,OAAO,WAAW,SAAW,QAChC,WAAW,SAASU,GAAAA;AAMd,MAAMC,WAA+B,MAAM;AAAA,EAIjD,YAAYC,GAAiBH,GAAgB;AAC5C;AAAA,MACC,yDAAyDG,CAAO;AAAA,IAAA,GAEjE,KAAK,OAAO,0BACZ,KAAK,UAAUA,GACf,KAAK,SAASH;AAAA,EACf;AACD;AAmCA,eAAsBI,GACrBD,GACAE,GACAC,GACAltB,GAIgC;AAChC,QAAMmtB,KAAoBntB,KAAA,gBAAAA,EAAS,sBAAqB,CAAA,GAClDotB,IAAY,MAAMC;AAAA,IACvBN;AAAA,IACAE;AAAA,IACAE;AAAA,EAAA,GAEKG,IAAU,MAAMC,GAAeH,EAAU,KAAKH,GAAYC,CAAU,GAEpEM,IAAWN,EAAW,IAAI,CAACntB,MAASutB,EAAQvtB,CAAI,EAAE,GAAG,GACrD0tB,IACLD,EAAS,SAAS,IACf,MAAME,GAAaX,GAASS,GAAUL,CAAiB,IACvD,MAEEQ,IAAoC,CAAA;AAiB1C,MAhBA,MAAM,QAAQ;AAAA,IACbT,EAAW,IAAI,OAAOntB,MAAS;AAC9B,MAAK0tB,MAGLE,EAAa5tB,CAAI,IAAI,MAAM6tB;AAAA,QAC1BH,EAAU;AAAA,QACVH,EAAQvtB,CAAI,EAAE;AAAA,MAAA;AAAA,IAEhB,CAAC;AAAA,EAAA,GAOE,EAACC,KAAA,QAAAA,EAAS;AACb,WAAO,EAAE,OAAO2tB,EAAA;AAGjB,QAAME,IAAsC,CAAA,GACtCC,IAAa,MAAMV,EAAU,IAAI,SAAA;AAQvC,MAPAS,EAAU,KAAK;AAAA,IACd,MAAM,QAAQT,EAAU,IAAI,WAAW;AAAA,IACvC,MAAMA,EAAU;AAAA,IAChB,OAAOW,GAAaD,CAAU;AAAA,IAC9B,UAAUV,EAAU;AAAA,EAAA,CACpB,GAEGK,GAAW;AACd,UAAMO,IAAa,MAAMP,EAAU,IAAI,SAAA;AACvC,IAAAI,EAAU,KAAK;AAAA,MACd,MAAM,QAAQJ,EAAU,IAAI,WAAW;AAAA,MACvC,MAAMA,EAAU;AAAA,MAChB,OAAOM,GAAaC,CAAU;AAAA,MAC9B,UAAUP,EAAU;AAAA,IAAA,CACpB;AAAA,EACF;AAEA,QAAMQ,IAAmC,CAAA;AACzC,aAAWluB,KAAQmtB;AAClB,IAAAe,EAASluB,CAAI,IAAIutB,EAAQvtB,CAAI,EAAE;AAGhC,SAAO;AAAA,IACN,OAAO4tB;AAAA,IACP,WAAAE;AAAA,IACA,SAAS;AAAA,MACR,GAAI,MAAMK,GAAoBd,CAAS;AAAA,MACvC,GAAI,MAAMc,GAAoBT,CAAS;AAAA,IAAA;AAAA,IAExC,UAAAQ;AAAA,EAAA;AAEF;AAkCA,MAAME,KAAiB;AAWvB,eAAsBC,GACrBrB,GACAE,GACAE,IAA0C,CAAA,GACjB;AACzB,QAAMC,IAAY,MAAMC;AAAA,IACvBN;AAAA,IACAE;AAAA,IACAE;AAAA,EAAA,GAEKkB,IAAW,MAAMC,GAAkBlB,EAAU,KAAKH,CAAU;AAClE,SAAKoB,KAAA,QAAAA,EAAU,SAIRE,GAAkBF,CAAQ,IAHzB,CAAA;AAIT;AASA,eAAsBG,GACrBzB,GACAjtB,GACAqtB,IAA0C,CAAA,GACzC;AACD,QAAMvZ,IAAS,MAAM6a,GAAY1B,GAASjtB,CAAG;AAC7C,MAAI8T,EAAO;AACV,WAAOA,EAAO;AAGf,QAAM3L,IAAM,MAAMymB,GAAY3B,GAASnZ,EAAO,SAASuZ,CAAiB;AACxE,MAAI,CAACllB;AACJ,UAAM,IAAI,MAAM,YAAY2L,EAAO,OAAO,kBAAkBmZ,CAAO,EAAE;AAEtE,SAAO9kB;AACR;AAEA,SAASsmB,GAAkB9rB,GAA8B;AACxD,SAAOA,EAAK,OACV,IAAI,CAACX,MAAW;AAChB,QAAIA,EAAO,SAAS;AACnB,aAAO;AAAA,QACN,MAAMA,EAAO;AAAA,QACb,MAAM;AAAA,MAAA;AAER,QAAWA,EAAO,SAAS,UAAUA,EAAO;AAC3C,aAAO;AAAA,QACN,MAAMA,EAAO;AAAA,QACb,MAAM;AAAA,QACN,UAAUysB,GAAkBzsB,CAAwB;AAAA,MAAA;AAAA,EAIvD,CAAC,EACA,OAAO,CAAC0F,MAAU,CAAC,EAACA,KAAA,QAAAA,EAAO,KAAI;AAClC;AAWA,eAAsBmnB,GACrB5B,GACA6B,GACAzB,IAA0C,CAAA,GACzC;AACD,QAAM0B,IAAa,OAAO;AAAA,IACxB,MAAMlD,GAAQ;AAAA,MACdllB,EAAW,OAAO;AAAA,CAAmB;AAAA,MACrCA,EAAW,OAAO;AAAA,CAAoB;AAAA,MACtCA,EAAW,OAAO;AAAA,CAAsB;AAAA,MACxCA,EAAW,MAAA;AAAA,MACXA,EAAW,OAAO;AAAA,CAAQ;AAAA,MAC1BA,EAAW,OAAO,cAAcmoB,CAA0B;AAAA,CAAI;AAAA,MAC9DnoB,EAAW,MAAA;AAAA,IAAM,CACjB;AAAA,EAAA,GAGIqoB,IAAW,MAAM,MAAM/B,IAAU,oBAAoB;AAAA,IAC1D,QAAQ;AAAA,IACR,SAAS;AAAA,MACR,QAAQ;AAAA,MACR,gBAAgB;AAAA,MAChB,kBAAkB,GAAG8B,EAAW,MAAM;AAAA,MACtC,gBAAgB;AAAA,MAChB,GAAG1B;AAAA,IAAA;AAAA,IAEJ,MAAM0B;AAAA,EAAA,CACN;AAED,MAAI,CAACC,EAAS;AACb,UAAIA,EAAS,WAAW,OAAOA,EAAS,WAAW,MAC5C,IAAIhC,GAAuBC,GAAS+B,EAAS,MAAM,IAEpD,IAAI;AAAA,MACT,iCAAiC/B,CAAO,KAAK+B,EAAS,MAAM,IAAIA,EAAS,UAAU;AAAA,IAAA;AAIrF,QAAMC,IAA+B,CAAA;AACrC,mBAAiBroB,KAAQsoB,GAAsBF,CAAQ,GAAG;AACzD,UAAMG,IAAUvoB,EAAK,QAAQ,GAAG,GAC1B5G,IAAM4G,EAAK,MAAM,GAAGuoB,CAAO,GAgB3BzpB,IADakB,EAAK,MAAMuoB,IAAU,GAAGvoB,EAAK,SAAS,CAAC,EAClC,MAAM,GAAG,EAAE,CAAC;AACpC,IAAAqoB,EAAKvpB,CAAI,IAAI1F;AAAA,EACd;AACA,SAAOivB;AACR;AAcA,eAAeN,GACd1B,GACAjtB,GACwB;AAExB,UADaA,EAAI,QAAQ,SACjB;AAAA,IACP,KAAK;AACJ,aAAO;AAAA,QACN,MAAM;AAAA,QACN,SAASA,EAAI;AAAA,QACb,aAAaA,EAAI;AAAA,MAAA;AAAA,IAEnB,KAAK;AACJ,aAAO;AAAA,QACN,MAAM;AAAA,QACN,SAAS,cAAcA,EAAI,MAAM,MAAM;AAAA,MAAA;AAAA,IAEzC,KAAK;AACJ,aAAO;AAAA,QACN,MAAM;AAAA,QACN,SAAS,aAAaA,EAAI,MAAM,MAAM;AAAA,MAAA;AAAA,IAExC,KAAK;AACJ,aAAO;AAAA,QACN,MAAM;AAAA,QACN,SAASA,EAAI,MAAM,KAAA;AAAA,MAAK;AAAA,IAE1B,KAAK,SAAS;AACb,YAAMovB,IAAUpvB,EAAI,MAAM,KAAA;AAC1B,UAAIovB,MAAY,MAAMA,MAAY;AACjC,eAAO;AAAA,UACN,MAAM;AAAA,UACN,SAAS;AAAA,QAAA;AAGX,UAAIA,EAAQ,WAAW,OAAO;AAC7B,eAAO;AAAA,UACN,MAAM;AAAA,UACN,SAASA;AAAA,QAAA;AAGX,UAAIf,GAAe,KAAKe,CAAO;AAC9B,eAAO;AAAA,UACN,MAAM;AAAA,UACN,SAASA;AAAA,UACT,aAAaA;AAAA,QAAA;AAIf,YAAMC,IAAY,cAAcD,CAAO,IACjCE,IAAY,MAAMV,GAAY3B,GAASoC,CAAS;AACtD,UAAIC;AACH,eAAO;AAAA,UACN,MAAM;AAAA,UACN,SAASD;AAAA,UACT,aAAaC;AAAA,QAAA;AAIf,YAAMC,IAAS,aAAaH,CAAO,IAC7BI,IAAS,MAAMZ,GAAY3B,GAASsC,CAAM;AAChD,UAAIC;AACH,eAAO;AAAA,UACN,MAAM;AAAA,UACN,SAASD;AAAA,UACT,aAAaC;AAAA,QAAA;AAGf,YAAM,IAAI,MAAM,YAAYxvB,EAAI,KAAK,kBAAkBitB,CAAO,EAAE;AAAA,IACjE;AAAA,IACA;AACC,YAAM,IAAI,MAAM,qBAAqBjtB,EAAI,IAAI,EAAE;AAAA,EAAA;AAElD;AAEA,eAAe4uB,GACd3B,GACAwC,GACApC,GACC;AACD,QAAM4B,IAAO,MAAMJ,GAAY5B,GAASwC,GAASpC,CAAiB,GAC5DqC,IAAa,CAACD,GAAS,GAAGA,CAAO,KAAK;AAC5C,aAAWE,KAAaD,GAAY;AACnC,UAAME,IAAYD,EAAU,KAAA;AAC5B,QAAIC,KAAaX;AAChB,aAAOA,EAAKW,CAAS;AAAA,EAEvB;AACA,SAAO;AACR;AAEA,eAAerC,GACdN,GACAE,GACAE,GACC;AACD,QAAM0B,IAAa,OAAO;AAAA,IACxB,MAAMlD,GAAQ;AAAA,MACdllB,EAAW;AAAA,QACV,QAAQwmB,CAAU;AAAA;AAAA,MAAA;AAAA,MAEnBxmB,EAAW,OAAO;AAAA,CAAoB;AAAA,MACtCA,EAAW,OAAO,WAAWwmB,CAAU;AAAA,CAAI;AAAA,MAC3CxmB,EAAW,OAAO;AAAA,CAAY;AAAA,MAC9BA,EAAW,MAAA;AAAA,MACXA,EAAW,OAAO;AAAA,CAAQ;AAAA,MAC1BA,EAAW,OAAO;AAAA,CAAQ;AAAA,IAAA,CAC1B;AAAA,EAAA,GAGIqoB,IAAW,MAAM,MAAM/B,IAAU,oBAAoB;AAAA,IAC1D,QAAQ;AAAA,IACR,SAAS;AAAA,MACR,QAAQ;AAAA,MACR,gBAAgB;AAAA,MAChB,kBAAkB,GAAG8B,EAAW,MAAM;AAAA,MACtC,GAAG1B;AAAA,IAAA;AAAA,IAEJ,MAAM0B;AAAA,EAAA,CACN;AAED,MAAI,CAACC,EAAS;AACb,UAAIA,EAAS,WAAW,OAAOA,EAAS,WAAW,MAC5C,IAAIhC,GAAuBC,GAAS+B,EAAS,MAAM,IAEpD,IAAI;AAAA,MACT,oCAAoC/B,CAAO,KAAK+B,EAAS,MAAM,IAAIA,EAAS,UAAU;AAAA,IAAA;AAIxF,QAAMtN,IAAWmO,GAAiBb,EAAS,IAAK,GAC1Clb,IAAS,MAAM0Y,GAAwB9K,CAAQ,GAC/C0K,IAAW,OAAO,KAAM,MAAMP,GAAQ/X,EAAO,QAAQ,CAAS,GAC9DsT,IAAM,MAAMF,GAAa,SAAS;AAAA,IACvC,MAAMkF;AAAA,EAAA,CACN,GACK0D,IAAe1I,EAAI;AACzB,SAAAA,EAAI,OAAO,eAAgB,EAAE,KAAAjf,GAAK,GAAG4nB,KAAyB;AAC7D,UAAMrwB,IAAS,MAAMowB,EAAa,KAAK,MAAM,EAAE,KAAA3nB,GAAK,GAAG4nB,GAAM;AAC7D,WAAArwB,EAAO,MAAMyI,GACNzI;AAAA,EACR,GACO;AAAA,IACN,KAAA0nB;AAAA,IACA,UAAU6G,GAAa7B,CAAQ;AAAA,IAC/B,UAAU;AAAA,EAAA;AAEZ;AAEA,eAAeoC,GAAkBpH,GAAmB+F,GAAoB;AACvE,QAAM3iB,IAAS,MAAM4c,EAAI,KAAK;AAAA,IAC7B,KAAK+F;AAAA,EAAA,CACL;AACD,EAAA6C,EAAWxlB,CAAM;AAEjB,QAAMylB,IAAW,MAAM7I,EAAI,KAAK,EAAE,KAAK5c,EAAO,OAAO,MAAM,GACrD0lB,IAAQ,CAACD,CAAQ;AACvB,SAAOC,EAAM,SAAS,KAAG;AACxB,UAAMvtB,IAAOutB,EAAM,IAAA,GACbC,IAAW,MAAM/I,EAAI,KAAK,EAAE,KAAKzkB,EAAK,KAAK;AAGjD,QAFAqtB,EAAWG,CAAQ,GACnBxtB,EAAK,SAASwtB,EAAS,QACnBA,EAAS,SAAS;AACrB,iBAAWC,KAAWD,EAAS;AAC9B,QAAIC,EAAQ,SAAS,UACpBF,EAAM,KAAKE,CAAO;AAAA,EAItB;AACA,SAAOH;AACR;AAEA,eAAe7B,GACd3G,GAKkC;AAClC,MAAI,CAACA;AACJ,WAAO,CAAA;AAER,QAAM4I,IAAkC,CAAA,GAClCC,wBAAW,IAAA;AACjB,aAAWnoB,KAAOsf,EAAK,IAAI,UAAU,CAAA,GAAI;AACxC,QAAI6I,EAAK,IAAInoB,CAAG;AACf;AAED,UAAMqB,IAASie,EAAK,IAAI,QAAQ,IAAItf,CAAG;AACvC,QAAIqB,MAAW;AACd;AAED,UAAM,EAAE,MAAAtB,GAAM,QAAA0C,EAAA,IAAW,MAAM6c,EAAK,IAAI,UAAU,EAAE,OAAOje,GAAQ;AACnE,IAAItB,MAAS,eAAeA,MAAS,eAGhC0C,MAGL0lB,EAAK,IAAInoB,CAAG,GACZkoB,EAAQ,KAAK;AAAA,MACZ,KAAAloB;AAAA,MACA,MAAAD;AAAA,MACA,MAAM+lB,GAAarjB,CAAoB;AAAA,IAAA,CACvC;AAAA,EACF;AACA,SAAOylB;AACR;AAEA,eAAe5C,GACdrG,GACA+F,GACAoD,GACC;AACD,QAAM/lB,IAAS,MAAM4c,EAAI,KAAK;AAAA,IAC7B,KAAK+F;AAAA,EAAA,CACL;AACD,EAAA6C,EAAWxlB,CAAM;AAEjB,QAAM+jB,IAAW,MAAMnH,EAAI,KAAK,EAAE,KAAK5c,EAAO,OAAO,MAAM;AAC3D,EAAAwlB,EAAWzB,CAAQ;AAGnB,QAAMiC,IAAoC,CAAA;AAC1C,aAAWvwB,KAAQswB,GAAO;AACzB,QAAIE,IAAgBlC;AACpB,UAAMmC,IAAWzwB,EAAK,MAAM,GAAG;AAC/B,eAAW0wB,KAAWD,GAAU;AAC/B,UAAID,EAAc,SAAS;AAC1B,cAAM,IAAI,MAAM,+BAA+BxwB,CAAI,EAAE;AAGtD,UAAIwT,IAAQ;AACZ,iBAAWlT,KAAQkwB,EAAc;AAChC,YAAIlwB,EAAK,SAASowB,GAAS;AAC1B,cAAI;AACH,YAAAF,IAAgB,MAAMrJ,EAAI,KAAK,EAAE,KAAK7mB,EAAK,KAAK,GAChDyvB,EAAWS,CAAa;AAAA,UACzB,QAAQ;AACP,YAAAA,IAAgBlwB;AAAA,UACjB;AACA,UAAAkT,IAAQ;AACR;AAAA,QACD;AAED,UAAI,CAACA;AACJ,cAAM,IAAI,MAAM,+BAA+BxT,CAAI,EAAE;AAAA,IAEvD;AACA,IAAAuwB,EAAavwB,CAAI,IAAIwwB;AAAA,EACtB;AACA,SAAOD;AACR;AAGA,eAAe5C,GACdgD,GACAC,GACAxD,GACC;AACD,QAAM0B,IAAa,OAAO;AAAA,IACxB,MAAMlD,GAAQ;AAAA,MACd,GAAGgF,EAAa;AAAA,QAAI,CAACC,MACpBnqB,EAAW;AAAA,UACV,QAAQmqB,CAAU;AAAA;AAAA,QAAA;AAAA,MACnB;AAAA,MAEDnqB,EAAW,MAAA;AAAA,MACXA,EAAW,OAAO;AAAA,CAAQ;AAAA,IAAA,CAC1B;AAAA,EAAA,GAGIqoB,IAAW,MAAM,MAAM4B,IAAM,oBAAoB;AAAA,IACtD,QAAQ;AAAA,IACR,SAAS;AAAA,MACR,QAAQ;AAAA,MACR,gBAAgB;AAAA,MAChB,kBAAkB,GAAG7B,EAAW,MAAM;AAAA,MACtC,GAAG1B;AAAA,IAAA;AAAA,IAEJ,MAAM0B;AAAA,EAAA,CACN;AAED,MAAI,CAACC,EAAS;AACb,UAAIA,EAAS,WAAW,OAAOA,EAAS,WAAW,MAC5C,IAAIhC,GAAuB4D,GAAK5B,EAAS,MAAM,IAEhD,IAAI;AAAA,MACT,oCAAoC4B,CAAG,KAAK5B,EAAS,MAAM,IAAIA,EAAS,UAAU;AAAA,IAAA;AAIpF,QAAMtN,IAAWmO,GAAiBb,EAAS,IAAK,GAC1Clb,IAAS,MAAM0Y,GAAwB9K,CAAQ,GAC/C0K,IAAW,OAAO,KAAM,MAAMP,GAAQ/X,EAAO,QAAQ,CAAS;AACpE,SAAIsY,EAAS,eAAe,IAIpB;AAAA,IACN,KAJW,MAAMlF,GAAa,SAAS;AAAA,MACvC,MAAMkF;AAAA,IAAA,CACN;AAAA,IAGA,UAAU,IAAI,WAAA;AAAA,IACd,UAAU;AAAA,EAAA,IAML;AAAA,IACN,KAJW,MAAMlF,GAAa,SAAS;AAAA,MACvC,MAAMkF;AAAA,IAAA,CACN;AAAA,IAGA,UAAU6B,GAAa7B,CAAQ;AAAA,IAC/B,UAAU;AAAA,EAAA;AAEZ;AAEA,eAAe0B,GAAwB1G,GAAmB0J,GAAoB;AAC7E,QAAMnuB,IAAO,MAAMykB,EAAI,KAAK,EAAE,KAAK0J,GAAY;AAG/C,MAFAd,EAAWrtB,CAAI,GAEXA,EAAK,SAAS;AACjB,WAAOA,EAAK;AAGb,QAAMnD,IAA6B,CAAA;AACnC,aAAW,EAAE,MAAAS,GAAM,KAAAkI,GAAK,MAAAD,EAAA,KAAUvF,EAAK;AACtC,QAAIuF,MAAS,QAAQ;AACpB,YAAM0C,IAAS,MAAMwc,EAAI,KAAK,EAAE,KAAAjf,GAAK;AACrC,MAAA6nB,EAAWplB,CAAM,GACjBpL,EAAMS,CAAI,IAAI2K,EAAO;AAAA,IACtB,MAAA,CAAW1C,MAAS,WACnB1I,EAAMS,CAAI,IAAI,MAAM6tB,GAAwB1G,GAAKjf,CAAG;AAGtD,SAAO3I;AACR;AAEA,SAASwwB,EAAWtwB,GAAa;AAChC,MAAMA,EAAO,kBAAkB;AAG/B,YAAQA,EAAO,MAAA;AAAA,MACd,KAAK;AACJ,QAAAA,EAAO,SAAS6K,EAAU,KAAK7K,EAAO,MAAM,EAAE,MAAA;AAC9C;AAAA,MACD,KAAK;AACJ,QAAAA,EAAO,SAAU4I,GAAQ,KAAK5I,EAAO,MAAM,EAAU,QAAA;AACrD;AAAA,MACD,KAAK;AACJ,QAAAA,EAAO,SAAS,IAAI,WAAWA,EAAO,MAAM,GAC5CA,EAAO,SAAS;AAChB;AAAA,MACD,KAAK;AACJ,QAAAA,EAAO,SAASgK,GAAgB,KAAKhK,EAAO,MAAM,EAAE,MAAA;AACpD;AAAA,MACD;AACC,cAAM,IAAIypB;AAAA,UACTzpB,EAAO;AAAA,UACPA,EAAO;AAAA,UACP;AAAA,QAAA;AAAA,IACD;AAEH;AAEA,gBAAgBwvB,GAAsBF,GAAoB;AACzD,QAAM+B,IAAO,MAAM/B,EAAS,KAAA;AAC5B,MAAIgC,IAAK;AAET,SAAOA,KAAMD,EAAK,UAAQ;AACzB,UAAME,IAAa,SAASF,EAAK,UAAUC,GAAIA,IAAK,CAAC,GAAG,EAAE;AAC1D,QAAIC,MAAe;AAClB;AAGD,UADaF,EAAK,UAAUC,IAAK,GAAGA,IAAKC,CAAU,GAEnDD,KAAMC;AAAA,EACP;AACD;AAEA,SAASpB,GAAiB5pB,GAAa;AAEtC,MAAIA,EAAO,OAAO,aAAa;AAC9B,WAAOA;AAER,QAAMc,IAASd,EAAO,UAAA;AACtB,SAAO;AAAA,IACN,OAAO;AACN,aAAOc,EAAO,KAAA;AAAA,IACf;AAAA,IACA,SAAS;AACR,aAAAA,EAAO,YAAA,GACA,CAAA;AAAA,IACR;AAAA,IACA,CAAC,OAAO,aAAa,IAAI;AACxB,aAAO;AAAA,IACR;AAAA,EAAA;AAEF;AAEA,SAASknB,GAAaznB,GAA6B;AAClD,SAAIA,aAAkB,YACd,WAAW,KAAKA,CAAM;AAG/B;AC/uBA,MAAM0qB,KAAUnkB,GAAK,SAWfshB,KAAiB;AAMvB,eAAe8C,GACd3D,GACsC;AACtC,QAAMhuB,IAAoC,CAAA,GACpC4xB,IAAU,IAAI,YAAA;AAEpB,eAAM,QAAQ;AAAA,IACb5D,EAAQ,IAAI,OAAO,EAAE,KAAArlB,GAAK,MAAAD,GAAM,MAAAqjB,QAAW;AAC1C,UAAI,CAACpjB,KAAOojB,EAAK,WAAW;AAC3B;AAED,YAAMF,IAAS+F,EAAQ,OAAO,GAAGlpB,CAAI,IAAIqjB,EAAK,MAAM,IAAI,GAClD8F,IAAW,IAAI,WAAWhG,EAAO,SAASE,EAAK,MAAM;AAC3D,MAAA8F,EAAS,IAAIhG,GAAQ,CAAC,GACtBgG,EAAS,IAAI9F,GAAMF,EAAO,MAAM;AAChC,YAAMiG,IAAa,MAAMJ,GAAQG,CAAQ,GACnCE,IAASppB,EAAI,MAAM,GAAG,CAAC,GACvBqpB,IAASrpB,EAAI,MAAM,CAAC;AAC1B,MAAA3I,EAAM,gBAAgB+xB,CAAM,IAAIC,CAAM,EAAE,IAAIF;AAAA,IAC7C,CAAC;AAAA,EAAA,GAGK9xB;AACR;AAKA,SAASiyB,GACRzxB,GACA0xB,GACAvE,GACc;AACd,QAAMiC,KAAUpvB,KAAA,gBAAAA,EAAK,WAAU;AAC/B,MAAI2xB,IAAyB;AAE7B,UAAQD,GAAA;AAAA,IACP,KAAK;AACJ,MAAItC,MACHuC,IAAU,cAAcvC,CAAO;AAEhC;AAAA,IACD,KAAK;AACJ,MAAAuC,IAAUvC,KAAW;AACrB;AAAA,IACD,KAAK;AACJ,MAAIA,EAAQ,WAAW,OAAO,IAC7BuC,IAAUvC,IACAA,MACVuC,IAAU,aAAavC,CAAO;AAE/B;AAAA,IACD,KAAK;AACJ,MAAAuC,IAAU;AACV;AAAA,IACD;AACC,MAAIvC,EAAQ,WAAW,OAAO,IAC7BuC,IAAUvC,IACAf,GAAe,KAAKe,CAAO,IACrCuC,IAAU,OACAvC,KAAWA,MAAY,WACjCuC,IAAU,cAAcvC,CAAO;AAEhC;AAAA,EAAA;AAGF,QAAMwC,IAAcD,IAAU,QAAQA,CAAO;AAAA,IAAO,GAAGxE,CAAU;AAAA,GAE3DkC,IACLsC,KAAWA,EAAQ,WAAW,aAAa,IAAIA,IAAU,QACpDE,IAAaxC,KAAA,gBAAAA,EAAW,MAAM,KAE9BE,IACLoC,KAAWA,EAAQ,WAAW,YAAY,IAAIA,IAAU,QACnDG,IAAUvC,KAAA,gBAAAA,EAAQ,MAAM;AAE9B,SAAO;AAAA,IACN,aAAAqC;AAAA,IACA,YAAAC;AAAA,IACA,WAAAxC;AAAA,IACA,SAAAyC;AAAA,EAAA;AAEF;AAKA,SAASC,GACR9E,GACA;AAAA,EACC,YAAA4E;AAAA,EACA,oBAAAG;AACD,GACS;AAET,QAAMC,IAAQ;AAAA,IACb;AAAA,IACA,8BAH+BD,IAAqB,IAAI,CAGF;AAAA,IACtD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,UAAW/E,CAAO;AAAA,IAClB;AAAA,IACA;AAAA,EAAA;AAED,SAAI+E,MACHC,EAAM,KAAK,kBAAmB,GAC9BA,EAAM,KAAK,yBAA0BD,CAAkB,EAAE,GACzDC,EAAM,KAAK,cAAc,GACzBA,EAAM,KAAK,wBAAyB,IAEjCJ,KACHI,EAAM;AAAA,IACL,YAAYJ,CAAU;AAAA,IACtB;AAAA,IACA,uBAAwBA,CAAU;AAAA,EAAA,GAG7BI,EAAM,KAAK;AAAA,CAAI,IAAI;AAAA;AAC3B;AAMA,eAAsBC,GAAsB;AAAA,EAC3C,SAAAjF;AAAA,EACA,YAAAE;AAAA,EACA,KAAAntB;AAAA,EACA,SAAA0xB;AAAA,EACA,SAAAlE;AAAA,EACA,UAAAW;AAAA,EACA,YAAAgE;AACD,GAQiD;AAChD,QAAMC,IAAgD,CAAA,GAChDC,IAAWZ,GAAgBzxB,GAAK0xB,GAASvE,CAAU;AAEzD,EAAAiF,EAAS,WAAW,IAAIC,EAAS,aACjCD,EAAS,aAAa,IAAIL,GAAe9E,GAAS;AAAA,IACjD,YAAYoF,EAAS;AAAA,EAAA,CACrB,GACDD,EAAS,kBAAkB,IAAI;AAAA,GAC/BA,EAAS,cAAc,IAAI,GAAGjF,CAAU;AAAA,GAGxCiF,EAAS,0BAA0B,IAAI,IACvCA,EAAS,yBAAyB,IAAI,IACtCA,EAAS,4BAA4B,IAAI,IAErCC,EAAS,aAAaA,EAAS,eAClCD,EAAS,gBAAgB,IAAI,QAAQC,EAAS,SAAS;AAAA,GACvDD,EAAS,QAAQC,EAAS,SAAS,EAAE,IAAI,GAAGlF,CAAU;AAAA,GACtDiF,EACC,4BAA4BC,EAAS,UAAU,EAChD,IAAI,GAAGlF,CAAU;AAAA,GACjBiF,EACC,+BACD,IAAI,4BAA4BC,EAAS,UAAU;AAAA,IAGhDA,EAAS,YACZD,EAAS,kBAAkBC,EAAS,OAAO,EAAE,IAAI,GAAGlF,CAAU;AAAA,IAI/D,OAAO,OAAOiF,GAAU,MAAMjB,GAA0B3D,CAAO,CAAC;AAGhE,QAAM7oB,IAAQ,IAAI2lB,EAAA;AAClB,aAAW,CAACrqB,GAAMkI,CAAG,KAAK,OAAO,QAAQgmB,CAAQ,GAAG;AAEnD,UAAMmE,IAAkBryB,EACtB,UAAUkyB,EAAW,MAAM,EAC3B,QAAQ,QAAQ,EAAE;AACpB,IAAAxtB,EAAM,OAAO;AAAA,MACZ,UAAU2tB;AAAA,MACV,KAAAnqB;AAAA,MACA,OAAO;AAAA,QACN,cAAc;AAAA,QACd,kBAAkB;AAAA,QAClB,cAAc;AAAA,QACd,kBAAkB;AAAA,QAClB,KAAK;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA;AAAA,QACN,KAAK;AAAA,QACL,KAAK;AAAA,QACL,MAAM;AAAA,MAAA;AAAA,IACP,CACA;AAAA,EACF;AACA,QAAMoqB,IAAc,MAAM5tB,EAAM,SAAA;AAEhC,SAAAytB,EAAS,YAAY,IAAI,WAAW,KAAKG,CAAW,GAE7CH;AACR;AChOO,SAASI,GACfhzB,GACAizB,GACC;AACD,EAAAA,IAAe/uB,GAAc+uB,CAAY;AACzC,QAAMC,IAAS,CAAC,IAAI,KAAK,GAAG,EAAE,SAASD,CAAY;AAEnD,MAAIE,IAAoCnzB;AACxC,MAAIkzB;AACH,IAAAD,IAAe;AAAA,OACT;AACN,UAAM/B,IAAW+B,EAAa,MAAM,GAAG;AACvC,eAAW9B,KAAWD,GAAU;AAC/B,YAAM/wB,IAAOgzB,KAAA,gBAAAA,EAAa;AAAA,QACzB,CAAChzB,MAASA,EAAK,SAASgxB;AAAA;AAEzB,WAAIhxB,KAAA,gBAAAA,EAAM,UAAS;AAClB,QAAAgzB,IAAchzB,EAAK;AAAA,kBACTA,IACH,CAACA,EAAK,IAAI,IAEV,CAAA;AAAA,IAET;AAAA,EACD;AAGA,QAAMizB,IAAwB,CAAA,GACxBjvB,IAAQ,CAAC,EAAE,MAAMgvB,GAAa,MAAMF,GAAc;AACxD,SAAO9uB,EAAM,SAAS,KAAG;AACxB,UAAM,EAAE,MAAAhB,GAAM,MAAA1C,MAAS0D,EAAM,IAAA;AAI7B,eAAWhE,KAAQgD,GAAM;AACxB,YAAMkwB,IAAW,GAAG5yB,CAAI,GAAGA,IAAO,MAAM,EAAE,GAAGN,EAAK,IAAI;AACtD,MAAIA,EAAK,SAAS,WACjBgE,EAAM,KAAK;AAAA,QACV,MAAMhE,EAAK;AAAA,QACX,MAAMkzB;AAAA,MAAA,CACN,IAEDD,EAAY,KAAKC,CAAQ;AAAA,IAE3B;AAAA,EACD;AACA,SAAOD;AACR;AAEO,SAASE,GAAiB7yB,GAAcsxB,GAAgB;AAC9D,SAAItxB,EAAK,WAAWsxB,CAAM,IAClBtxB,EAAK,UAAUsxB,EAAO,MAAM,IAE7BtxB;AACR;ACJA,eAAsB8yB,GACrB9nB,GACA+nB,GACgB;AAChB,QAAMA,EAAY,MAAA;AAElB,QAAMC,IAAU,OAAOhzB,MAAiB;AACvC,UAAMsI,IAAU,MAAM0C,EAAO,UAAUhL,CAAI;AAC3C,eAAWyF,KAAQ6C,GAAS;AAC3B,YAAM2qB,IAAWjzB,MAAS,MAAM,IAAIyF,CAAI,KAAK,GAAGzF,CAAI,IAAIyF,CAAI;AAC5D,UAAI,MAAMuF,EAAO,MAAMioB,CAAQ;AAC9B,cAAMF,EAAY,MAAME,CAAQ,GAChC,MAAMD,EAAQC,CAAQ;AAAA,WAChB;AACN,cAAMvzB,IAAO,MAAMsL,EAAO,KAAKioB,CAAQ,GACjC5yB,IAAU,IAAI,WAAW,MAAMX,EAAK,aAAa;AACvD,cAAMqzB,EAAY,UAAUE,GAAU5yB,CAAO;AAAA,MAC9C;AAAA,IACD;AAAA,EACD;AAEA,QAAM2yB,EAAQ,GAAG;AAClB;AAMO,MAAME,WACJ,YAET;AAAA,EAKC,YAAYC,GAAoC;AAC/C,UAAA,GALD,KAAiB,UAAU,IAAI,YAAA,GAC/B,KAAiB,UAAU,IAAI,YAAA,GAK9B,KAAK,UAAUA;AAAA,EAChB;AAAA,EAEA,MAAM,MAAMnzB,GAAgC;AAC3C,WAAO,KAAK,QAAQ,MAAMA,CAAI;AAAA,EAC/B;AAAA,EAEA,MAAM,WAAWA,GAAgC;AAChD,WAAO,KAAK,QAAQ,WAAWA,CAAI;AAAA,EACpC;AAAA,EAEA,MAAM,KAAKA,GAAqC;AAC/C,WAAO,KAAK,QAAQ,KAAKA,CAAI;AAAA,EAC9B;AAAA,EAEA,MAAM,eAAeA,GAA+B;AAEnD,UAAMuG,IAAS,OADF,MAAM,KAAK,KAAKvG,CAAI,GACP,YAAA;AAC1B,WAAO,KAAK,QAAQ,OAAOuG,CAAM;AAAA,EAClC;AAAA,EAEA,MAAM,UAAUvG,GAAiC;AAChD,WAAO,KAAK,QAAQ,UAAUA,CAAI;AAAA,EACnC;AAAA,EAEA,MAAM,UAAUA,GAAc0kB,GAA0C;AACvE,UAAMrkB,IACL,OAAOqkB,KAAS,WAAW,KAAK,QAAQ,OAAOA,CAAI,IAAIA;AACxD,UAAM,KAAK,QAAQ,UAAU1kB,GAAMK,CAAO,GAC1C,KAAK,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,EACvC;AAAA,EAEA,MAAM,MACLL,GACAC,GACgB;AAChB,UAAM,KAAK,QAAQ,MAAMD,IAAMC,KAAA,gBAAAA,EAAS,cAAa,EAAK,GAC1D,KAAK,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,EACvC;AAAA,EAEA,MAAM,MACLD,GACAC,GACgB;AAChB,UAAM,KAAK,QAAQ,MAAMD,IAAMC,KAAA,gBAAAA,EAAS,cAAa,EAAK,GAC1D,KAAK,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,EACvC;AAAA,EAEA,MAAM,GAAG+K,GAAgB+nB,GAAoC;AAC5D,IAAI/nB,MAAW+nB,MAGf,MAAM,KAAK,QAAQ,GAAG/nB,GAAQ+nB,CAAW,GACzC,KAAK,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,EACvC;AAAA,EAEA,MAAM,OAAO/yB,GAA6B;AACzC,UAAM,KAAK,QAAQ,OAAOA,CAAI,GAC9B,KAAK,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,EACvC;AAAA,EAEA,MAAM,QAAuB;AAC5B,UAAM,KAAK,QAAQ,MAAA,GACnB,KAAK,cAAc,IAAI,MAAM,QAAQ,CAAC;AAAA,EACvC;AACD;AAEO,MAAMozB,GAAwD;AAAA,EAGpE,YAAYC,GAAoB;AAC/B,SAAK,WAAWA;AAAA,EACjB;AAAA,EAEA,MAAM,KAAKrzB,GAAqC;AAC/C,QAAIK,IAAU,KAAK,eAAeL,CAAI;AACtC,QAAI,OAAOK,KAAY;AACtB,MAAAA,IAAU,IAAI,cAAc,OAAOA,CAAO;AAAA,aAChC,EAAEA,aAAmB;AAC/B,YAAM,IAAI,MAAM,6BAA6B,OAAOA,CAAO,EAAE;AAE9D,UAAM2F,IAAS,IAAI,eAAe;AAAA,MACjC,MAAMstB,GAAY;AACjB,QAAAA,EAAW,QAAQjzB,CAAO,GAC1BizB,EAAW,MAAA;AAAA,MACZ;AAAA,IAAA,CACA;AACD,WAAO,IAAIC,EAAavtB,GAAQhG,GAAM;AAAA,MACrC,UAAUK,EAAQ;AAAA,IAAA,CAClB;AAAA,EACF;AAAA,EAEQ,eAAeL,GAA8C;AACpE,QAAIwzB,IAAgBxzB,EAAK,QAAQ,OAAO,EAAE,GACtCyzB,IAAiB,KAAK;AAC1B,WAAOD,KAAe;AACrB,UAAIC,EAAeD,CAAa;AAC/B,eAAOC,EAAeD,CAAa;AAEpC,YAAM/C,IAAW+C,EAAc,MAAM,GAAG,GAClCE,IAAcjD,EAAS,MAAA;AAC7B,UAAI,CAACiD,KAAe,CAACD,EAAeC,CAAW;AAC9C;AAED,MAAAD,IAAiBA,EAAeC,CAAW,GAC3CF,IAAgB/C,EAAS,KAAK,GAAG;AAAA,IAClC;AACA,UAAM,IAAI,MAAM,qBAAqBzwB,CAAI,EAAE;AAAA,EAC5C;AACD;AAEO,MAAM2zB,GAAmD;AAAA,EAkB/D,YAAYC,GAAkC;AAjB9C,SAAQ,8BAAkC,IAAA,GAkBzC,KAAK,YAAYA;AAAA,EAClB;AAAA,EAhBA,OAAO,WAAW5tB,GAAmD;AACpE,UAAM4tB,IAAY,IAAIC;AAAA,MACrB,IAAIC,GAAW,IAAIP,EAAavtB,GAAQ,aAAa,CAAC;AAAA,IAAA;AAEvD,WAAO,IAAI2tB,GAAcC,CAAS;AAAA,EACnC;AAAA,EAEA,OAAO,gBAAgBG,GAAyC;AAC/D,UAAMH,IAAY,IAAIC;AAAA,MACrB,IAAIC,GAAW,IAAI,KAAK,CAACC,CAAW,CAAC,CAAC;AAAA,IAAA;AAEvC,WAAO,IAAIJ,GAAcC,CAAS;AAAA,EACnC;AAAA,EAMA,MAAM,KAAKI,GAA6C;AACvD,UAAMvsB,IAAQ,MAAM,KAAK,SAASusB,CAAY,GACxC/wB,IAAO,MAAMwE,EAAM,QAAS,IAAIwsB,IAAY;AAClD,WAAO,IAAIV,EAAatwB,EAAK,OAAA,GAAU+wB,GAAc;AAAA,MACpD,UAAUvsB,EAAM;AAAA,IAAA,CAChB;AAAA,EACF;AAAA,EAEA,MAAc,SAASusB,GAAsC;AAE5D,UAAMvsB,KADU,MAAM,KAAK,WAAA,GACL,IAAIusB,EAAa,QAAQ,OAAO,EAAE,CAAC;AACzD,QAAI,CAACvsB;AACJ,YAAM,IAAI,MAAM,QAAQusB,CAAY,wBAAwB;AAE7D,WAAOvsB;AAAA,EACR;AAAA,EAEA,MAAc,aAA0C;AACvD,QAAI,KAAK,QAAQ,SAAS,GAAG;AAC5B,YAAMa,IAAU,MAAM,KAAK,UAAU,WAAA;AACrC,iBAAWb,KAASa;AACnB,aAAK,QAAQ,IAAIb,EAAM,UAAUA,CAAK;AAAA,IAExC;AACA,WAAO,KAAK;AAAA,EACb;AACD;AASO,MAAMysB,GAAuD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUnE,YAAYC,GAA0C;AACrD,QAAI,CAACA,EAAY;AAChB,YAAM,IAAI;AAAA,QACT;AAAA,MAAA;AAGF,SAAK,cAAcA;AAAA,EACpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAUA,MAAM,KAAKn0B,GAAqC;AAC/C,UAAMo0B,IAAkB,CAAA;AAGxB,eAAWC,KAAc,KAAK;AAC7B,UAAI;AACH,eAAO,MAAMA,EAAW,KAAKr0B,CAAI;AAAA,MAClC,SAASssB,GAAO;AAEf,QAAA8H,EAAO;AAAA,UACN9H,aAAiB,QAAQA,IAAQ,IAAI,MAAM,OAAOA,CAAK,CAAC;AAAA,QAAA;AAAA,MAE1D;AAID,UAAMgI,IAAgBF,EAAO,IAAI,CAACllB,MAAMA,EAAE,OAAO,EAAE,KAAK,IAAI;AAC5D,UAAM,IAAI;AAAA,MACT,kBAAkBlP,CAAI,yBAAyBs0B,CAAa;AAAA,MAC5D,EAAE,OAAOF,EAAA;AAAA,IAAO;AAAA,EAElB;AACD;AAWO,MAAMG,GAAqD;AAAA,EAKjE,YAAYt0B,GAAiC;AAG5C,QAPD,KAAQ,UAAU,IAKjB,KAAK,UAAUA,GACf,KAAK,YAAYA,EAAQ,QAAQ,WAAW,OAAO,GAC/C,KAAK;AACR;AAGD,UAAM0wB,IAAM,IAAI,IAAI,MAAM1wB,EAAQ,OAAO;AACzC,QAAI0wB,EAAI,aAAa,WAAWA,EAAI,aAAa;AAChD,YAAM,IAAI;AAAA,QACT,2BACCA,EAAI,WACJ;AAAA,MAAA;AAGH,SAAK,UAAUA,EAAI,SAASA,EAAI;AAAA,EACjC;AAAA,EAEA,MAAM,KAAK3wB,GAAqC;AAC/C,QAAI,KAAK;AACR,YAAM,IAAI;AAAA,QACT;AAAA,MAAA;AAKF,IAAAA,IAAOyD,GAAczD,CAAI;AAEzB,UAAMw0B,IAAYx0B,EAAK,QAAQ,OAAO,EAAE,GAGlC2wB,IAAM,IAAI,IAAI6D,GAAW,KAAK,OAAO,EAAE,SAAA;AAC7C,QAAI,CAAC7D,EAAI,WAAW,KAAK,OAAO;AAC/B,YAAM,IAAI;AAAA,QACT,mDAAmDA,CAAG;AAAA,MAAA;AAKxD,UAAM8D,IAAW,KAAK,QAAQ,YAC3B,GAAG,KAAK,QAAQ,SAAS,GAAG,mBAAmB9D,CAAG,CAAC,KACnDA,GAGG5B,IAAW,MAAM,MAAM0F,CAAQ;AACrC,QAAI,CAAC1F,EAAS;AACb,YAAM,IAAI;AAAA,QACT,2BAA2B/uB,CAAI,KAAK+uB,EAAS,UAAU;AAAA,MAAA;AAKzD,UAAM2F,IAAW3F,EAAS,QAAQ,IAAI,gBAAgB,IACnD,SAASA,EAAS,QAAQ,IAAI,gBAAgB,GAAI,EAAE,IACpD;AAGH,WAAO,IAAIwE,EAAaxE,EAAS,MAAO/uB,GAAM,EAAE,UAAA00B,GAAU;AAAA,EAC3D;AACD;AAQO,MAAMC,GAAsD;AAAA,EAKlE,YAAYn1B,GAAc;AACzB,SAAK,OAAOA;AAAA,EACb;AAAA,EAEA,MAAc,oBAAoB;AACjC,QAAI,CAAC,KAAK,MAAM,CAAC,KAAK,MAAM;AAC3B,UAAI;AACH,aAAK,KAAK,MAAM,OAAO,IAAI,GAC3B,KAAK,OAAO,MAAM,OAAO,MAAM;AAAA,MAChC,QAAQ;AACP,aAAK,KAAK,QAAQ,IAAI,GACtB,KAAK,OAAO,QAAQ,MAAM;AAAA,MAC3B;AACA,WAAK,OAAO,KAAK,KAAK,QAAQ,KAAK,IAAI,IAAI,KAAK,KAAK;AAAA,IACtD;AAAA,EACD;AAAA,EAEA,MAAM,KAAKozB,GAAyC;AAOnD,QANA,MAAM,KAAK,kBAAA,GAEXA,IAAW,KAAK,KAAK;AAAA,MACpB,KAAK;AAAA,MACL,KAAK,KAAK,UAAUA,EAAS,QAAQ,OAAO,EAAE,CAAC;AAAA,IAAA,GAE5C,CAACA,EAAS,WAAW,KAAK,IAAI;AACjC,YAAM,IAAI;AAAA,QACT,yDAAyDA,CAAQ;AAAA,MAAA;AAInE,WAAO,IAAI,QAAQ,CAAC7G,GAASa,MAAW;AACvC,YAAMqG,IAAW,KAAK,KAAK,QAAQL,CAAQ,GACrC5sB,IAAS,KAAK,GAAG,iBAAiBitB,CAAQ;AAEhD,MAAAjtB,EAAO,GAAG,SAAS,CAACe,MAAa;AAChC,QAAA6lB;AAAA,UACC,IAAI;AAAA,YACH,0BAA0BgG,CAAQ,KAAK7rB,EAAI,OAAO;AAAA,UAAA;AAAA,QACnD;AAAA,MAEF,CAAC,GAED,KAAK,GAAG,KAAKksB,GAAU,CAAClsB,GAAU+jB,MAAe;AAChD,QAAI/jB,IACH6lB;AAAA,UACC,IAAI;AAAA,YACH,0BAA0BgG,CAAQ,KAAK7rB,EAAI,OAAO;AAAA,UAAA;AAAA,QACnD,IAGDglB;AAAA,UACC,IAAIwH;AAAA,YACHqB,GAA2B5uB,CAAM;AAAA,YACjC4sB;AAAA,YACA;AAAA,cACC,UAAU9H,EAAM;AAAA,YAAA;AAAA,UACjB;AAAA,QACD;AAAA,MAGH,CAAC;AAAA,IACF,CAAC;AAAA,EACF;AACD;AAEA,SAAS8J,GAA2B5uB,GAA6B;AAOhE,SANuB,IAAI,eAAe;AAAA,IACzC,MAAMstB,GAAY;AACjB,MAAAttB,EAAO,GAAG,QAAQ,CAAC+G,MAAkBumB,EAAW,QAAQvmB,CAAK,CAAC,GAC9D/G,EAAO,GAAG,OAAO,MAAMstB,EAAW,OAAO;AAAA,IAC1C;AAAA,EAAA,CACA;AAEF;AAOO,MAAMuB,GAA2D;AAAA,EAGvE,YAAYC,GAAqC;AAChD,SAAK,WAAWA;AAAA,EACjB;AAAA;AAAA;AAAA;AAAA,EAKA,OAAO,oBACN7vB,GACwB;AACxB,WAAO,IAAI4vB,GAAsB5vB,CAAM;AAAA,EACxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,aAAa,SACZjF,GACA+0B,IAAS,IACwB;AACjC,QAAI,OAAO,YAAc;AACxB,YAAM,IAAI,MAAM,4CAA4C;AAE7D,QAAI,CAAC,UAAU,WAAW,CAAC,UAAU,QAAQ;AAC5C,YAAM,IAAI,MAAM,+CAA+C;AAEhE,QAAI9vB,IAAS,MAAM,UAAU,QAAQ,aAAA;AACrC,UAAMwrB,IAAWzwB,EAAK,MAAM,GAAG,EAAE,OAAO,OAAO;AAC/C,eAAW0wB,KAAWD;AACrB,MAAAxrB,IAAS,MAAMA,EAAO,mBAAmByrB,GAAS,EAAE,QAAAqE,GAAQ;AAE7D,WAAO,IAAIF,GAAsB5vB,CAAM;AAAA,EACxC;AAAA,EAEA,MAAM,QAAuB;AAC5B,qBAAiB,CAACQ,CAAI,KAAK,KAAK,SAAS;AACxC,UAAI;AACH,cAAM,KAAK,SAAS,YAAYA,GAAM,EAAE,WAAW,IAAM;AAAA,MAC1D,QAAQ;AAAA,MAER;AAAA,EAEF;AAAA;AAAA,EAGA,MAAM,KAAKzF,GAAqC;AAC/C,UAAMK,IAAU,MAAM,KAAK,iBAAiBL,CAAI,GAC1CgG,IAAS,IAAI,eAAe;AAAA,MACjC,MAAMstB,GAAY;AACjB,QAAAA,EAAW,QAAQjzB,CAAO,GAC1BizB,EAAW,MAAA;AAAA,MACZ;AAAA,IAAA,CACA;AACD,WAAO,IAAIC,EAAavtB,GAAQhG,GAAM;AAAA,MACrC,UAAUK,EAAQ;AAAA,IAAA,CAClB;AAAA,EACF;AAAA,EAEA,MAAM,MAAM20B,GAAwC;AACnD,QAAIA,MAAiB;AACpB,aAAO;AAER,QAAI;AACH,YAAMvE,IAAWuE,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO;AACvD,UAAIv0B,IAAM,KAAK;AACf,iBAAWiwB,KAAWD;AACrB,QAAAhwB,IAAM,MAAMA,EAAI,mBAAmBiwB,CAAO;AAE3C,aAAO;AAAA,IACR,QAAQ;AACP,aAAO;AAAA,IACR;AAAA,EACD;AAAA,EAEA,MAAM,WAAWsE,GAAwC;AACxD,UAAMvE,IAAWuE,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO;AAEvD,QAAIvE,EAAS,WAAW;AACvB,aAAO;AAER,UAAMhrB,IAAOgrB,EAAS,IAAA;AACtB,QAAI;AACH,UAAIhwB,IAAM,KAAK;AACf,iBAAWiwB,KAAWD;AACrB,QAAAhwB,IAAM,MAAMA,EAAI,mBAAmBiwB,CAAO;AAG3C,UAAI;AACH,qBAAMjwB,EAAI,cAAcgF,CAAI,GACrB;AAAA,MACR,QAAQ;AACP,qBAAMhF,EAAI,mBAAmBgF,CAAI,GAC1B;AAAA,MACR;AAAA,IACD,QAAQ;AACP,aAAO;AAAA,IACR;AAAA,EACD;AAAA,EAEA,MAAM,UAAUuvB,GAAyC;AACxD,QAAIv0B,IAAM,KAAK;AACf,QAAIu0B,MAAiB,KAAK;AACzB,YAAMvE,IAAWuE,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO;AACvD,iBAAWtE,KAAWD;AACrB,QAAAhwB,IAAM,MAAMA,EAAI,mBAAmBiwB,CAAO;AAAA,IAE5C;AACA,UAAMuE,IAAkB,CAAA;AACxB,qBAAiB,CAACxvB,CAAI,KAAKhF,EAAI;AAC9B,MAAAw0B,EAAM,KAAKxvB,CAAI;AAEhB,WAAOwvB;AAAA,EACR;AAAA,EAEA,MAAM,UAAUD,GAAsBtQ,GAAiC;AACtE,UAAM+L,IAAWuE,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO,GACjDE,IAAWzE,EAAS,IAAA;AAC1B,QAAI,CAACyE;AACJ,YAAM,IAAI,MAAM,sBAAsBF,CAAY,EAAE;AAGrD,QAAIv0B,IAAM,KAAK;AACf,eAAWiwB,KAAWD;AACrB,MAAAhwB,IAAM,MAAMA,EAAI,mBAAmBiwB,CAAO;AAG3C,UAAMyE,IAAW,OADF,MAAM10B,EAAI,cAAcy0B,GAAU,EAAE,QAAQ,IAAM,GACnC,eAAA;AAC9B,UAAMC,EAAS,MAAMzQ,CAAI,GACzB,MAAMyQ,EAAS,MAAA;AAAA,EAChB;AAAA,EAEA,MAAM,MAAMH,GAAsBI,IAAY,IAAsB;AACnE,UAAM3E,IAAWuE,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO;AACvD,QAAIv0B,IAAM,KAAK;AACf,aAASU,IAAI,GAAGA,IAAIsvB,EAAS,QAAQtvB,KAAK;AACzC,YAAMuvB,IAAUD,EAAStvB,CAAC,GACpBk0B,IAASl0B,MAAMsvB,EAAS,SAAS;AAEvC,MAAAhwB,IAAM,MAAMA,EAAI,mBAAmBiwB,GAAS;AAAA,QAC3C,QAAQ0E,KAAaC;AAAA,MAAA,CACrB;AAAA,IACF;AAAA,EACD;AAAA,EAEA,MAAM,MAAML,GAAsBI,GAAmC;AACpE,UAAM3E,IAAWuE,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO,GACjDvvB,IAAOgrB,EAAS,IAAA;AACtB,QAAI,CAAChrB;AACJ;AAED,QAAIhF,IAAM,KAAK;AACf,eAAWiwB,KAAWD;AACrB,MAAAhwB,IAAM,MAAMA,EAAI,mBAAmBiwB,CAAO;AAE3C,UAAMjwB,EAAI,YAAYgF,GAAM,EAAE,WAAA2vB,GAAW;AAAA,EAC1C;AAAA,EAEA,MAAM,GACLE,GACAC,GACgB;AAEhB,QADoB,MAAM,KAAK,MAAMD,CAAc;AAElD,YAAM,KAAK,QAAQA,GAAgBC,CAAmB,GACtD,MAAM,KAAK,MAAMD,GAAgB,EAAI;AAAA,SAC/B;AACN,YAAMj1B,IAAU,MAAM,KAAK,iBAAiBi1B,CAAc;AAC1D,YAAM,KAAK,UAAUC,GAAqBl1B,CAAO,GACjD,MAAM,KAAK,OAAOi1B,CAAc;AAAA,IACjC;AAAA,EACD;AAAA,EAEA,MAAM,OAAON,GAAqC;AACjD,UAAMvE,IAAWuE,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO,GACjDvvB,IAAOgrB,EAAS,IAAA;AACtB,QAAI,CAAChrB;AACJ;AAED,QAAIhF,IAAM,KAAK;AACf,eAAWiwB,KAAWD;AACrB,MAAAhwB,IAAM,MAAMA,EAAI,mBAAmBiwB,CAAO;AAE3C,QAAI;AACH,YAAMjwB,EAAI,YAAYgF,CAAI;AAAA,IAC3B,QAAQ;AAAA,IAER;AAAA,EACD;AAAA;AAAA,EAGA,MAAc,iBAAiBuvB,GAA2C;AACzE,UAAMvE,IAAWuE,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO,GACjDE,IAAWzE,EAAS,IAAA;AAC1B,QAAI,CAACyE;AACJ,YAAM,IAAI,MAAM,sBAAsBF,CAAY,EAAE;AAErD,QAAIv0B,IAAM,KAAK;AACf,eAAWiwB,KAAWD;AACrB,MAAAhwB,IAAM,MAAMA,EAAI,mBAAmBiwB,CAAO;AAG3C,UAAMhxB,IAAO,OADE,MAAMe,EAAI,cAAcy0B,CAAQ,GACrB,QAAA;AAC1B,WAAO,IAAI,WAAW,MAAMx1B,EAAK,aAAa;AAAA,EAC/C;AAAA,EAEA,MAAc,QAAQsL,GAAgB+nB,GAAoC;AACzE,UAAM,KAAK,MAAMA,CAAW;AAC5B,UAAMxzB,IAAQ,MAAM,KAAK,UAAUyL,CAAM;AACzC,eAAWvF,KAAQlG,GAAO;AACzB,YAAMi2B,IAAUxqB,MAAW,MAAM,IAAIvF,CAAI,KAAK,GAAGuF,CAAM,IAAIvF,CAAI,IACzDgwB,IACL1C,MAAgB,MAAM,IAAIttB,CAAI,KAAK,GAAGstB,CAAW,IAAIttB,CAAI;AAC1D,UAAI,MAAM,KAAK,MAAM+vB,CAAO;AAC3B,cAAM,KAAK,QAAQA,GAASC,CAAQ;AAAA,WAC9B;AACN,cAAMp1B,IAAU,MAAM,KAAK,iBAAiBm1B,CAAO;AACnD,cAAM,KAAK,UAAUC,GAAUp1B,CAAO;AAAA,MACvC;AAAA,IACD;AAAA,EACD;AACD;AASO,MAAMq1B,GAA+D;AAAA,EAG3E,YAAYC,IAA2C,IAAI;AAF3D,SAAQ,OAAgB,EAAE,MAAM,OAAO,UAAU,CAAA,EAAC;AAGjD,eAAW,CAAC31B,GAAMK,CAAO,KAAK,OAAO,QAAQs1B,CAAY;AACxD,WAAK,cAAc31B,GAAMK,CAAO;AAAA,EAElC;AAAA,EAEA,MAAM,KAAKL,GAAqC;AAE/C,UAAMK,IADO,KAAK,QAAQL,CAAI,EACT,SACfgG,IAAS,IAAI,eAAe;AAAA,MACjC,MAAMstB,GAAY;AACjB,QAAAA,EAAW,QAAQjzB,CAAO,GAC1BizB,EAAW,MAAA;AAAA,MACZ;AAAA,IAAA,CACA;AACD,WAAO,IAAIC,EAAavtB,GAAQhG,GAAM;AAAA,MACrC,UAAUK,EAAQ;AAAA,IAAA,CAClB;AAAA,EACF;AAAA,EAEA,MAAM,MAAM20B,GAAwC;AACnD,UAAMY,IAAO,KAAK,QAAQZ,CAAY;AACtC,WAAO,CAAC,CAACY,KAAQA,EAAK,SAAS;AAAA,EAChC;AAAA,EAEA,MAAM,WAAWZ,GAAwC;AAExD,WAAO,CAAC,CADK,KAAK,QAAQA,CAAY;AAAA,EAEvC;AAAA,EAEA,MAAM,UAAUA,GAAyC;AACxD,UAAMY,IAAO,KAAK,QAAQZ,CAAY;AACtC,WAAI,CAACY,KAAQA,EAAK,SAAS,QACnB,CAAA,IAED,OAAO,KAAKA,EAAK,QAAQ;AAAA,EACjC;AAAA,EAEA,MAAM,UAAUZ,GAAsBtQ,GAAiC;AACtE,SAAK,cAAcsQ,GAActQ,CAAI;AAAA,EACtC;AAAA,EAEA,MAAM,MAAMsQ,GAAsBI,IAAY,IAAsB;AAEnE,QAAIJ,MAAiB;AACpB;AAED,UAAM,EAAE,QAAAa,GAAQ,MAAApwB,EAAA,IAAS2vB,IACtB,KAAK,kBAAkBJ,CAAY,IACnC,KAAK,UAAUA,CAAY;AAC9B,IAAKa,EAAO,SAASpwB,CAAI,MACxBowB,EAAO,SAASpwB,CAAI,IAAI,EAAE,MAAM,OAAO,UAAU,GAAC;AAAA,EAEpD;AAAA,EAEA,MAAM,MAAMuvB,GAAsBI,GAAmC;AACpE,UAAM,EAAE,QAAAS,GAAQ,MAAApwB,EAAA,IAAS,KAAK,UAAUuvB,CAAY,GAC9CxpB,IAASqqB,EAAO,SAASpwB,CAAI;AACnC,QAAI,GAAC+F,KAAUA,EAAO,SAAS,QAG/B;AAAA,UAAI,CAAC4pB,KAAa,OAAO,KAAK5pB,EAAO,QAAQ,EAAE,SAAS;AACvD,cAAM,IAAI,MAAM,qBAAqB;AAEtC,aAAOqqB,EAAO,SAASpwB,CAAI;AAAA;AAAA,EAC5B;AAAA,EAEA,MAAM,GACL6vB,GACAC,GACgB;AAChB,UAAM,EAAE,QAAQO,GAAc,MAAMC,MACnC,KAAK,UAAUT,CAAc,GACxB7tB,IAAQquB,EAAa,SAASC,CAAU;AAC9C,QAAI,CAACtuB;AACJ,YAAM,IAAI,MAAM,qBAAqB6tB,CAAc,EAAE;AAGtD,UAAM,EAAE,QAAQU,GAAY,MAAMC,MACjC,KAAK,UAAUV,CAAmB;AACnC,IAAAS,EAAW,SAASC,CAAQ,IAAIxuB,GAChC,OAAOquB,EAAa,SAASC,CAAU;AAAA,EACxC;AAAA,EAEA,MAAM,OAAOf,GAAqC;AACjD,UAAM,EAAE,QAAAa,GAAQ,MAAApwB,EAAA,IAAS,KAAK,UAAUuvB,CAAY,GAC9CxpB,IAASqqB,EAAO,SAASpwB,CAAI;AACnC,IAAI+F,KAAUA,EAAO,SAAS,UAC7B,OAAOqqB,EAAO,SAASpwB,CAAI;AAAA,EAE7B;AAAA,EAEA,MAAM,QAAuB;AAC5B,SAAK,OAAO,EAAE,MAAM,OAAO,UAAU,CAAA,EAAC;AAAA,EACvC;AAAA;AAAA,EAGQ,cAAcuvB,GAAsBtQ,GAAwB;AACnE,UAAM,EAAE,QAAAmR,GAAQ,MAAApwB,EAAA,IAAS,KAAK,UAAUuvB,CAAY;AACpD,IAAAa,EAAO,SAASpwB,CAAI,IAAI;AAAA,MACvB,MAAM;AAAA,MACN,SAAS,IAAI,WAAWif,CAAI;AAAA,IAAA;AAAA,EAE9B;AAAA,EAEQ,QAAQsQ,GAA0C;AACzD,QAAIA,MAAiB;AACpB,aAAO,KAAK;AAEb,UAAMjwB,IAAQiwB,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO;AACpD,QAAIkB,IAAkB,KAAK;AAC3B,eAAWxF,KAAW3rB,GAAO;AAC5B,UAAImxB,EAAQ,SAAS;AACpB;AAED,YAAMC,IAAOD,EAAQ,SAASxF,CAAO;AACrC,UAAI,CAACyF;AACJ;AAED,MAAAD,IAAUC;AAAA,IACX;AACA,WAAOD;AAAA,EACR;AAAA,EAEQ,OAAOlB,GAA+B;AAC7C,UAAMY,IAAO,KAAK,QAAQZ,CAAY;AACtC,QAAI,CAACY,KAAQA,EAAK,SAAS;AAC1B,YAAM,IAAI,MAAM,wBAAwBZ,CAAY,EAAE;AAEvD,WAAOY;AAAA,EACR;AAAA,EAEQ,QAAQZ,GAAgC;AAC/C,UAAMY,IAAO,KAAK,QAAQZ,CAAY;AACtC,QAAI,CAACY,KAAQA,EAAK,SAAS;AAC1B,YAAM,IAAI,MAAM,mBAAmBZ,CAAY,EAAE;AAElD,WAAOY;AAAA,EACR;AAAA;AAAA;AAAA;AAAA,EAKQ,UAAUZ,GAAyD;AAC1E,UAAMvE,IAAWuE,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO,GACjDvvB,IAAOgrB,EAAS,IAAA;AACtB,QAAI,CAAChrB;AACJ,YAAM,IAAI,MAAM,iBAAiBuvB,CAAY,EAAE;AAEhD,UAAMoB,IAAa3F,EAAS,SAAS,IAAIA,EAAS,KAAK,GAAG,CAAC,KAAK,KAC1DoF,IAAS,KAAK,QAAQO,CAAU;AACtC,QAAI,CAACP,KAAUA,EAAO,SAAS;AAC9B,YAAM,IAAI,MAAM,+BAA+BO,CAAU,EAAE;AAE5D,WAAO,EAAE,QAAAP,GAAQ,MAAApwB,EAAA;AAAA,EAClB;AAAA;AAAA;AAAA;AAAA,EAKQ,kBAAkBuvB,GAGxB;AACD,UAAMvE,IAAWuE,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO,GACjDvvB,IAAOgrB,EAAS,IAAA;AACtB,QAAI,CAAChrB;AACJ,YAAM,IAAI,MAAM,iBAAiBuvB,CAAY,EAAE;AAEhD,UAAMoB,IAAa3F,EAAS,SAAS,IAAIA,EAAS,KAAK,GAAG,CAAC,KAAK;AAEhE,WAAO,EAAE,QADM,KAAK,UAAU2F,CAAU,GACvB,MAAA3wB,EAAA;AAAA,EAClB;AAAA,EAEQ,UAAUuvB,GAA+B;AAChD,QAAIA,MAAiB;AACpB,aAAO,KAAK;AAEb,UAAMjwB,IAAQiwB,EAAa,MAAM,GAAG,EAAE,OAAO,OAAO;AACpD,QAAIkB,IAAmB,KAAK;AAC5B,eAAWhxB,KAAQH,GAAO;AACzB,YAAMoxB,IAAOD,EAAQ,SAAShxB,CAAI;AAClC,UAAI,CAACixB,GAAM;AACV,cAAM11B,IAAe,EAAE,MAAM,OAAO,UAAU,CAAA,EAAC;AAC/C,QAAAy1B,EAAQ,SAAShxB,CAAI,IAAIzE,GACzBy1B,IAAUz1B;AACV;AAAA,MACD;AACA,UAAI01B,EAAK,SAAS;AACjB,cAAM,IAAI;AAAA,UACT,iBAAiBjxB,CAAI,2BAA2B8vB,CAAY;AAAA,QAAA;AAG9D,MAAAkB,IAAUC;AAAA,IACX;AACA,WAAOD;AAAA,EACR;AACD;","x_google_ignoreList":[27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83]}