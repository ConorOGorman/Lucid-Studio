{"version":3,"file":"index.js","sources":["../../../../packages/php-wasm/cli-util/src/lib/xdebug-path-mappings.ts"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport type { Mount } from './mounts';\nimport {\n\ttype X2jOptions,\n\ttype XmlBuilderOptions,\n\tXMLParser,\n\tXMLBuilder,\n} from 'fast-xml-parser';\nimport * as JSONC from 'jsonc-parser';\n\n/**\n * Create a symlink to a tempory directory.\n *\n * The symlink is created to access the system temp dir\n * inside the current debugging directory.\n *\n * @param nativeDirPath The system temp dir path.\n * @param symlinkPath The symlink name.\n */\nexport async function createTempDirSymlink(\n\tnativeDirPath: string,\n\tsymlinkPath: string,\n\tplatform: string\n) {\n\tconst type =\n\t\tplatform === 'win32'\n\t\t\t? // On Windows, creating a 'dir' symlink can require elevated permissions.\n\t\t\t\t// In this case, let's make junction points because they function like\n\t\t\t\t// symlinks and do not require elevated permissions.\n\t\t\t\t'junction'\n\t\t\t: 'dir';\n\tfs.symlinkSync(nativeDirPath, symlinkPath, type);\n}\n\n/**\n * Remove the given temporary directory symlink if it exists.\n *\n * @param symlinkPath The symlink path.\n */\nexport async function removeTempDirSymlink(symlinkPath: string) {\n\ttry {\n\t\tconst stats = fs.lstatSync(symlinkPath);\n\t\tif (stats.isSymbolicLink()) {\n\t\t\tfs.unlinkSync(symlinkPath);\n\t\t}\n\t} catch {\n\t\t// Symlink does not exist or cannot be accessed, nothing to remove\n\t}\n}\n\n/**\n * Filters out mounts that are not in the current working directory\n *\n * @param mounts The mounts list.\n */\nfunction filterLocalMounts(cwd: string, mounts: Mount[]) {\n\treturn mounts.filter((mount) => {\n\t\tconst absoluteHostPath = path.resolve(mount.hostPath);\n\t\tconst cwdChildPrefix = path.join(cwd, path.sep);\n\t\treturn (\n\t\t\t// If auto-mounting from the current directory,\n\t\t\t// the entire project directory can be mapped.\n\t\t\tabsoluteHostPath === cwd ||\n\t\t\tabsoluteHostPath.startsWith(cwdChildPrefix)\n\t\t);\n\t});\n}\n\nexport type IDEConfig = {\n\t/**\n\t * The name of the configuration within the IDE configuration.\n\t */\n\tname: string;\n\t/**\n\t * The IDEs to configure.\n\t */\n\tides: string[];\n\t/**\n\t * The web server host.\n\t */\n\thost: string;\n\t/**\n\t * The web server port.\n\t */\n\tport: number;\n\t/**\n\t * The current working directory to consider for debugger path mapping.\n\t */\n\tcwd: string;\n\t/**\n\t * The mounts to consider for debugger path mapping.\n\t */\n\tmounts?: Mount[];\n\t/**\n\t * The IDE key to use for the debug configuration. Defaults to 'PLAYGROUNDCLI'.\n\t */\n\tideKey?: string;\n};\n\ntype PhpStormConfigMetaData = {\n\tname?: string;\n\tversion?: string;\n\thost?: string;\n\tuse_path_mappings?: string;\n\t'local-root'?: string;\n\t'remote-root'?: string;\n\t/**\n\t * The type of the server.\n\t */\n\ttype?: 'PhpRemoteDebugRunConfigurationType';\n\tfactoryName?: string;\n\tfilter_connections?: 'FILTER';\n\tserver_name?: string;\n\tsession_id?: string;\n\tv?: string;\n};\n\ntype PhpStormConfigNode = {\n\t':@'?: PhpStormConfigMetaData;\n\tproject?: PhpStormConfigNode[];\n\tcomponent?: PhpStormConfigNode[];\n\tservers?: PhpStormConfigNode[];\n\tserver?: PhpStormConfigNode[];\n\tpath_mappings?: PhpStormConfigNode[];\n\tmapping?: PhpStormConfigNode[];\n\tconfiguration?: PhpStormConfigNode[];\n\tmethod?: PhpStormConfigNode[];\n};\n\ntype VSCodeConfigMetaData = {\n\t[key: string]: string;\n};\n\ntype VSCodeConfigNode = {\n\tname: string;\n\ttype: string;\n\trequest: string;\n\tport: number;\n\tpathMappings?: VSCodeConfigMetaData;\n};\n\nconst xmlParserOptions: X2jOptions = {\n\tignoreAttributes: false,\n\tattributeNamePrefix: '',\n\tpreserveOrder: true,\n\tcdataPropName: '__cdata',\n\tcommentPropName: '__xmlComment',\n\tallowBooleanAttributes: true,\n\ttrimValues: true,\n};\nconst xmlBuilderOptions: XmlBuilderOptions = {\n\tignoreAttributes: xmlParserOptions.ignoreAttributes,\n\tattributeNamePrefix: xmlParserOptions.attributeNamePrefix,\n\tpreserveOrder: xmlParserOptions.preserveOrder,\n\tcdataPropName: xmlParserOptions.cdataPropName,\n\tcommentPropName: xmlParserOptions.commentPropName,\n\tsuppressBooleanAttributes: !xmlParserOptions.allowBooleanAttributes,\n\tformat: true,\n\tindentBy: '\\t',\n};\n\nconst jsoncParseOptions: JSONC.ParseOptions = {\n\tallowEmptyContent: true,\n\tallowTrailingComma: true,\n};\n\nexport type PhpStormConfigOptions = {\n\tname: string;\n\thost: string;\n\tport: number;\n\tprojectDir: string;\n\tmappings?: Mount[];\n\tideKey: string;\n};\n\n/**\n * Pure function to update PHPStorm XML config with XDebug server and run configuration.\n *\n * @param xmlContent The original XML content of workspace.xml\n * @param options Configuration options for the server\n * @returns Updated XML content\n * @throws Error if XML is invalid or configuration is incompatible\n */\nexport function updatePhpStormConfig(\n\txmlContent: string,\n\toptions: PhpStormConfigOptions\n): string {\n\tconst { name, host, port, mappings, ideKey } = options;\n\n\tconst xmlParser = new XMLParser(xmlParserOptions);\n\n\t// Parse the XML\n\tconst config: PhpStormConfigNode[] = (() => {\n\t\ttry {\n\t\t\treturn xmlParser.parse(xmlContent, true);\n\t\t} catch {\n\t\t\tthrow new Error('PhpStorm configuration file is not valid XML.');\n\t\t}\n\t})();\n\n\t// Create the server element with path mappings\n\tconst serverElement: PhpStormConfigNode = {\n\t\tserver: [{}],\n\t\t':@': {\n\t\t\tname,\n\t\t\t// NOTE: PhpStorm quirk: Xdebug only works when the full URL (including port)\n\t\t\t// is provided in `host`. The separate `port` field is ignored or misinterpreted,\n\t\t\t// so we rely solely on host: \"host:port\".\n\t\t\thost: `${host}:${port}`,\n\t\t\tuse_path_mappings: 'true',\n\t\t},\n\t};\n\n\tif (mappings && mappings.length) {\n\t\tserverElement.server![0].path_mappings = mappings.map((mapping) => ({\n\t\t\tmapping: [],\n\t\t\t':@': {\n\t\t\t\t'local-root': `$PROJECT_DIR$/${toPosixPath(\n\t\t\t\t\tpath.relative(options.projectDir, mapping.hostPath)\n\t\t\t\t)}`,\n\t\t\t\t'remote-root': mapping.vfsPath,\n\t\t\t},\n\t\t}));\n\t}\n\n\t// Find or create project element\n\tlet projectElement = config?.find((c: PhpStormConfigNode) => !!c?.project);\n\tif (projectElement) {\n\t\tconst projectVersion = projectElement[':@']?.version;\n\t\tif (projectVersion === undefined) {\n\t\t\tthrow new Error(\n\t\t\t\t'PhpStorm IDE integration only supports <project version=\"4\"> in workspace.xml, ' +\n\t\t\t\t\t'but the <project> configuration has no version number.'\n\t\t\t);\n\t\t} else if (projectVersion !== '4') {\n\t\t\tthrow new Error(\n\t\t\t\t'PhpStorm IDE integration only supports <project version=\"4\"> in workspace.xml, ' +\n\t\t\t\t\t`but we found a <project> configuration with version \"${projectVersion}\".`\n\t\t\t);\n\t\t}\n\t}\n\tif (projectElement === undefined) {\n\t\tprojectElement = {\n\t\t\tproject: [],\n\t\t\t':@': { version: '4' },\n\t\t};\n\t\tconfig.push(projectElement);\n\t}\n\n\t// Find or create PhpServers component\n\tlet componentElement = projectElement.project?.find(\n\t\t(c: PhpStormConfigNode) =>\n\t\t\t!!c?.component && c?.[':@']?.name === 'PhpServers'\n\t);\n\tif (componentElement === undefined) {\n\t\tcomponentElement = {\n\t\t\tcomponent: [],\n\t\t\t':@': { name: 'PhpServers' },\n\t\t};\n\n\t\tif (projectElement.project === undefined) {\n\t\t\tprojectElement.project = [];\n\t\t}\n\n\t\tprojectElement.project.push(componentElement);\n\t}\n\n\t// Find or create servers element\n\tlet serversElement = componentElement.component?.find(\n\t\t(c: PhpStormConfigNode) => !!c?.servers\n\t);\n\tif (serversElement === undefined) {\n\t\tserversElement = { servers: [] };\n\n\t\tif (componentElement.component === undefined) {\n\t\t\tcomponentElement.component = [];\n\t\t}\n\n\t\tcomponentElement.component.push(serversElement);\n\t}\n\n\t// Check if server already exists\n\tconst serverElementIndex = serversElement.servers?.findIndex(\n\t\t(c: PhpStormConfigNode) => !!c?.server && c?.[':@']?.name === name\n\t);\n\n\t// Only add server if it doesn't exist\n\tif (serverElementIndex === undefined || serverElementIndex < 0) {\n\t\tif (serversElement.servers === undefined) {\n\t\t\tserversElement.servers = [];\n\t\t}\n\n\t\tserversElement.servers.push(serverElement);\n\t}\n\n\t// Find or create RunManager component\n\tlet runManagerElement = projectElement.project?.find(\n\t\t(c: PhpStormConfigNode) =>\n\t\t\t!!c?.component && c?.[':@']?.name === 'RunManager'\n\t);\n\tif (runManagerElement === undefined) {\n\t\trunManagerElement = {\n\t\t\tcomponent: [],\n\t\t\t':@': { name: 'RunManager' },\n\t\t};\n\n\t\tif (projectElement.project === undefined) {\n\t\t\tprojectElement.project = [];\n\t\t}\n\n\t\tprojectElement.project.push(runManagerElement);\n\t}\n\n\t// Check if run configuration already exists\n\tconst existingConfigIndex =\n\t\trunManagerElement.component?.findIndex(\n\t\t\t(c: PhpStormConfigNode) =>\n\t\t\t\t!!c?.configuration && c?.[':@']?.name === name\n\t\t) ?? -1;\n\n\t// Only add run configuration if it doesn't exist\n\tif (existingConfigIndex < 0) {\n\t\tconst runConfigElement: PhpStormConfigNode = {\n\t\t\tconfiguration: [\n\t\t\t\t{\n\t\t\t\t\tmethod: [],\n\t\t\t\t\t':@': { v: '2' },\n\t\t\t\t},\n\t\t\t],\n\t\t\t':@': {\n\t\t\t\tname: name,\n\t\t\t\ttype: 'PhpRemoteDebugRunConfigurationType',\n\t\t\t\tfactoryName: 'PHP Remote Debug',\n\t\t\t\tfilter_connections: 'FILTER',\n\t\t\t\tserver_name: name,\n\t\t\t\tsession_id: ideKey,\n\t\t\t},\n\t\t};\n\n\t\tif (runManagerElement.component === undefined) {\n\t\t\trunManagerElement.component = [];\n\t\t}\n\n\t\trunManagerElement.component.push(runConfigElement);\n\t}\n\n\t// Build the updated XML\n\tconst xmlBuilder = new XMLBuilder(xmlBuilderOptions);\n\tconst xml = xmlBuilder.build(config);\n\n\t// Validate the generated XML\n\ttry {\n\t\txmlParser.parse(xml, true);\n\t} catch {\n\t\tthrow new Error(\n\t\t\t'The resulting PhpStorm configuration file is not valid XML.'\n\t\t);\n\t}\n\n\treturn xml;\n}\n\nexport type VSCodeConfigOptions = {\n\tname: string;\n\tworkspaceDir: string;\n\tmappings?: Mount[];\n};\n\n/**\n * Pure function to update VS Code launch.json config with XDebug configuration.\n *\n * @param jsonContent The original JSON content of launch.json\n * @param options Configuration options\n * @returns Updated JSON content\n * @throws Error if JSON is invalid\n */\nexport function updateVSCodeConfig(\n\tjsonContent: string,\n\toptions: VSCodeConfigOptions\n): string {\n\tconst { name, mappings } = options;\n\n\tconst errors: JSONC.ParseError[] = [];\n\n\tlet content = jsonContent;\n\tlet root = JSONC.parseTree(content, errors, jsoncParseOptions);\n\n\tif (root === undefined || errors.length) {\n\t\tthrow new Error('VS Code configuration file is not valid JSON.');\n\t}\n\n\t// Find or create configurations array\n\tlet configurationsNode = JSONC.findNodeAtLocation(root, ['configurations']);\n\n\tif (\n\t\tconfigurationsNode === undefined ||\n\t\tconfigurationsNode.children === undefined\n\t) {\n\t\tconst edits = JSONC.modify(content, ['configurations'], [], {});\n\t\tcontent = JSONC.applyEdits(content, edits);\n\n\t\troot = JSONC.parseTree(content, [], jsoncParseOptions);\n\t\tconfigurationsNode = JSONC.findNodeAtLocation(root!, [\n\t\t\t'configurations',\n\t\t]);\n\t}\n\n\t// Check if configuration already exists\n\tconst configurationIndex = configurationsNode?.children?.findIndex(\n\t\t(child: any) =>\n\t\t\tJSONC.findNodeAtLocation(child, ['name'])?.value === name\n\t);\n\n\t// Only add configuration if it doesn't exist\n\tif (configurationIndex === undefined || configurationIndex < 0) {\n\t\tconst configuration: VSCodeConfigNode = {\n\t\t\tname: name,\n\t\t\ttype: 'php',\n\t\t\trequest: 'launch',\n\t\t\tport: 9003,\n\t\t};\n\n\t\tif (mappings && mappings.length) {\n\t\t\tconfiguration.pathMappings = mappings.reduce((acc, mount) => {\n\t\t\t\tacc[mount.vfsPath] = `\\${workspaceFolder}/${toPosixPath(\n\t\t\t\t\tpath.relative(options.workspaceDir, mount.hostPath)\n\t\t\t\t)}`;\n\t\t\t\treturn acc;\n\t\t\t}, {} as VSCodeConfigMetaData);\n\t\t}\n\n\t\t// Get the current length to append at the end\n\t\tconst currentLength = configurationsNode?.children?.length || 0;\n\n\t\tconst edits = JSONC.modify(\n\t\t\tcontent,\n\t\t\t['configurations', currentLength],\n\t\t\tconfiguration,\n\t\t\t{\n\t\t\t\tformattingOptions: {\n\t\t\t\t\tinsertSpaces: true,\n\t\t\t\t\ttabSize: 4,\n\t\t\t\t\teol: '\\n',\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\t\tcontent = jsoncApplyEdits(content, edits);\n\t}\n\n\treturn content;\n}\n\n/**\n * Implement necessary parameters and path mappings in IDE configuration files.\n *\n * @param name The configuration name.\n * @param mounts The mounts options.\n */\nexport async function addXdebugIDEConfig({\n\tname,\n\tides,\n\thost,\n\tport,\n\tcwd,\n\tmounts,\n\tideKey = 'PHPWASMCLI',\n}: IDEConfig) {\n\tconst mappings = mounts ? filterLocalMounts(cwd, mounts) : [];\n\tconst modifiedConfig: Record<string, string> = {};\n\n\t// PHPstorm\n\tif (ides.includes('phpstorm')) {\n\t\tconst phpStormRelativeConfigFilePath = '.idea/workspace.xml';\n\t\tconst phpStormConfigFilePath = path.join(\n\t\t\tcwd,\n\t\t\tphpStormRelativeConfigFilePath\n\t\t);\n\n\t\t// Create a template config file if the IDE directory exists,\n\t\t// or throw an error if IDE integration is requested but the directory is missing.\n\t\tif (!fs.existsSync(phpStormConfigFilePath)) {\n\t\t\tif (fs.existsSync(path.dirname(phpStormConfigFilePath))) {\n\t\t\t\tfs.writeFileSync(\n\t\t\t\t\tphpStormConfigFilePath,\n\t\t\t\t\t'<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<project version=\"4\">\\n</project>'\n\t\t\t\t);\n\t\t\t} else if (ides.length == 1) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`PhpStorm IDE integration requested, but no '.idea' directory was found in the current working directory.`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (fs.existsSync(phpStormConfigFilePath)) {\n\t\t\tconst contents = fs.readFileSync(phpStormConfigFilePath, 'utf8');\n\t\t\tconst updatedXml = updatePhpStormConfig(contents, {\n\t\t\t\tname,\n\t\t\t\thost,\n\t\t\t\tport,\n\t\t\t\tprojectDir: cwd,\n\t\t\t\tmappings,\n\t\t\t\tideKey,\n\t\t\t});\n\t\t\tfs.writeFileSync(phpStormConfigFilePath, updatedXml);\n\t\t\tmodifiedConfig['phpstorm'] = phpStormRelativeConfigFilePath;\n\t\t}\n\t}\n\n\t// VSCode\n\tif (ides.includes('vscode')) {\n\t\tconst vsCodeRelativeConfigFilePath = '.vscode/launch.json';\n\t\tconst vsCodeConfigFilePath = path.join(\n\t\t\tcwd,\n\t\t\tvsCodeRelativeConfigFilePath\n\t\t);\n\n\t\t// Create a template config file if the IDE directory exists,\n\t\t// or throw an error if IDE integration is requested but the directory is missing.\n\t\tif (!fs.existsSync(vsCodeConfigFilePath)) {\n\t\t\tif (fs.existsSync(path.dirname(vsCodeConfigFilePath))) {\n\t\t\t\tfs.writeFileSync(\n\t\t\t\t\tvsCodeConfigFilePath,\n\t\t\t\t\t'{\\n    \"configurations\": []\\n}'\n\t\t\t\t);\n\t\t\t} else if (ides.length == 1) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t`VS Code IDE integration requested, but no '.vscode' directory was found in the current working directory.`\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (fs.existsSync(vsCodeConfigFilePath)) {\n\t\t\tconst content = fs.readFileSync(vsCodeConfigFilePath, 'utf-8');\n\t\t\tconst updatedJson = updateVSCodeConfig(content, {\n\t\t\t\tname,\n\t\t\t\tworkspaceDir: cwd,\n\t\t\t\tmappings,\n\t\t\t});\n\n\t\t\t// Only write and track the file if changes were made\n\t\t\tif (updatedJson !== content) {\n\t\t\t\tfs.writeFileSync(vsCodeConfigFilePath, updatedJson);\n\t\t\t\tmodifiedConfig['vscode'] = vsCodeRelativeConfigFilePath;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn modifiedConfig;\n}\n\n/**\n * Remove stale parameters and path mappings in IDE configuration files.\n *\n * @param name The configuration name.\n * @param cwd The current working directory.\n */\nexport async function clearXdebugIDEConfig(name: string, cwd: string) {\n\tconst phpStormConfigFilePath = path.join(cwd, '.idea/workspace.xml');\n\t// PhpStorm\n\tif (fs.existsSync(phpStormConfigFilePath)) {\n\t\tconst contents = fs.readFileSync(phpStormConfigFilePath, 'utf8');\n\t\tconst xmlParser = new XMLParser(xmlParserOptions);\n\t\t// NOTE: Using an IIFE so `config` can remain const.\n\t\tconst config: PhpStormConfigNode[] = (() => {\n\t\t\ttry {\n\t\t\t\treturn xmlParser.parse(contents, true);\n\t\t\t} catch {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'PhpStorm configuration file is not valid XML.'\n\t\t\t\t);\n\t\t\t}\n\t\t})();\n\n\t\tconst projectElement = config.find(\n\t\t\t(c: PhpStormConfigNode) => !!c?.project\n\t\t);\n\t\tconst componentElement = projectElement?.project?.find(\n\t\t\t(c: PhpStormConfigNode) =>\n\t\t\t\t!!c?.component && c?.[':@']?.name === 'PhpServers'\n\t\t);\n\t\tconst serversElement = componentElement?.component?.find(\n\t\t\t(c: PhpStormConfigNode) => !!c?.servers\n\t\t);\n\t\tconst serverElementIndex = serversElement?.servers?.findIndex(\n\t\t\t(c: PhpStormConfigNode) => !!c?.server && c?.[':@']?.name === name\n\t\t);\n\n\t\tif (serverElementIndex !== undefined && serverElementIndex >= 0) {\n\t\t\tserversElement!.servers!.splice(serverElementIndex, 1);\n\n\t\t\tconst xmlBuilder = new XMLBuilder(xmlBuilderOptions);\n\t\t\tconst xml = xmlBuilder.build(config);\n\n\t\t\ttry {\n\t\t\t\txmlParser.parse(xml, true);\n\t\t\t} catch {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t'The resulting PhpStorm configuration file is not valid XML.'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\txml ===\n\t\t\t\t'<?xml version=\"1.0\" encoding=\"UTF-8\"?>\\n<project version=\"4\">\\n\t<component name=\"PhpServers\">\\n\t\t<servers></servers>\\n\t</component>\\n</project>'\n\t\t\t) {\n\t\t\t\tfs.unlinkSync(phpStormConfigFilePath);\n\t\t\t} else {\n\t\t\t\tfs.writeFileSync(phpStormConfigFilePath, xml);\n\t\t\t}\n\t\t}\n\t}\n\n\tconst vsCodeConfigFilePath = path.join(cwd, '.vscode/launch.json');\n\t// VSCode\n\tif (fs.existsSync(vsCodeConfigFilePath)) {\n\t\tconst errors: JSONC.ParseError[] = [];\n\n\t\tconst content = fs.readFileSync(vsCodeConfigFilePath, 'utf-8');\n\t\tconst root = JSONC.parseTree(content, errors, jsoncParseOptions);\n\n\t\tif (root === undefined || errors.length) {\n\t\t\tthrow new Error('VS Code configuration file is not valid JSON.');\n\t\t}\n\n\t\tconst configurationsNode = JSONC.findNodeAtLocation(root, [\n\t\t\t'configurations',\n\t\t]);\n\n\t\tconst configurationIndex = configurationsNode?.children?.findIndex(\n\t\t\t(child: any) =>\n\t\t\t\tJSONC.findNodeAtLocation(child, ['name'])?.value === name\n\t\t);\n\n\t\tif (configurationIndex !== undefined && configurationIndex >= 0) {\n\t\t\tconst edits = JSONC.modify(\n\t\t\t\tcontent,\n\t\t\t\t['configurations', configurationIndex],\n\t\t\t\tundefined,\n\t\t\t\t{\n\t\t\t\t\tformattingOptions: {\n\t\t\t\t\t\tinsertSpaces: true,\n\t\t\t\t\t\ttabSize: 4,\n\t\t\t\t\t\teol: '\\n',\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst json = jsoncApplyEdits(content, edits);\n\t\t\tif (json === '{\\n    \"configurations\": []\\n}') {\n\t\t\t\tfs.unlinkSync(vsCodeConfigFilePath);\n\t\t\t} else {\n\t\t\t\tfs.writeFileSync(vsCodeConfigFilePath, json);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction jsoncApplyEdits(content: string, edits: JSONC.Edit[]) {\n\tconst errors: JSONC.ParseError[] = [];\n\tconst json = JSONC.applyEdits(content, edits);\n\n\terrors.length = 0;\n\n\tJSONC.parseTree(json, errors, jsoncParseOptions);\n\n\tif (errors.length) {\n\t\tconst formattedErrors = errors\n\t\t\t.map((error) => {\n\t\t\t\treturn {\n\t\t\t\t\tmessage: JSONC.printParseErrorCode(error.error),\n\t\t\t\t\toffset: error.offset,\n\t\t\t\t\tlength: error.length,\n\t\t\t\t\tfragment: json.slice(\n\t\t\t\t\t\tMath.max(0, error.offset - 20),\n\t\t\t\t\t\tMath.min(json.length, error.offset + error.length + 10)\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t})\n\t\t\t.map(\n\t\t\t\t(error) =>\n\t\t\t\t\t`${error.message} at ${error.offset}:${error.length} (${error.fragment})`\n\t\t\t);\n\t\tconst formattedEdits = edits.map(\n\t\t\t(edit) => `At ${edit.offset}:${edit.length} - (${edit.content})`\n\t\t);\n\t\tthrow new Error(\n\t\t\t`VS Code configuration file (.vscode/launch.json) is not valid a JSONC after CLI modifications. This is likely ` +\n\t\t\t\t`a CLI bug. Please report it at https://github.com/WordPress/wordpress-playground/issues and include the contents ` +\n\t\t\t\t`of your \".vscode/launch.json\" file. \\n\\n Applied edits: ${formattedEdits.join(\n\t\t\t\t\t'\\n'\n\t\t\t\t)}\\n\\n The errors are: ${formattedErrors.join('\\n')}`\n\t\t);\n\t}\n\n\treturn json;\n}\n\nfunction toPosixPath(pathStr: string) {\n\treturn pathStr.replaceAll(path.sep, path.posix.sep);\n}\n"],"names":["createTempDirSymlink","nativeDirPath","symlinkPath","platform","type","fs","removeTempDirSymlink","filterLocalMounts","cwd","mounts","mount","absoluteHostPath","path","cwdChildPrefix","xmlParserOptions","xmlBuilderOptions","jsoncParseOptions","updatePhpStormConfig","xmlContent","options","name","host","port","mappings","ideKey","xmlParser","XMLParser","config","serverElement","mapping","toPosixPath","projectElement","c","projectVersion","_a","componentElement","_b","serversElement","_c","serverElementIndex","_d","runManagerElement","_e","_f","runConfigElement","xml","XMLBuilder","updateVSCodeConfig","jsonContent","errors","content","root","JSONC","configurationsNode","edits","configurationIndex","child","configuration","acc","currentLength","jsoncApplyEdits","addXdebugIDEConfig","ides","modifiedConfig","phpStormRelativeConfigFilePath","phpStormConfigFilePath","contents","updatedXml","vsCodeRelativeConfigFilePath","vsCodeConfigFilePath","updatedJson","clearXdebugIDEConfig","json","formattedErrors","error","formattedEdits","edit","pathStr"],"mappings":"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"}